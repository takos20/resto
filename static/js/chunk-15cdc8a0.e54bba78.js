(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15cdc8a0"],{"1fad":function(t,e,a){"use strict";var s=a("b259"),r=a.n(s);r.a},"53c2":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",{attrs:{dense:""}},[a("v-col",{staticClass:"mt-4",attrs:{cols:"12",sm:"12"}},[a("v-card",{staticClass:"pa-4 rounded-lg elevation-1",attrs:{color:"#FAFAFA"}},[a("v-card-title",{staticClass:"justify-center"},[a("span",{staticClass:"text-subtitle-1 font-weight-medium"},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.dish.title_stat"))+" ")])]),a("v-card-text",{staticClass:"pa-0"},[a("canvas",{staticStyle:{"max-height":"300px"},attrs:{id:"category_chart"}})])],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("div",{staticClass:"sticky-bar px-4 py-3 d-flex flex-column flex-sm-row align-center justify-space-between elevation-2"},[a("div",{staticClass:"d-flex align-center"},[a("v-icon",{staticClass:"mr-2",attrs:{color:"primary"}},[t._v("mdi-package-variant")]),a("span",{staticClass:"text-subtitle-1 font-weight-medium"},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.dish.title_stock"))+" ")])],1)]),a("br"),a("v-data-table",{staticClass:"elevation-1",attrs:{"footer-props":{"items-per-page-options":t.itemPerPageOptions},headers:t.headersStock_available,items:t.items,"items-per-page":t.itemPerPage,loading:t.loadingStockAvailable.list,options:t.pagination,"server-items-length":t.meta.totalElements,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"item-key":"name"},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"header.name",fn:function(e){var s=e.header;return[a("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.quantity",fn:function(e){var s=e.header;return[a("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"body",fn:function(e){var s=e.items;return[a("v-hover",[a("tbody",t._l(s,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"subtitle-2"},[t._v(t._s(e.name))]),a("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.stock)+" ")])])})),0)])]}}])})],1)],1)],1)],1)},r=[],n=(a("99af"),a("b64b"),a("d3b7"),a("b85c")),i=a("796e"),o=a("24a2"),l=a("d9fa"),d=a("f2d9"),c=a("2b0e");c["a"].component("downloadExcel",d["a"]);var u=a("21a6"),h={mixins:[o["a"]],name:"Dashboard",props:{form:{type:Object,default:function(){return{id:null,productAvailable:null,start_date_cat:null,start_date_month:null,end_date_month:null,date_month:null,start_date_best_selling:null,end_date_cat:null,end_date_best_selling:null}}}},data:function(){return{urlItems:"/ingredients",urlItemsProduct:"/dishes/statistics",loading:{list:!1,refresh:!1,filter:!1},sortBy:"turnover",items:[],itemsProducts:[],headersStock_available:[],meta:{},pagination:{},supply:!1,sortDesc:!0,itemPerPage:5,itemPerPageOptions:[5,10,30],maxDate:(new Date).toISOString().substr(0,10),maxDateStatMonth:(new Date).toISOString().substr(0,10),loadingBtn:!1,itemsDays:[],json_fields:{Date:"days",CA:"turnover"},json_fields_dom:{Domaine:"category",CA:"turnover"},loadingStockAvailable:{list:!1,refresh:!1,filter:!1},total:0,labelsShape:[],valuesShape:[],labelsCategory:[],valuesCategory:[],chartOptions:{}}},mounted:function(){this.getItems(),this.getItemsProducts()},components:{},created:function(){this.setHeaders()},watch:{searchAvailable:function(t){var e=this;if(null!==t){var a={name:t},s=this;this.isLoadingAvailable=!0,this.$store.dispatch("request",{url:s.urlProductPlus,params:a}).then((function(t){s.itemsProductAvailable=t.data.content})).finally((function(){return e.isLoadingAvailable=!1}))}},pagination:{handler:function(){this.getItems()},deep:!0}},computed:{},methods:{refreshItems:function(){this.stat_best_selling_products()},setHeaders:function(){this.headersStock_available=[{text:"$vuetify.product.cols.name.title",value:"name",align:"start",sortable:!0,width:"15",class:"grey--text text--darken-3"},{text:"$vuetify.product.cols.quantity.title",value:"quantity",align:"start",sortable:!0,width:"1",class:"grey--text text--darken-3"}]},getMethod:function(){return this.form.id?"PUT":"POST"},getItemsProducts:function(){var t=this,e=this;return new Promise((function(a,s){t.loading.list=!0,e.$store.dispatch("request",{url:e.urlItemsProduct}).then((function(s){var r=s.data,o=i["a"].getChart("category_chart");void 0!==o&&o.destroy(),t.labelsCategory=[],t.valuesCategory=[];var d,c=Object(n["a"])(r.content);try{for(c.s();!(d=c.n()).done;){var u=d.value;t.labelsCategory.push(u.type),t.valuesCategory.push(u.total)}}catch(h){c.e(h)}finally{c.f()}new i["a"](document.getElementById("category_chart"),{type:"doughnut",plugins:[l["a"]],options:{plugins:{legend:{display:!0,position:"right",labels:{boxWidth:12}},tooltip:{callbacks:{label:function(t){return"".concat(t.label,": ").concat(t.raw)}}}}},data:{labels:t.labelsCategory,datasets:[{label:"Total",backgroundColor:["#3a90cd","#add8e6","#848482","#b38b6d","#ffd1dc","#fc8eac","#fffe7a"],borderColor:["#E9EEF4"],data:t.valuesCategory,borderWidth:3}]}}),e.meta={totalElements:r.totalElements},a(s)})).catch((function(a){var r=t.$vuetify.lang.t("$vuetify.error_occured");if(a.response)if(400===a.response.status){var n=a.response.data;e.setFormErrors(n);var i=Object.keys(n)[0];i&&Array.isArray(n[i])&&(r=n[i][0])}else 403===a.response.status?r=e.$vuetify.lang.t("$vuetify.error_denied"):500===a.response.status&&(r=e.$vuetify.lang.t("$vuetify.error_server"));e.$store.dispatch("showNotification",{status:!0,text:r}),s(a)})).then((function(){e.loading.list=!1,a()}))}))},getDataForm:function(){var t={start_date_month:this.form.start_date_month,end_date_month:this.form.end_date_month,date_month:this.form.date_month,start_date_dom:this.form.start_date_cat,product_available:this.form.productAvailable,start_date_best_selling:this.form.start_date_best_selling,end_date_best_selling:this.form.end_date_best_selling,end_date_dom:this.form.end_date_cat};return t},export_month_day:function(){var t=this,e={type:"pdf"};this._.isEmpty(this._search)||(this._search=this._.merge(e,this._search)),t.$store.dispatch("request",{url:t.urlItemsDays,params:e,data:t.getDataForm(),method:t.getMethod(),responseType:"blob"}).then((function(t){var e="Statistiques mensuel",a=new Blob([t.data],{type:t.data.type});u.saveAs(a,e)})),this.$store.dispatch("showNotification",{statut:!1})},export_image_month_day:function(){var t=document.getElementById("day_chart").toDataURL("image/png"),e=document.createElement("a");e.download="image",e.href=t,e.click()}}},f=h,m=(a("1fad"),a("2877")),_=a("6544"),v=a.n(_),p=a("b0af"),g=a("99d9"),y=a("62ad"),b=a("a523"),C=a("8fea"),x=a("ce87"),w=a("132d"),k=a("0fd9"),$=Object(m["a"])(f,s,r,!1,null,"59d1dce8",null);e["default"]=$.exports;v()($,{VCard:p["a"],VCardText:g["b"],VCardTitle:g["c"],VCol:y["a"],VContainer:b["a"],VDataTable:C["a"],VHover:x["a"],VIcon:w["a"],VRow:k["a"]})},b259:function(t,e,a){}}]);
//# sourceMappingURL=chunk-15cdc8a0.e54bba78.js.map