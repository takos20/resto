(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4efd399c"],{"07d0":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{persistent:"","max-width":"680px",transition:"dialog-bottom-transition"},model:{value:t.dialog.show,callback:function(e){t.$set(t.dialog,"show",e)},expression:"dialog.show"}},[i("v-scale-transition",[t.dialog.show?i("v-card",{staticClass:"dialog-card"},[i("v-card-title",{staticClass:"d-flex align-center pb-2"},[i("v-icon",{staticClass:"mr-2",attrs:{color:"red"}},[t._v("mdi-alert-circle")]),i("span",{staticClass:"title font-weight-bold"},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.delete.confirm"))+" ")])],1),i("v-divider"),i("v-card-text",{staticClass:"pt-4"},[i("div",{staticClass:"d-flex align-center"},[i("v-icon",{staticClass:"mr-3",attrs:{color:"red",size:"32"}},[t._v(" mdi-delete-alert ")]),i("h4",{staticClass:"red--text font-weight-medium mb-0"},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.delete.bill"))+" ")])],1)]),i("v-divider"),i("v-form",{on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[i("v-card-text",[i("v-container",[i("v-row",{attrs:{wrap:""}},[i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"6"}},[i("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.users.cols.username.title")+" : "+this.get_username,"prepend-inner-icon":"mdi-account-outline mdi-dark mdi-18px",outlined:"",dense:""},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"6"}},[i("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.users.cols.password.title"),"prepend-inner-icon":"mdi-shield-account-outline mdi-dark mdi-18px","error-messages":t.passwordErrors,type:"password",outlined:"",dense:""},on:{blur:function(e){return t.$v.form.password.$touch()},input:function(e){return t.$v.form.password.$touch()}},scopedSlots:t._u([{key:"label",fn:function(){return[i("span",{staticClass:"red--text"},[i("strong",[t._v("* ")])]),t._v(t._s(t.$vuetify.lang.t("$vuetify.users.cols.password.title"))+" ")]},proxy:!0}],null,!1,2932136091),model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1)],1)],1),i("v-divider",{staticClass:"mx-4",staticStyle:{"margin-top":"-25px"}}),i("v-card-actions",[i("v-spacer"),i("v-btn",{staticClass:"dialog-btn",on:{click:function(e){t.dialog.show=!1}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.no"))+" ")]),i("v-btn",{staticClass:"dialog-btn",attrs:{color:"primary",loading:t.loading,dark:"",type:"submit"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.yes"))+" ")])],1)],1)],1):t._e()],1)],1)},s=[],o=i("5ed4"),n=i("b5ae"),r={mixins:[o["a"]],props:{dialog:{type:Object,default:function(){return{show:!1}}},messages:{type:Object,default:function(){return{success:""}}},form:{type:Object,default:function(){return{id:null,username:null,password:null}}}},data:function(){return{loading:!1,dialogForm:{show:!1,shows:{showFilter:!1,showInfo:!1}}}},watch:{},created:function(){},validations:function(){var t={form:{password:{required:n["required"]}}};return t},methods:{getDataForm:function(){var t={username:this.form.username?this.form.username:this.get_username,password:this.form.password};return t},save:function(){this.$store.dispatch("showNotification",{statut:!1});var t=this;t.$v.$touch(),t.$v.$invalid||(this.loading=!0,this.$store.dispatch("request",{url:t.urlItems,method:"DELETE",data:t.getDataForm()}).then((function(){t.$store.dispatch("showNotification",{statut:!0,text:t.$vuetify.lang.t(t.messages.success)}),t.$emit("getItems"),t.dialog.show=!1})).catch((function(e){console.log("erreur delete",e),t.$store.dispatch("showNotification",{statut:!0,text:t.$vuetify.lang.t("$vuetify.deletedErrors")})})).then((function(){t.loading=!1})))},setForm:function(t){this.form.id=t.id,this.form.username=t.username}},computed:{get_username:function(){var t=this.$auth.user().username;return t},usernameErrors:function(){var t=[];return this.$v.form.username.$dirty?(!this.$v.form.username.required&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.username.required")),!this.$v.form.username.minLength&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.username.minLength",this.$v.form.username.$params.minLength.min)),!this.$v.form.username.maxLength&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.username.maxLength",this.$v.form.username.$params.maxLength.max)),t):t},passwordErrors:function(){var t=[];return this.$v.form.password.$dirty?(!this.$v.form.password.required&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.password.required")),t):t}},components:{}},l=r,u=(i("967a"),i("2877")),c=i("6544"),d=i.n(c),m=i("8336"),h=i("b0af"),f=i("99d9"),p=i("62ad"),_=i("a523"),v=i("169a"),y=i("ce7e"),g=i("4bd4"),b=i("132d"),D=i("0fd9"),$=i("0789"),w=i("2fa4"),x=i("8654"),k=Object(u["a"])(l,a,s,!1,null,"283deb16",null);e["a"]=k.exports;d()(k,{VBtn:m["a"],VCard:h["a"],VCardActions:f["a"],VCardText:f["b"],VCardTitle:f["c"],VCol:p["a"],VContainer:_["a"],VDialog:v["a"],VDivider:y["a"],VForm:g["a"],VIcon:b["a"],VRow:D["a"],VScaleTransition:$["e"],VSpacer:w["a"],VTextField:x["a"]})},"4c68":function(t,e,i){},6535:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"title mb-5 black--text lighten-5 text-center",staticStyle:{height:"30px","margin-top":"30px","background-color":"#e9eef4"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.proforma.list.title"))+" ")]),i("user",{attrs:{color:"black"}})],1)},s=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-card",{staticClass:"pb-4"},[i("div",{staticClass:"mt-5 mx-5"},[t._.includes(this.$auth.user().permissions,"add_proforma")?[i("v-btn",{staticClass:"mr-2 my-2",attrs:{color:"primary",dark:""},on:{click:function(e){return t.create()}}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-content-paste")]),t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.add"))+" ")],1)]:t._e(),i("v-btn",{staticClass:"mr-2 my-2",attrs:{loading:t.loading.refresh,depressed:"",color:"#f1f5fc"},on:{click:function(e){return t.refreshItems()}}},[i("v-icon",{attrs:{left:"",color:"primary"}},[t._v("mdi-refresh")]),t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.refresh"))+" ")],1),i("v-spacer")],2)]),i("v-card",[i("v-data-table",{staticClass:"mt-5",attrs:{"footer-props":{"items-per-page-options":t.itemPerPageOptions},headers:t.headers,items:t.items,"items-per-page":t.itemPerPage,loading:t.loading.list,options:t.pagination,"server-items-length":t.meta.totalElements,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"item-key":"name"},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"header.bill_N",fn:function(e){var a=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.arrival_date",fn:function(e){var a=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.date_bill",fn:function(e){var a=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.patient_name",fn:function(e){var a=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.net_payable",fn:function(e){var a=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.is_proforma_valid",fn:function(e){var a=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.null",fn:function(e){var a=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"body",fn:function(e){var a=e.items;return[i("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var s=e.hover;return i("tbody",{},t._l(a,(function(e){return i("tr",{key:e.id},[i("td",{staticClass:"subtitle-2"},[t._v(t._s(e.code))]),i("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(t.$moment(e.createdAt).format("YYYY-MM-DD"))+" "+t._s(e.timeAt)+" ")]),i("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.patient.name)+" ")]),i("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.bills_amount)+" ")]),i("td",[i("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var s=a.on;return[e.is_proforma_valid?[i("v-icon",t._g({staticClass:"pointer",attrs:{color:"primary",dark:""},on:{click:function(i){return t.enabled(e)}}},s),[t._v(" mdi-check-circle ")])]:[i("v-icon",t._g({staticClass:"pointer",attrs:{color:"red accent-4",dark:""},on:{click:function(i){return t.enabled(e)}}},s),[t._v(" mdi-close-circle ")])]]}}],null,!0)},[e.is_proforma_valid?i("span",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.bills.cols.is_proforma_valid.failed"))+" ")]):i("span",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.bills.cols.is_proforma_valid.validate"))+" ")])])],1),i("td",{staticClass:"subtitle-2"},[[i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([t._.includes(t.$auth.user().permissions,"change_proforma")?{key:"activator",fn:function(a){var o=a.on;return[i("v-btn",t._g({directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.smAndDown||s,expression:"$vuetify.breakpoint.smAndDown || hover"}],attrs:{color:"secondary",icon:"",text:""},on:{click:function(i){return t.editBills(e)}}},o),[i("v-icon",[t._v("mdi-update")])],1)]}}:null],null,!0)},[i("span",[t._v(t._s(t.$vuetify.lang.t("$vuetify.btn.edit")))])]),i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([t._.includes(t.$auth.user().permissions,"delete_proforma")?{key:"activator",fn:function(a){var o=a.on;return[i("v-btn",t._g({directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.smAndDown||s,expression:"$vuetify.breakpoint.smAndDown || hover"}],attrs:{color:"red",icon:"",text:"",dark:""},on:{click:function(i){return t.deleteItem(e)}}},o),[i("v-icon",[t._v("mdi-delete-outline")])],1)]}}:null],null,!0)},[i("span",[t._v(t._s(t.$vuetify.lang.t("$vuetify.btn.remove")))])])]],2)])})),0)}}],null,!0)})]}}])}),i("form-bills",{ref:"proformaForm",attrs:{dialog:t.dialogForm,form:t.form,messages:t.messages},on:{getItems:t.getItems}}),i("delete-item",{attrs:{dialog:t.dialogDelete,messages:t.messagesDelete,urlItems:t.urlDeleteItems},on:{getItems:t.getItems}}),i("form-cash",{ref:"cashForm",attrs:{dialog:t.dialogFormCash,messages:t.messages},on:{getItems:t.getOpenCash}}),i("form-inv",{ref:"invForm",attrs:{dialog:t.dialogFormInv}}),i("form-enable",{ref:"validateProforma",attrs:{dialog:t.dialogFormProforma,messages:t.messages},on:{getItems:t.getItems}})],1)],1)},n=[],r=(i("4de4"),i("b0c0"),i("b64b"),i("d3b7"),i("24a2")),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{"max-width":"300"},model:{value:t.dialog.shows.showInfo,callback:function(e){t.$set(t.dialog.shows,"showInfo",e)},expression:"dialog.shows.showInfo"}},[i("v-card",[i("v-card-text",[i("div",{staticClass:"body-1 font-weight-bold"},[i("br"),i("h3",[t._v(" "+t._s(t.$vuetify.lang.t(t.messages.title))+" ")])])]),i("v-divider"),i("v-card-actions",[i("v-spacer"),i("v-btn",{on:{click:function(e){t.dialog.shows.showInfo=!1}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.close"))+" ")]),i("v-btn",{attrs:{color:"#0984e3",loading:t.loading,dark:"",type:"submit"},on:{click:t.send}},[t._v(" "+t._s(t.$vuetify.lang.t(t.messages.submit))+" ")])],1)],1)],1)},u=[],c=i("5ed4"),d={mixins:[c["a"]],name:"Infos",props:{dialog:{type:Object,default:function(){return{shows:{showInfo:!1}}}},form:{type:Object,default:function(){return{id:null,code_user:null,position_held:null,doctor:null,patient:null,username:null,password:null,re_password:null,role:null,is_active:!1}}}},data:function(){return{loading:!1,urlItems:"bills",itemsPatient:[],itemsDoctor:[],itemsDepot:[]}},methods:{setForm:function(t){this.form.id=t.id,this.form.bills=t.id,this.form.cash=t.cash,this.form.code=t.code,this.form.patient=t.patient["id"],this.itemsPatient.push(t.patient),this.form.doctor=t.doctor["id"],this.itemsDoctor.push(t.doctor),this.form.patient_name=t.patient["name"],this.form.patient_type=t.patient["shape"],this.form.is_accounted=t.is_accounted,this.form.is_proforma=t.is_proforma,this.form.is_proforma_valid=!t.is_proforma_valid,this.form.details_stock=t.details_stock,this.form.bank_card_number=t.bank_card_number,this.form.amount_received=t.amount_received,this.form.amount_paid=t.amount_paid,this.form.storage_depots=null===t.storage_depots?"":t.storage_depots["id"],this.itemsDepot.push(t.storage_depots),this.form.phone_number=t.phone_number,this.form.bills_date=t.createdAt,this.form.payment_method=t.payment_method,this.form.bill_type=t.bill_type,this.form.type_accommodation=t.type_accommodation,this.form.additional_info=t.additional_info,this.form.refund=t.refund,this.form.tva=t.tva},getRoute:function(){return this.form.id?this.urlItems+"/"+this.form.id:this.urlItems},send:function(){this.$store.dispatch("setNotification",{status:!1});var t=this;this.loading=!0,this.$store.dispatch("request",{url:t.getRoute(),method:"PATCH",data:t.getDataForm()}).then((function(){t.$store.dispatch("setNotification",{status:!0,message:t.$vuetify.lang.t(t.messages.success)}),t.$emit("getItems")})).catch((function(e){console.log("error",e);var i="$vuetify.error_occured";t.$store.dispatch("setNotification",{status:!0,message:t.$vuetify.lang.t(i)})})).then((function(){t.loading=!1}))}}},m=d,h=i("2877"),f=i("6544"),p=i.n(f),_=i("8336"),v=i("b0af"),y=i("99d9"),g=i("169a"),b=i("ce7e"),D=i("2fa4"),$=Object(h["a"])(m,l,u,!1,null,null,null),w=$.exports;p()($,{VBtn:_["a"],VCard:v["a"],VCardActions:y["a"],VCardText:y["b"],VDialog:g["a"],VDivider:b["a"],VSpacer:D["a"]});var x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{persistent:"","max-width":"1050px",transition:"dialog-bottom-transition"},model:{value:t.dialog.show,callback:function(e){t.$set(t.dialog,"show",e)},expression:"dialog.show"}},[i("v-toolbar",{attrs:{dark:"",color:"white",dense:"","max-width":"1050px"}},[i("div",{staticClass:"title",staticStyle:{color:"black"}},[t._v(" "+t._s(t.$vuetify.lang.t(t.messages.title))+" ")]),i("v-spacer"),i("v-btn",{attrs:{icon:"",light:""},on:{click:function(e){return t.forceRefresh()}}},[i("v-icon",[t._v("mdi-close")])],1)],1),i("div",{staticStyle:{"margin-top":"1px"}},["HOSPITAL"===this.$auth.user().type_enterprise?i("v-card",{staticStyle:{"margin-top":"1px"}},[i("br"),i("v-form",[i("v-card-text",[i("v-row",{attrs:{wrap:""}},[i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"3"}},[i("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.bills.cols.bill_N.title"),"prepend-inner-icon":"mdi-code-array mdi-dark mdi-18px",outlined:"",dense:"",filled:"",readonly:""},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"3"}},[i("v-select",{staticClass:"font-weight-bold",attrs:{color:"primary",items:t.optionBills.type_bills,label:t.$vuetify.lang.t("$vuetify.bills.cols.bill_type.title"),placeholder:t.$vuetify.lang.t("$vuetify.bills.cols.bill_type.title"),"prepend-inner-icon":"mdi-gender-male-female mdi-dark mdi-18px",outlined:"",dense:""},on:{change:function(e){return t.resetAll()}},model:{value:t.form.bill_type,callback:function(e){t.$set(t.form,"bill_type",e)},expression:"form.bill_type"}})],1),"hospitalization"===this.form.bill_type?i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"3"}},[i("v-select",{staticClass:"font-weight-bold",attrs:{color:"primary",items:t.optionType.type_accommodation,label:t.$vuetify.lang.t("$vuetify.hospitalization.cols.type_accommodation.title"),placeholder:t.$vuetify.lang.t("$vuetify.hospitalization.cols.type_accommodation.title"),"prepend-inner-icon":"mdi-gender-male-female mdi-dark mdi-18px",outlined:"",dense:""},scopedSlots:t._u([{key:"label",fn:function(){return[i("span",{staticClass:"red--text"},[i("strong",[t._v("* ")])]),t._v(t._s(t.$vuetify.lang.t("$vuetify.hospitalization.cols.type_accommodation.title"))+" ")]},proxy:!0}],null,!1,1009631459),model:{value:t.form.type_accommodation,callback:function(e){t.$set(t.form,"type_accommodation",e)},expression:"form.type_accommodation"}})],1):t._e(),i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"3"}},[i("v-autocomplete",{staticClass:"font-weight-bold",attrs:{items:t.itemsPatient,loading:t.isLoadingPatient,"search-input":t.searchPatient,color:"primary","item-text":"name","item-value":"id","return-object":"",label:t.$vuetify.lang.t("$vuetify.bills.cols.patient_name.title"),"prepend-inner-icon":"mdi-account mdi-dark mdi-18px",outlined:"",dense:"",autofocus:"",clearable:""},on:{"update:searchInput":function(e){t.searchPatient=e},"update:search-input":function(e){t.searchPatient=e}},model:{value:t.form.patient,callback:function(e){t.$set(t.form,"patient",e)},expression:"form.patient"}})],1),i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"1"}},[i("v-btn",{staticClass:"mr-8 white--text",attrs:{disabled:!t._.includes(this.$auth.user().permissions,"add_patient"),dense:"",color:"primary"},on:{click:function(e){return t.createPatient()}}},[i("v-icon",{attrs:{dark:""}},[t._v(" mdi-plus ")])],1)],1),i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"2"}},[i("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.bills.cols.code_patient.title"),"prepend-inner-icon":"mdi-code-array mdi-dark mdi-18px",outlined:"",dense:"",readonly:"",filled:""},model:{value:t.get_patient_code,callback:function(e){t.get_patient_code=e},expression:"get_patient_code"}})],1),i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"3"}},[i("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.bills.cols.patient_type.title"),"prepend-inner-icon":"mdi-shape-circle-plus mdi-dark mdi-18px",outlined:"",dense:"",readonly:"",filled:""},model:{value:t.get_patient_shape,callback:function(e){t.get_patient_shape=e},expression:"get_patient_shape"}})],1),i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"3"}},[i("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.bills.cols.patient_balance.title"),"prepend-inner-icon":"mdi-credit-card mdi-dark mdi-18px",outlined:"",dense:"",readonly:"",suffix:"FCFA"},model:{value:t.get_patient_solde,callback:function(e){t.get_patient_solde=e},expression:"get_patient_solde"}})],1),i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"4"}},[i("v-autocomplete",{staticClass:"font-weight-bold",attrs:{items:t.itemsDoctor,loading:t.isLoadingDoctor,"search-input":t.searchDoctor,color:"primary","item-text":"name","item-value":"id","return-object":"",label:t.$vuetify.lang.t("$vuetify.bills.cols.dealing_with.title"),"prepend-inner-icon":"mdi-doctor mdi-dark mdi-18px",outlined:"",dense:"",clearable:"",readonly:t.supply},on:{"update:searchInput":function(e){t.searchDoctor=e},"update:search-input":function(e){t.searchDoctor=e}},model:{value:t.form.doctor,callback:function(e){t.$set(t.form,"doctor",e)},expression:"form.doctor"}})],1),"pharmacy"===this.form.bill_type?i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"3"}},[i("v-autocomplete",{staticClass:"font-weight-bold",attrs:{items:t.itemsDepot,loading:t.isLoadingDepot,"search-input":t.searchDepot,color:"primary","item-text":"name","item-value":"id",label:t.$vuetify.lang.t("$vuetify.supplies.cols.storage_depot.title"),"prepend-inner-icon":"mdi-archive mdi-dark mdi-18px",outlined:"",dense:"",clearable:""},on:{"update:searchInput":function(e){t.searchDepot=e},"update:search-input":function(e){t.searchDepot=e}},scopedSlots:t._u([{key:"label",fn:function(){return[i("span",{staticClass:"red--text"},[i("strong",[t._v("* ")])]),t._v(t._s(t.$vuetify.lang.t("$vuetify.supplies.cols.storage_depot.title"))+" ")]},proxy:!0}],null,!1,539973407),model:{value:t.form.storage_depots,callback:function(e){t.$set(t.form,"storage_depots",e)},expression:"form.storage_depots"}})],1):t._e()],1)],1),i("v-divider",{staticClass:"mx-4",staticStyle:{"margin-top":"-15px"}})],1)],1):t._e(),"HOSPITAL"===this.$auth.user().type_enterprise?i("v-card",{staticStyle:{"margin-top":"1px"}},[i("v-form",{attrs:{disabled:null===t.form.patient||null===t.form.doctor},on:{submit:function(e){return e.preventDefault(),t.saveDetails.apply(null,arguments)}}},[i("br"),i("v-card-text",[i("v-row",{attrs:{wrap:""}},["pharmacy"===this.form.bill_type||"ordinance"===this.form.bill_type?i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"4"}},[i("v-autocomplete",{staticClass:"font-weight-bold",attrs:{items:t.itemsProduct,loading:t.isLoading,"search-input":t.search,color:"primary","item-text":"product_name","item-value":"id","return-object":"",label:t.$vuetify.lang.t("$vuetify.supplies.cols.product_name.title"),outlined:"",dense:"",clearable:""},on:{"update:searchInput":function(e){t.search=e},"update:search-input":function(e){t.search=e}},model:{value:t.formData.details_stock,callback:function(e){t.$set(t.formData,"details_stock",e)},expression:"formData.details_stock"}})],1):t._e(),"RETAIL"===this.$auth.user().type_enterprise?i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"4"}},[i("v-autocomplete",{staticClass:"font-weight-bold",attrs:{items:t.itemsProduct,loading:t.isLoading,"search-input":t.search,color:"primary","item-text":"product_name","item-value":"id","return-object":"",label:t.$vuetify.lang.t("$vuetify.supplies.cols.product_name.title"),outlined:"",dense:"",clearable:""},on:{"update:searchInput":function(e){t.search=e},"update:search-input":function(e){t.search=e}},model:{value:t.formData.details_stock,callback:function(e){t.$set(t.formData,"details_stock",e)},expression:"formData.details_stock"}})],1):t._e(),"medical_act"===this.form.bill_type?i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"4"}},[i("v-autocomplete",{staticClass:"font-weight-bold",attrs:{items:t.itemsMedical_act,loading:t.isLoadingMedical_act,"search-input":t.searchMedical_act,color:"primary","item-text":"name","item-value":"id","return-object":"",label:t.$vuetify.lang.t("$vuetify.bills.cols.medical_act.title"),outlined:"",dense:"",clearable:""},on:{"update:searchInput":function(e){t.searchMedical_act=e},"update:search-input":function(e){t.searchMedical_act=e}},model:{value:t.formData.medical_act,callback:function(e){t.$set(t.formData,"medical_act",e)},expression:"formData.medical_act"}})],1):t._e(),"consultation"===this.form.bill_type?i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"4"}},[i("v-autocomplete",{staticClass:"font-weight-bold",attrs:{dense:"",items:t.itemsType_consultation,loading:t.isLoadingType_consultation,"search-input":t.searchType_consultation,color:"primary",label:t.$vuetify.lang.t("$vuetify.bills.new.select_service"),"item-text":"title","item-value":"id","return-object":"","hide-no-data":"",clearable:"",outlined:"",autofocus:""},on:{"update:searchInput":function(e){t.searchType_consultation=e},"update:search-input":function(e){t.searchType_consultation=e}},model:{value:t.formData.type_consultation,callback:function(e){t.$set(t.formData,"type_consultation",e)},expression:"formData.type_consultation"}})],1):t._e(),"consultation"===this.form.bill_type&&this.get_product_code.startsWith("TEC")?i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"4"}},[i("v-select",{staticClass:"font-weight-bold",attrs:{color:"primary",items:t.optionTypeConsult.type_consultation,label:t.$vuetify.lang.t("$vuetify.consultation.cols.type_consultation.title"),placeholder:t.$vuetify.lang.t("$vuetify.consultation.cols.type_consultation.title"),"prepend-inner-icon":"mdi-gender-male-female mdi-dark mdi-18px",outlined:"",dense:""},scopedSlots:t._u([{key:"label",fn:function(){return[i("span",{staticClass:"red--text"},[i("strong",[t._v("* ")])]),t._v(t._s(t.$vuetify.lang.t("$vuetify.consultation.cols.type_consultation.title"))+" ")]},proxy:!0}],null,!1,3706617537),model:{value:t.formData.type_consult,callback:function(e){t.$set(t.formData,"type_consult",e)},expression:"formData.type_consult"}})],1):t._e(),"consultation"===this.form.bill_type&&this.get_product_code.startsWith("TEC")?i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"4"}},[i("v-select",{staticClass:"font-weight-bold",attrs:{color:"primary",items:t.optionTypeEmergency.type_emergency,label:t.$vuetify.lang.t("$vuetify.consultation.cols.type_emergency.title"),placeholder:t.$vuetify.lang.t("$vuetify.consultation.cols.type_emergency.title"),"prepend-inner-icon":"mdi-gender-male-female mdi-dark mdi-18px",outlined:"",dense:""},model:{value:t.formData.type_emergency,callback:function(e){t.$set(t.formData,"type_emergency",e)},expression:"formData.type_emergency"}})],1):t._e(),"hospitalization"===this.form.bill_type?i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"4"}},[i("v-autocomplete",{staticClass:"font-weight-bold",attrs:{items:t.itemsRoom,loading:t.isLoadingRoom,"search-input":t.searchRoom,color:"primary","return-object":"","item-text":"name","item-value":"id",label:t.$vuetify.lang.t("$vuetify.room.title"),"prepend-inner-icon":"mdi-account mdi-dark mdi-18px",outlined:"",dense:"",clearable:""},on:{"update:searchInput":function(e){t.searchRoom=e},"update:search-input":function(e){t.searchRoom=e}},scopedSlots:t._u([{key:"label",fn:function(){return[i("span",{staticClass:"red--text"},[i("strong",[t._v("* ")])]),t._v(t._s(t.$vuetify.lang.t("$vuetify.room.title"))+" ")]},proxy:!0}],null,!1,1291490314),model:{value:t.formData.room,callback:function(e){t.$set(t.formData,"room",e)},expression:"formData.room"}})],1):t._e(),"hospitalization"===this.form.bill_type?i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"3"}},[i("v-select",{staticClass:"font-weight-bold",attrs:{color:"primary",items:t.optionNumberBed.number_bed,clearable:"",label:t.$vuetify.lang.t("$vuetify.hospitalization.cols.number_bed.title"),placeholder:t.$vuetify.lang.t("$vuetify.hospitalization.cols.number_bed.title"),"prepend-inner-icon":"mdi-gender-male-female mdi-dark mdi-18px",outlined:"",dense:""},on:{change:function(e){return t.get_price_patient()}},model:{value:t.formData.number_bed,callback:function(e){t.$set(t.formData,"number_bed",e)},expression:"formData.number_bed"}})],1):t._e(),"laboratory"===this.form.bill_type?i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"4"}},[i("v-autocomplete",{staticClass:"font-weight-bold",attrs:{items:t.itemsLaboratory,loading:t.isLoadingLaboratory,"search-input":t.searchLaboratory,"item-text":"title","return-object":"",color:"primary","item-value":"id",label:t.$vuetify.lang.t("$vuetify.laboratory.title"),outlined:"",dense:"",clearable:""},on:{"update:searchInput":function(e){t.searchLaboratory=e},"update:search-input":function(e){t.searchLaboratory=e}},model:{value:t.formData.laboratory,callback:function(e){t.$set(t.formData,"laboratory",e)},expression:"formData.laboratory"}})],1):t._e(),"radiography"===this.form.bill_type?i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"4"}},[i("v-autocomplete",{staticClass:"font-weight-bold",attrs:{items:t.itemsRadiography,loading:t.isLoadingRadiography,"search-input":t.searchRadiography,color:"primary","item-text":"title","return-object":"","item-value":"id",label:t.$vuetify.lang.t("$vuetify.radiography.title"),outlined:"",clearable:"",dense:""},on:{"update:searchInput":function(e){t.searchRadiography=e},"update:search-input":function(e){t.searchRadiography=e}},model:{value:t.formData.radiography,callback:function(e){t.$set(t.formData,"radiography",e)},expression:"formData.radiography"}})],1):t._e(),"exam_investigation"===this.form.bill_type?i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"4"}},[i("v-autocomplete",{staticClass:"font-weight-bold",attrs:{items:t.itemsExam_investigation,loading:t.isLoadingExam_investigation,"search-input":t.searchExam_investigation,color:"primary","item-text":"title","return-object":"","item-value":"id",label:t.$vuetify.lang.t("$vuetify.exam_investigation.title"),outlined:"",clearable:"",dense:""},on:{"update:searchInput":function(e){t.searchExam_investigation=e},"update:search-input":function(e){t.searchExam_investigation=e}},model:{value:t.formData.exam_investigation,callback:function(e){t.$set(t.formData,"exam_investigation",e)},expression:"formData.exam_investigation"}})],1):t._e(),"diagnostic"===this.form.bill_type?i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"4"}},[i("v-autocomplete",{staticClass:"font-weight-bold",attrs:{items:t.itemsDiagnostic,loading:t.isLoadingDiagnostic,"search-input":t.searchDiagnostic,color:"primary","item-text":"title","return-object":"","item-value":"id",label:t.$vuetify.lang.t("$vuetify.diagnostic.title"),outlined:"",clearable:"",dense:""},on:{"update:searchInput":function(e){t.searchDiagnostic=e},"update:search-input":function(e){t.searchDiagnostic=e}},model:{value:t.formData.diagnostic,callback:function(e){t.$set(t.formData,"diagnostic",e)},expression:"formData.diagnostic"}})],1):t._e(),"surgery"===this.form.bill_type?i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"4"}},[i("v-autocomplete",{staticClass:"font-weight-bold",attrs:{items:t.itemsSurgery,loading:t.isLoadingSurgery,"search-input":t.searchSurgery,color:"primary","item-text":"title","return-object":"","item-value":"id",label:t.$vuetify.lang.t("$vuetify.surgery.title"),outlined:"",clearable:"",dense:""},on:{"update:searchInput":function(e){t.searchSurgery=e},"update:search-input":function(e){t.searchSurgery=e}},model:{value:t.formData.surgery,callback:function(e){t.$set(t.formData,"surgery",e)},expression:"formData.surgery"}})],1):t._e(),"checkup"===this.form.bill_type?i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"4"}},[i("v-autocomplete",{staticClass:"font-weight-bold",attrs:{items:t.itemsCheckup,loading:t.isLoadingCheckup,"search-input":t.searchCheckup,color:"primary","return-object":"","item-text":"title","item-value":"id",label:t.$vuetify.lang.t("$vuetify.checkup.title"),outlined:"",clearable:"",dense:""},on:{"update:searchInput":function(e){t.searchCheckup=e},"update:search-input":function(e){t.searchCheckup=e}},model:{value:t.formData.checkup,callback:function(e){t.$set(t.formData,"checkup",e)},expression:"formData.checkup"}})],1):t._e(),i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"2"}},[i("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.supplies.cols.product_code.title"),outlined:"",dense:"",value:t.get_product_code,readonly:"",filled:""}})],1),i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"2"}},[i("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.bills.cols.quantity_served.title"),outlined:"",dense:"",type:"number",rules:[t.numberRuleQteServed],min:"0"},model:{value:t.formData.quantity_served,callback:function(e){t.$set(t.formData,"quantity_served",e)},expression:"formData.quantity_served"}})],1),i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"2"}},[i("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.bills.cols.pub.title")+" : "+this.get_price_patient,outlined:"",dense:""},model:{value:t.formData.unit_price,callback:function(e){t.$set(t.formData,"unit_price",e)},expression:"formData.unit_price"}})],1),i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"2"}},[i("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.bills.cols.amount_gross.title"),outlined:"",value:t.get_amount_gross,dense:"",readonly:"",filled:""}})],1),i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"2"}},[i("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.bills.cols.delivery.title"),outlined:"",type:"number",min:"0",rules:[t.numberRuleDelivery],dense:""},model:{value:t.formData.delivery,callback:function(e){t.$set(t.formData,"delivery",e)},expression:"formData.delivery"}})],1),i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"2"}},[i("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.bills.cols.pun.title"),outlined:"",dense:"",readonly:"",filled:"",value:t.get_pu_net}})],1),i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"2"}},[i("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.bills.cols.amount_net.title"),outlined:"",value:t.get_amount_net,dense:"",readonly:"",filled:""}})],1),!0===t.get_assured?i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"2"}},[i("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.insurance.title"),outlined:"",value:t.get_insurance,readonly:"",filled:"",dense:""}})],1):t._e(),!0===t.get_assured?i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"2"}},[i("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.insurance.title_patient"),outlined:"",value:t.get_insurance_patient,readonly:"",filled:"",dense:""}})],1):t._e(),i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"1"}},[i("v-btn",{staticClass:"font-weight-bold ml-5 white--text",attrs:{light:"",color:"primary",loading:t.loadingBtn,disabled:null===this.formData.quantity_served||0===this.get_price_patient,type:"submit"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.bills.new.add_product"))+" ")])],1)],1)],1),i("v-divider",{staticClass:"mx-4",staticStyle:{"margin-top":"-15px"}})],1)],1):t._e(),"HOSPITAL"===this.$auth.user().type_enterprise?i("v-card",{staticStyle:{"background-color":"#e9eef4","margin-top":"1px"},attrs:{color:"#E9EEF4"}},[i("v-form",{attrs:{disabled:null===t.form.patient||null===t.form.bill_type}},[i("v-card-text",[i("v-row",{attrs:{wrap:""}},[i("v-col",{staticClass:"mb-0 py-0",staticStyle:{"margin-top":"15px"},attrs:{cols:"12",sm:"3"}},[i("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.bills.cols.net_payable.title"),outlined:"",value:t.get_bills_amount,readonly:"",filled:"",dense:""}})],1),i("v-col",{staticClass:"mb-0 py-0",staticStyle:{"margin-top":"15px"},attrs:{cols:"12",sm:"3"}},[i("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.bills.cols.ttc.title"),outlined:"",value:t.get_bills_ttc,readonly:"",filled:"",dense:""}})],1),i("v-col",{staticClass:"mb-0 py-0",staticStyle:{"margin-top":"15px"},attrs:{cols:"12",sm:"3"}},[i("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.insurance.title"),outlined:"",value:t.get_insurance_total,readonly:"",filled:"",dense:""}})],1),i("v-col",{staticClass:"mb-0 py-0",staticStyle:{"margin-top":"15px"},attrs:{cols:"12",sm:"3"}},[i("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.insurance.title_patient"),outlined:"",value:t.get_insurance_patient_total,readonly:"",filled:"",dense:""}})],1)],1)],1),i("v-card-actions",{staticStyle:{"margin-top":"-25px"}},[i("v-spacer"),i("v-btn",{staticClass:"white--text",attrs:{color:"primary",loading:t.loadingBtn,disabled:0==this.get_bills_amount},on:{click:function(e){return t.proforma()}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.bills.new.proforma"))+" ")]),i("v-btn",{staticClass:"white--text",attrs:{color:"primary",loading:t.loadingBtn,disabled:0==this.get_bills_amount},on:{click:function(e){return t.save_print_bills()}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.bills.new.print_bills"))+" ")])],1),i("v-divider",{staticClass:"mx-4"})],1)],1):t._e(),i("v-card",{staticStyle:{"margin-top":"1px"}},[i("v-card-text",[i("v-data-table",{staticClass:"mt-5",attrs:{"footer-props":{"items-per-page-options":t.itemPerPageOptions},headers:t.headers,items:t.items,"items-per-page":t.itemPerPage,loading:t.loadingDetails.list,options:t.pagination,"server-items-length":t.meta.totalElements,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"item-key":"name","hide-default-footer":""},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"header.product_name",fn:function(e){var a=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.product_code",fn:function(e){var a=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.quantity_served",fn:function(e){var a=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.pun",fn:function(e){var a=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.delivery",fn:function(e){var a=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.amount_net",fn:function(e){var a=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.insurance",fn:function(e){var a=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.insurance_patient",fn:function(e){var a=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.null",fn:function(e){var a=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"body",fn:function(e){var a=e.items;return[i("tbody",t._l(a,(function(e){return i("tr",{key:e.id},[i("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.details_stock?e.details_stock.product.name:e.medical_act?e.medical_act.title:e.laboratory?e.laboratory.title:e.checkup?e.checkup.title:e.surgery?e.surgery.title:e.radiography?e.radiography.title:e.functional_exploration?e.functional_exploration.title:e.type_consultation?e.type_consultation.title:e.diagnostic?e.diagnostic.title:e.exam_investigation?e.exam_investigation.title:e.room?e.room.name:"-")+" ")]),i("td",{staticClass:"subtitle-2"},[t.editedRowId===e.id?i("div",[i("v-text-field",{staticStyle:{"max-width":"80px"},attrs:{dense:"","hide-details":"",type:"number"},model:{value:t.editedRow.quantity_served,callback:function(e){t.$set(t.editedRow,"quantity_served",e)},expression:"editedRow.quantity_served"}})],1):i("div",[t._v(" "+t._s(e.quantity_served)+" ")])]),i("td",{staticClass:"subtitle-2"},[t.editedRowId===e.id?i("div",[i("v-text-field",{staticStyle:{"max-width":"100px"},attrs:{value:t.calculatedPuNet,dense:"","hide-details":"",type:"number"}})],1):i("div",[t._v(" "+t._s(e.pun)+" ")])]),i("td",{staticClass:"subtitle-2"},[t.editedRowId===e.id?i("div",[i("v-text-field",{attrs:{value:t.calculatedAmountNet,readonly:"",dense:"","hide-details":""}})],1):i("div",[t._v(" "+t._s(e.amount_net)+" ")])]),i("td",{staticClass:"subtitle-2"},[t.editedRowId===e.id?i("div",[i("v-text-field",{attrs:{dense:"",readonly:"","hide-details":""},model:{value:t.editedRow.insurance,callback:function(e){t.$set(t.editedRow,"insurance",e)},expression:"editedRow.insurance"}})],1):i("div",[t._v(" "+t._s(e.insurance)+" ")])]),i("td",{staticClass:"subtitle-2"},[t.editedRowId===e.id?i("div",[i("v-text-field",{attrs:{dense:"",readonly:"","hide-details":""},model:{value:t.editedRow.insurance_patient,callback:function(e){t.$set(t.editedRow,"insurance_patient",e)},expression:"editedRow.insurance_patient"}})],1):i("div",[t._v(" "+t._s(e.insurance_patient)+" ")])]),i("td",{staticClass:"subtitle-2"},[t.editedRowId===e.id?[i("v-btn",{attrs:{icon:"",color:"green"},on:{click:t.saveRowEdit}},[i("v-icon",[t._v("mdi-content-save")])],1),i("v-btn",{attrs:{icon:"",color:"grey"},on:{click:t.cancelRowEdit}},[i("v-icon",[t._v("mdi-cancel")])],1)]:[i("v-btn",{attrs:{icon:"",color:"secondary"},on:{click:function(i){return t.editDetails(e)}}},[i("v-icon",[t._v("mdi-update")])],1),i("v-btn",{attrs:{icon:"",color:"red"},on:{click:function(i){return t.deleteItem(e)}}},[i("v-icon",[t._v("mdi-delete-outline")])],1)]],2)])})),0)]}}])}),i("delete-item",{attrs:{dialog:t.dialogDelete,messages:t.messagesDelete,urlItems:t.urlDeleteItems},on:{getItemsDetails:t.getItemsDetails}})],1)],1),i("form-cmv",{attrs:{dialog:t.dialogFormCMV,messages:t.messages}}),i("form-warning",{ref:"warningForm",attrs:{dialog:t.dialogFormWarning},on:{resetFormPro:t.resetFormPro}}),i("permit-other",{ref:"permitOthers",attrs:{dialog:t.dialogFormPermit,messages:t.messages}}),i("form-cash",{ref:"cashForm",attrs:{dialog:t.dialogFormCash,messages:t.messages},on:{getItems:t.getOpenCash}}),i("form-inv",{ref:"invForm",attrs:{dialog:t.dialogFormInv}}),i("form-patient",{attrs:{dialog:t.dialogForm,messages:t.messages}}),i("form-settlement",{attrs:{dialog:t.dialogFormSet,messages:t.messagesSet}}),i("form-insurance",{attrs:{dialog:t.dialogFormIns,messages:t.messages}}),i("form-pdf",{ref:"pdfForm",attrs:{dialog:t.dialogFormPdf}})],1)],1)},k=[],C=(i("7db0"),i("c740"),i("4160"),i("caad"),i("a434"),i("3ca3"),i("2ca0"),i("159b"),i("ddb0"),i("2b3d"),i("5530")),I=i("53ca"),R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{"max-width":"400"},model:{value:t.dialog.shows.showInfo,callback:function(e){t.$set(t.dialog.shows,"showInfo",e)},expression:"dialog.shows.showInfo"}},[i("v-card",[i("v-card-text",[i("div",{staticClass:"body-1 font-weight-bold"},[i("br"),i("h3",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.users.cols.re_password.title"))+" ")])])]),i("v-divider",{staticClass:"mx-4"}),i("v-card-text",{staticClass:"my-3"},[i("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.users.cols.password.title"),"prepend-inner-icon":"mdi-shield-account mdi-dark mdi-18px",type:"password",outlined:"",dense:""},on:{blur:function(e){return t.$v.form.password.$touch()},input:function(e){return t.$v.form.password.$touch()}},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),i("v-divider",{staticClass:"mx-4",staticStyle:{"margin-top":"-45px"}}),i("v-card-actions",[i("v-spacer"),i("v-btn",{on:{click:function(e){t.dialog.shows.showInfo=!1}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.close"))+" ")]),i("v-btn",{attrs:{color:"#0984e3",loading:t.loading,dark:"",type:"submit",disabled:null===t.form.cashier||null===t.form.open_date||null===t.form.code||null===t.form.password},on:{click:t.send}},[t._v(" "+t._s(t.$vuetify.lang.t(t.messages.submit))+" ")])],1)],1)],1)},F=[],P={mixins:[c["a"]],name:"Infos",props:{dialog:{type:Object,default:function(){return{shows:{showInfo:!1}}}},form:{type:Object,default:function(){return{id:null,code:null,cashier:null,password:null,cash_fund:null,open_date:null,close_date:null,is_active:!1}}}},data:function(){return{loading:!1,urlItems:"cashs/close"}},methods:{getDataForm:function(){var t={id:this.form.id,password:this.form.password,cash_fund:this.form.cash_fund,close_date:this.$moment().format("YYYY-MM-DD HH:mm:ss"),cashier:this.form.cashier,is_active:!1};return t},setForm:function(t){this.form.id=t.id,this.form.code=t.code,this.form.cash_fund=t.cash_fund,this.form.cashier=t.user["username"],this.form.open_date=t.open_date,this.form.close_date=this.$moment().format("YYYY-MM-DD HH:mm:ss"),this.form.is_active=t.is_active},getRoute:function(){return this.form.id?this.urlItems+"/"+this.form.id:this.urlItems},send:function(){this.$store.dispatch("showNotification",{status:!1});var t=this;this.loading=!0,this.$store.dispatch("request",{url:t.getRoute(),method:"POST",data:t.getDataForm()}).then((function(){t.$store.dispatch("showNotification",{status:!0,message:t.$vuetify.lang.t(t.messages.success)}),t.dialog.shows.showInfo=!1,t.$emit("getItems")})).catch((function(e){console.log("error",e);var i="$vuetify.error_occured";t.$store.dispatch("showNotification",{status:!0,message:t.$vuetify.lang.t(i)})})).then((function(){t.loading=!1}))}}},q=P,L=i("8654"),O=Object(h["a"])(q,R,F,!1,null,null,null),S=O.exports;p()(O,{VBtn:_["a"],VCard:v["a"],VCardActions:y["a"],VCardText:y["b"],VDialog:g["a"],VDivider:b["a"],VSpacer:D["a"],VTextField:L["a"]});var E=i("7cf5"),T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{"max-width":"300"},model:{value:t.dialog.show,callback:function(e){t.$set(t.dialog,"show",e)},expression:"dialog.show"}},[i("v-card",{attrs:{color:"#fb8c00"}},[i("v-alert",{attrs:{border:"top",type:"warning",variant:"outlined",prominent:""}},[t._v(t._s(t.$vuetify.lang.t("$vuetify.bills.insufficient_stock")))]),i("v-divider"),i("v-card-actions",{attrs:{color:"orange"}},[i("v-spacer"),i("v-btn",{on:{click:function(e){return t.closeWar()}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.close"))+" ")])],1)],1)],1)},A=[],V={mixins:[c["a"]],name:"Infos",props:{dialog:{type:Object,default:function(){return{shows:{showInfo:!1}}}},form:{type:Object,default:function(){return{id:null,code:null}}}},data:function(){return{loading:!1,urlItems:"bills"}},methods:{closeWar:function(){this.dialog.show=!1,this.$emit("resetFormPro")},setForm:function(t){this.form.id=t.id,this.form.bills=t.id,this.form.code=t.code,this.form.storage_depots=t.storage_depots["id"],this.form.patient=t.patient["id"],this.form.doctor=t.doctor["id"],this.form.patient_type=t.patient_type,this.form.is_accounted=!t.is_accounted,this.form.details_stock=t.details_stock,this.form.cashier=this.$auth.user().id,this.form.bills_date=t.bills_date,this.form.payment_method=t.payment_method,this.form.bill_type=t.bill_type,this.form.advances=t.advances,this.form.bill_shape=t.bill_shape,this.form.additional_info=t.additional_info},getRoute:function(){return this.form.id?this.urlItems+"/"+this.form.id:this.urlItems},send:function(){this.$store.dispatch("setNotification",{status:!1});var t=this;this.loading=!0,this.$store.dispatch("request",{url:t.getRoute(),method:"PATCH",data:t.getDataForm()}).then((function(){t.$store.dispatch("setNotification",{status:!0,message:t.$vuetify.lang.t(t.messages.success)}),t.$emit("getItems")})).catch((function(e){console.log("error",e);var i="$vuetify.error_occured";t.$store.dispatch("setNotification",{status:!0,message:t.$vuetify.lang.t(i)})})).then((function(){t.loading=!1}))}}},N=V,j=i("0798"),B=Object(h["a"])(N,T,A,!1,null,null,null),M=B.exports;p()(B,{VAlert:j["a"],VBtn:_["a"],VCard:v["a"],VCardActions:y["a"],VDialog:g["a"],VDivider:b["a"],VSpacer:D["a"]});var H=i("9b88"),U=i("2725"),z=i("402c"),Y=i("9f8f"),W=i("6947"),Q=i("8980"),J={mixins:[c["a"]],props:{form:{type:Object,default:function(){return{id:null,patient:null,doctor:null,medical_act:null,patient_name:null,patient_balance:null,net_payable:null,patient_type:null,bills_date:null,pub:null,pun:null,storage_depots:null,amount_gross:null,ordinance:null,payment_method:null,quantity_ordered:null,amount_net:null,total_amount:null,quantity_served:null,details_stock:null,is_proforma_valid:null,type_accommodation:null,delivery:null,balance:null,bills:null,cash:null,tva:null,reference_no:null,phone_number:null,additional_info:"R.A.S",bills_amount:null,code:null,cashier:null,bill_type:"pharmacy",amount_received:null}}}},data:function(){return{formData:{id:null,patient:null,doctor:null,medical_act:null,type_consult:null,refund:null,diagnostic:null,exam_investigation:null,patient_name:null,patient_balance:null,sales_packaging:null,net_payable:null,type_emergency:null,type_consultation:null,patient_type:null,laboratory:null,surgery:null,checkup:null,tva:null,ordinance:null,radiography:null,functional_exploration:null,room:null,bills_date:null,pub:null,unit_price:null,pun:null,amount_gross:null,payment_method:"CASH",quantity_ordered:null,amount_net:null,total_amount:null,quantity_served:1,bank_card_number:null,details_stock:null,delivery:null,balance:null,bills:null,reference_no:null,additional_info:null,bills_amount:null,code:null,cashier:null,bill_type:null,number_bed:null,is_accounted:null,amount_paid:null,amount_received:null},editedRowId:null,editedRow:{},optionTypeConsult:{type_consultation:[]},optionTypeEmergency:{type_emergency:[]},isLoadingExam_investigation:!1,searchExam_investigation:null,itemsExam_investigation:[],urlExam_investigation:"exam_investigations/all",isLoadingDiagnostic:!1,searchDiagnostic:null,itemsDiagnostic:[],urlDiagnostic:"diagnostics/all",isLoadingRadiography:!1,searchRadiography:null,itemsRadiography:[],urlRadiography:"radiographs/all",isLoadingSurgery:!1,searchSurgery:null,itemsSurgery:[],urlSurgery:"surgeries/all",isLoadingCheckup:!1,searchCheckup:null,itemsCheckup:[],urlCheckup:"checkups/all",isLoadingOrdinance:!1,searchOrdinance:null,itemsOrdinance:[],urlOrdinance:"ordinances",isLoadingLaboratory:!1,searchLaboratory:null,itemsLaboratory:[],urlLaboratory:"laboratories/all",maxDate:(new Date).toISOString().substr(0,10),optionPayment:{type_Payment:[]},optionType:{type_accommodation:[]},pdfsrc:null,headers:[],headers_act:[],items:[],meta:{},sum:"",simple_tva:null,next_beneficiary:"",current_contribution:"",itemPerPage:30,itemPerPageOptions:[30,40,50],urlDeleteItems:"",sortDesc:!0,loading:{list:!1,refresh:!1,filter:!1},dialogFormPermit:{show:!1,shows:{showFilter:!1,showInfo:!1}},pagination:{},selectedItem:!1,_search:{},_sorts:{},dialogDelete:{show:!1},sortBy:["id"],e1:1,isLoadingDepot:!1,searchDepot:null,itemsDepot:[],urlDepot:"storage_depots",isLoading:!1,searchSales_packaging:null,itemsSales_packaging:[],urlSales_packaging:"sales_packaging",isLoadingSales_packaging:!1,search:null,urlRoom:"rooms",itemsRoom:[],isLoadingRoom:!1,searchRoom:null,numberRuleDelivery:function(t){return!(t<0)||"Entrer un nombre positif"},numberRuleQteOrdered:function(t){return!(t<0)||"Entrer un nombre positif"},numberRuleQteServed:function(t){return!(t<0)||"Entrer un nombre positif"},numberRuleamount_received:function(t){return!(t<0)||"Entrer un nombre positif"},numberRuleamount_paid:function(t){return!(t<0)||"Entrer un nombre positif"},numberRulephone_number:function(t){return!(t<0)||"Entrer un nombre positif"},numberRulebank_card_number:function(t){return!(t<0)||"Entrer un nombre positif"},searchDoctor:null,isActive:!1,pricePatient:null,isInventory:!1,menu2:!1,supply:!1,active:!1,menu3:!1,tva_collected:null,menu4:!1,menu:!1,dialogFormCMV:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogFormCash:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogFormInv:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogFormWarning:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogForm:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogFormPdf:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogFormSet:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogFormIns:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogFormDetails:{show:!1,shows:{showFilter:!1,showInfo:!1}},searchType_consultation:null,itemsType_consultation:[],isLoadingType_consultation:!1,urlType_consultation:"type_consultations/all",optionBills:{type_bills:[]},optionNumberBed:{number_bed:[]},optionShape:{type_shape:[]},optionPatient_shape:{type_Patient_shape:[]},messagesDelete:{success:"$vuetify.supplies.delete.success"},loadingBtn:!1,loadingDetails:{list:!1,refresh:!1,filter:!1},loadingPrice:{list:!1,refresh:!1,filter:!1},isLoadingMedical_act:!1,searchMedical_act:null,itemsMedical_act:[],urlMedical_act:"medical_act",itemsProduct:[],product_public_price:"",isLoadingPatient:!1,searchPatient:null,itemsPatient:[],urlPatient:"patients/allPatients",urlItemsPatientSolde:"patients/solde",urlDoctor:"doctors",itemsDoctor:[],isLoadingDoctor:!1,urlItemsCash:"cashs/isOpen",urlItemsHospital:"hospitals",urlProduct:"details_stocks/specify",urlItems:"bills",urlItemsDetails_bills:"details_bills"}},watch:{searchRoom:function(t){var e=this;if(null!==t){var i={name:t,status:"NOT_OCCUPIED"},a=this;this.isLoadingRoom=!0,this.$store.dispatch("request",{url:a.urlRoom,params:i}).then((function(t){a.itemsRoom=t.data.content})).finally((function(){return e.isLoadingRoom=!1}))}},pagination:{handler:function(){this.getItemsDetails()},deep:!0},searchDepot:function(t){var e=this;if(null!==t){var i={name:t},a=this;this.isLoadingDepot=!0,this.$store.dispatch("request",{url:a.urlDepot,params:i}).then((function(t){a.itemsDepot=t.data.content,e.itemsProduct=[],e.formData.details_stock=null})).finally((function(){return e.isLoadingDepot=!1}))}},searchDiagnostic:function(t){var e=this;if(null!==t){var i={title:t},a=this;this.isLoadingDiagnostic=!0,this.$store.dispatch("request",{url:a.urlDiagnostic,params:i}).then((function(t){a.itemsDiagnostic=t.data.content})).finally((function(){return e.isLoadingDiagnostic=!1}))}},searchRadiography:function(t){var e=this;if(null!==t){var i={title:t},a=this;this.isLoadingRadiography=!0,this.$store.dispatch("request",{url:a.urlRadiography,params:i}).then((function(t){a.itemsRadiography=t.data.content})).finally((function(){return e.isLoadingRadiography=!1}))}},searchExam_investigation:function(t){var e=this;if(null!==t){var i={title:t},a=this;this.isLoadingExam_investigation=!0,this.$store.dispatch("request",{url:a.urlExam_investigation,params:i}).then((function(t){a.itemsExam_investigation=t.data.content})).finally((function(){return e.isLoadingExam_investigation=!1}))}},searchSurgery:function(t){var e=this;if(null!==t){var i={title:t},a=this;this.isLoadingSurgery=!0,this.$store.dispatch("request",{url:a.urlSurgery,params:i}).then((function(t){a.itemsSurgery=t.data.content})).finally((function(){return e.isLoadingSurgery=!1}))}},searchType_consultation:function(t){var e=this;if(null!==t){var i={title:t},a=this;this.isLoadingType_consultation=!0,this.$store.dispatch("request",{url:a.urlType_consultation,params:i}).then((function(t){a.itemsType_consultation=t.data.content})).finally((function(){return e.isLoadingType_consultation=!1}))}},searchCheckup:function(t){var e=this;if(null!==t){var i={title:t},a=this;this.isLoadingCheckup=!0,this.$store.dispatch("request",{url:a.urlCheckup,params:i}).then((function(t){a.itemsCheckup=t.data.content})).finally((function(){return e.isLoadingCheckup=!1}))}},searchOrdinance:function(t){var e=this;if(null!==t){var i={code:t,patient:this.form.patient["id"]},a=this;this.isLoadingOrdinance=!0,this.$store.dispatch("request",{url:a.urlOrdinance,params:i}).then((function(t){a.itemsOrdinance=t.data.content})).finally((function(){return e.isLoadingOrdinance=!1}))}},searchLaboratory:function(t){var e=this;if(null!==t){var i={title:t},a=this;this.isLoadingLaboratory=!0,this.$store.dispatch("request",{url:a.urlLaboratory,params:i}).then((function(t){a.itemsLaboratory=t.data.content})).finally((function(){return e.isLoadingLaboratory=!1}))}},searchMedical_act:function(t){var e=this;if(null!==t){var i={name:t},a=this;this.isLoading=!0,this.$store.dispatch("request",{url:a.urlMedical_act,params:i}).then((function(t){a.itemsMedical_act=t.data.content})).finally((function(){return e.isLoading=!1}))}},search:function(t){var e,i=this;if(null!==t){var a={name:t},s=this;this.isLoading=!0,this.$store.dispatch("request",{url:this.form.storage_depots?s.urlProduct+"?storage_depots="+this.form.storage_depots:s.urlProduct+"?storage_depots="+(null===(e=this.$auth.user())||void 0===e?void 0:e.storage_depots.id),params:a}).then((function(t){s.itemsProduct=t.data.content,i.reset_product_detail_act()})).finally((function(){return i.isLoading=!1}))}},searchPatient:function(t){var e=this;if(null!==t){this.isLoadingPatient=!0;var i={name:t},a=this;this.$store.dispatch("request",{url:a.urlPatient,params:i}).then((function(t){a.itemsPatient=t.data.content})).finally((function(){return e.isLoadingPatient=!1}))}},searchDoctor:function(t){var e=this;if(null!==t){var i={name:t},a=this;this.isLoadingDoctor=!0,this.$store.dispatch("request",{url:a.urlDoctor,params:i}).then((function(t){a.itemsDoctor=t.data.content})).finally((function(){return e.isLoadingDoctor=!1}))}}},created:function(){this.setHeaders(),this.setHeadersAct(),this.getOptionsBill(),this.getOptionsNumberBed(),this.getOptionsShape(),this.getOptionsType(),this.getOptionsPatient_shape(),this.getOptionsTypeEmergency(),this.getOptionsTypeConsult(),this.getOptionsPayment(),this.resetItemsDetails()},validations:function(){var t={form:{}};return t},methods:{getOptionsTypeConsult:function(){var t=this;this._.each(this.$store.getters.type_consultation,(function(e){t.optionTypeConsult.type_consultation.push({text:t.$vuetify.lang.t(e.text),value:e.value})}))},getOptionsTypeEmergency:function(){var t=this;this._.each(this.$store.getters.type_emergency,(function(e){t.optionTypeEmergency.type_emergency.push({text:t.$vuetify.lang.t(e.text),value:e.value})}))},permit_other_depots:function(t){this.dialogFormPermit.shows.showInfo=!0,this.messages={title:"$vuetify.cash.cols.status.enabled",submit:"$vuetify.cash.update.submit",success:"$vuetify.cash.update.success"},this.$refs.permitOthers.setForm(t)},reset_product_detail:function(){this.formData.details_stock=null,this.formData.sales_packaging=null,this.formData.quantity_served=null,this.formData.delivery=null},reset_medical_act:function(){this.formData.details_stock=null,this.formData.sales_packaging=null,this.formData.quantity_served=null,this.formData.delivery=null,this.formData.laboratory=null,this.formData.surgery=null,this.form.type_accommodation=null,this.formData.ordinance=null,this.formData.checkup=null,this.formData.radiography=null,this.formData.number_bed=null,this.formData.room=null,this.formData.diagnostic=null,this.formData.exam_investigation=null},reset_detail_stock:function(){this.formData.medical_act=null,this.formData.sales_packaging=null,this.formData.quantity_served=null,this.formData.delivery=null,this.formData.laboratory=null,this.formData.surgery=null,this.form.type_accommodation=null,this.formData.ordinance=null,this.formData.number_bed=null,this.formData.checkup=null,this.formData.radiography=null,this.formData.room=null,this.formData.type_consultation=null,this.formData.diagnostic=null,this.formData.exam_investigation=null,this.formData.type_consult=null,this.formData.type_emergency=null},reset_laboratory:function(){this.formData.medical_act=null,this.formData.sales_packaging=null,this.formData.quantity_served=null,this.formData.delivery=null,this.formData.details_stock=null,this.formData.ordinance=null,this.form.type_accommodation=null,this.formData.surgery=null,this.formData.checkup=null,this.formData.room=null,this.formData.number_bed=null,this.formData.radiography=null,this.formData.type_consultation=null,this.formData.diagnostic=null,this.formData.exam_investigation=null},reset_surgery:function(){this.formData.medical_act=null,this.formData.sales_packaging=null,this.formData.quantity_served=null,this.formData.delivery=null,this.formData.details_stock=null,this.formData.laboratory=null,this.formData.ordinance=null,this.form.type_accommodation=null,this.formData.checkup=null,this.formData.radiography=null,this.formData.number_bed=null,this.formData.room=null,this.formData.type_consultation=null,this.formData.diagnostic=null,this.formData.exam_investigation=null},reset_checkup:function(){this.formData.medical_act=null,this.formData.sales_packaging=null,this.formData.quantity_served=null,this.formData.delivery=null,this.formData.details_stock=null,this.formData.laboratory=null,this.formData.ordinance=null,this.form.type_accommodation=null,this.formData.surgery=null,this.formData.radiography=null,this.formData.room=null,this.formData.number_bed=null,this.formData.type_consultation=null,this.formData.diagnostic=null,this.formData.exam_investigation=null},reset_radiography:function(){this.formData.medical_act=null,this.formData.sales_packaging=null,this.formData.quantity_served=null,this.formData.delivery=null,this.formData.details_stock=null,this.formData.laboratory=null,this.formData.ordinance=null,this.form.type_accommodation=null,this.formData.surgery=null,this.formData.checkup=null,this.formData.number_bed=null,this.formData.room=null,this.formData.type_consult=null,this.formData.type_emergency=null,this.formData.type_consultation=null,this.formData.diagnostic=null,this.formData.exam_investigation=null},reset_type_consultation:function(){this.formData.medical_act=null,this.formData.sales_packaging=null,this.formData.quantity_served=null,this.formData.delivery=null,this.formData.details_stock=null,this.formData.ordinance=null,this.formData.laboratory=null,this.form.type_accommodation=null,this.formData.number_bed=null,this.formData.radiography=null,this.formData.room=null,this.formData.surgery=null,this.formData.checkup=null,this.formData.diagnostic=null,this.formData.exam_investigation=null},reset_ordinance:function(){this.formData.medical_act=null,this.formData.sales_packaging=null,this.formData.quantity_served=null,this.formData.delivery=null,this.formData.details_stock=null,this.formData.laboratory=null,this.formData.surgery=null,this.formData.radiography=null,this.form.type_accommodation=null,this.formData.number_bed=null,this.formData.room=null,this.formData.checkup=null,this.formData.diagnostic=null,this.formData.exam_investigation=null},reset_diagnostic:function(){this.formData.medical_act=null,this.formData.sales_packaging=null,this.formData.quantity_served=null,this.formData.delivery=null,this.formData.details_stock=null,this.formData.laboratory=null,this.formData.radiography=null,this.formData.room=null,this.formData.number_bed=null,this.form.type_accommodation=null,this.formData.surgery=null,this.formData.checkup=null,this.formData.ordinance=null,this.formData.exam_investigation=null},reset_exam_investigation:function(){this.formData.medical_act=null,this.formData.sales_packaging=null,this.formData.quantity_served=null,this.formData.delivery=null,this.formData.details_stock=null,this.formData.laboratory=null,this.formData.radiography=null,this.form.type_accommodation=null,this.formData.room=null,this.formData.number_bed=null,this.formData.bed=null,this.formData.surgery=null,this.formData.checkup=null,this.formData.ordinance=null,this.formData.diagnostic=null},reset_room:function(){this.formData.medical_act=null,this.formData.sales_packaging=null,this.formData.quantity_served=null,this.formData.delivery=null,this.formData.details_stock=null,this.formData.laboratory=null,this.formData.radiography=null,this.formData.surgery=null,this.formData.checkup=null,this.formData.ordinance=null,this.formData.diagnostic=null,this.formData.type_consult=null,this.formData.type_emergency=null},reset_product_detail_act:function(){this.formData.medical_act=null,this.formData.quantity_served=null,this.formData.delivery=null},resetFormPro:function(){this.formData.details_stock=null,this.formData.quantity_served=null},get_qte_stock:function(){var t,e;0===(null===(t=this.formData.details_stock)||void 0===t?void 0:t.qte_stock)||this.formData.quantity_served>(null===(e=this.formData.details_stock)||void 0===e?void 0:e.qte_stock)?this.dialogFormWarning.show=!0:this.dialogFormWarning.show=!1},editPdf:function(t){this.dialogFormPdf.show=!0,this.$refs.pdfForm.setForm(t)},getOptionsPayment:function(){var t=this;this._.each(this.$store.getters.payment,(function(e){t.optionPayment.type_Payment.push({text:t.$vuetify.lang.t(e.text),value:e.value})}))},getOptionsPatient_shape:function(){var t=this;this._.each(this.$store.getters.type_Patient_shape,(function(e){t.optionPatient_shape.type_Patient_shape.push({text:t.$vuetify.lang.t(e.text),value:e.value})}))},getOptionsBill:function(){var t=this;this._.each(this.$store.getters.type_bills,(function(e){t.optionBills.type_bills.push({text:t.$vuetify.lang.t(e.text),value:e.value})}))},getOptionsNumberBed:function(){var t=this;this._.each(this.$store.getters.number_bed,(function(e){t.optionNumberBed.number_bed.push({text:t.$vuetify.lang.t(e.text),value:e.value})}))},getOptionsType:function(){var t=this;this._.each(this.$store.getters.type_accommodation,(function(e){t.optionType.type_accommodation.push({text:t.$vuetify.lang.t(e.text),value:e.value})}))},getOptionsShape:function(){var t=this;this._.each(this.$store.getters.type_shape,(function(e){t.optionShape.type_shape.push({text:t.$vuetify.lang.t(e.text),value:e.value})}))},forceRefresh:function(){this.dialog.show=!1,this.items=[],this.active=!1,this.resetItemsDetails()},deleteItem:function(t){this.urlDeleteItems=this.urlItemsDetails_bills+"/"+t.id,this.dialogDelete.show=!0},setHeaders:function(){this.headers=[{text:"$vuetify.bills.cols.product_name.title",value:"product_name",align:"start",sortable:!1,width:"120",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.quantity_served.title",value:"quantity_served",align:"start",sortable:!1,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.pun.title",value:"pun",align:"start",sortable:!1,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.amount_net.title",value:"amount_net",align:"start",sortable:!1,width:"60",class:"grey--text text--darken-3"},{text:"$vuetify.insurance.title",value:"insurance",align:"start",sortable:!1,width:"60",class:"grey--text text--darken-3"},{text:"$vuetify.insurance.title_patient",value:"insurance_patient",align:"start",sortable:!1,width:"60",class:"grey--text text--darken-3"},{text:"$vuetify.supplies.cols.actions.title",value:null,align:"start",sortable:!1,width:"100"}]},setHeadersAct:function(){this.headers_act=[{text:"$vuetify.medical_act.cols.name.title",value:"name",align:"start",sortable:!1,width:"120",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.product_code.title",value:"product_code",align:"start",sortable:!1,width:"20",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.quantity_served.title",value:"quantity_served",align:"start",sortable:!1,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.pub.title",value:"pub",align:"start",sortable:!1,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.delivery.title",value:"delivery",align:"start",sortable:!1,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.pun.title",value:"pun",align:"start",sortable:!1,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.amount_gross.title",value:"amount_gross",align:"start",sortable:!1,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.amount_net.title",value:"amount_net",align:"start",sortable:!1,width:"60",class:"grey--text text--darken-3"},{text:"$vuetify.supplies.cols.actions.title",value:null,align:"start",sortable:!1,width:"80"}]},createPatient:function(){this.dialogForm.show=!0,this.messages={title:"$vuetify.patient.new.title",submit:"$vuetify.patient.new.submit",success:"$vuetify.patient.new.success"}},createCash:function(){this.dialogFormCash.show=!0},currentInventory:function(){this.dialogFormInv.show=!0},createD:function(){this.dialogFormCMV.show=!0,this.messagesCMV={title:"$vuetify.cash_movement.new.title",submit:"$vuetify.cash_movement.new.submit",success:"$vuetify.cash_movement.new.success"}},createP:function(){this.dialogFormSet.show=!0,this.messagesSet={title:"$vuetify.patients_settlements.new.title",submit:"$vuetify.patients_settlements.new.submit",success:"$vuetify.patients_settlements.new.success"}},createI:function(){this.dialogFormIns.show=!0,this.messagesIns={title:"$vuetify.insurance_settlements.new.title",submit:"$vuetify.insurance_settlements.new.submit",success:"$vuetify.insurance_settlements.new.success"}},getDataForm:function(){var t={doctor:this.form.doctor["id"],patient:this.form.patient["id"],delivery:null===this.form.delivery||""===this.form.delivery?0:this.form.delivery,cash:void 0===this.form.cash||null===this.form.cash?null:this.form.cash["id"],cashier:this.form.cash?this.form.cash["user"]["id"]:this.$auth.user().id,patient_type:this.form.patient_type,bills_date:this.form.createdAt,code:this.form.code,bill_type:"proforma_insurance",type_accommodation:this.form.type_accommodation,patient_balance:this.get_patient_solde,is_proforma:!0,is_proforma_valid:this.form.is_proforma_valid,additional_info:this.form.additional_info,phone_number:this.form.phone_number,bank_card_number:this.form.bank_card_number,storage_depots:this.form.storage_depots,payment_method:0===this.form.amount_received?"NO_PAY":this.defaultPaymentMethod,bills_amount:this.get_bills_amount,amount_paid:0,net_payable:this.get_bills_amount_net,tva:this.get_bills_tva,ttc:this.get_bills_ttc,insurance:this.get_insurance_total,insurance_patient:this.get_insurance_patient_total,amount_received:null===this.form.amount_received?0:this.form.amount_received,balance:this.get_balance,refund:this.get_refund};return t},resetDataForm:function(){if(this.form.id=null,this.formData.details_stock=null,this.form.patient=null,this.formData.medical_act=null,this.form.doctor=null,this.items=[],!this.form.id){var t=this;this.$v.form.$reset(),this._.each(this.form,(function(e,i){"object"===Object(I["a"])(t.form[i])?t._.each(t.form[i],(function(e,a){"boolean"===typeof t.form[i][a]?t.form[i][a]=!1:t.form[i][a]=null})):"boolean"===typeof t.form[i]?t.form[i]=!1:t.form[i]=null})),this.resetItemsDetails(),this.form.bill_type="pharmacy",this.form.additional_info="R.A.S",this.form.payment_method="NO_PAY"}},resetFormBills:function(){if(this.form.id=null,this.formData.details_stock=null,this.formData.quantity_served=null,this.formData.type_emergency=null,this.formData.type_consult=null,this.formData.delivery=null,this.form.patient=null,this.formData.medical_act=null,this.form.doctor=null,this.items=[],!this.form.id){var t=this;this.$v.form.$reset(),this._.each(this.form,(function(e,i){"object"===Object(I["a"])(t.form[i])?t._.each(t.form[i],(function(e,a){"boolean"===typeof t.form[i][a]?t.form[i][a]=!1:t.form[i][a]=null})):"boolean"===typeof t.form[i]?t.form[i]=!1:t.form[i]=null})),this.form.bill_type="pharmacy",this.form.additional_info="R.A.S",this.form.payment_method="CASH",this.form.bills_date=new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)}},resetItemsDetails:function(){var t=this,e=this,i=this.pagination,a=i.page,s=i.itemsPerPage,o={page:a,size:s};return this._.isEmpty(this._search)||(this._search=this._.merge(o,this._search)),new Promise((function(i,a){t.loadingDetails.list=!0,e.$store.dispatch("request",{url:e.urlItemsDetails_bills+"?bills=reset",params:o}).then((function(t){var a=t.data;e.meta={totalElements:a.totalElements},i(t)})).catch((function(i){var s=t.$vuetify.lang.t("$vuetify.error_occured");if(i.response)if(400===i.response.status){var o=i.response.data;e.setFormErrors(o);var n=Object.keys(o)[0];n&&Array.isArray(o[n])&&(s=o[n][0])}else 403===i.response.status?s=e.$vuetify.lang.t("$vuetify.error_denied"):500===i.response.status&&(s=e.$vuetify.lang.t("$vuetify.error_server"));e.$store.dispatch("showNotification",{status:!0,text:s}),a(i)})).then((function(){e.loadingDetails.list=!1,i()}))}))},getDataFormdetails:function(){var t,e=["ordinance","pharmacy"],i={quantity_served:"pharmacy"===this.form.bill_type?this.formData.quantity_served:1,bill_type:this.form.bill_type,bills:this.form.bills,is_proforma:!0,cash:void 0===this.form.cash||null===this.form.cash?null:this.form.cash["id"],type_accommodation:this.form.type_accommodation,type_emergency:this.formData.type_emergency,type_consult:this.formData.type_consult,details_stock:void 0===this.formData.details_stock||null===this.formData.details_stock?"":this.formData.details_stock["id"],quantity_ordered:null===this.formData.quantity_ordered?0:this.formData.quantity_ordered,pub:this.formData.unit_price?this.formData.unit_price:this.get_price_patient,pun:this.get_pu_net,storage_depots:e.includes(this.form.bill_type)?this.form.storage_depots?this.form.storage_depots:null===(t=this.$auth.user())||void 0===t?void 0:t.storage_depots.id:null,delivery:null===this.formData.delivery||""===this.formData.delivery?0:this.formData.delivery,amount_gross:this.get_amount_gross,amount_net:this.get_amount_net,doctor:this.form.doctor["id"],share_doctor:this.get_share_doctor,tva:this.get_tva,createdAt:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),product:this.form.patient["id"],medical_act:void 0===this.formData.medical_act||null===this.formData.medical_act?"":this.formData.medical_act["id"],room:void 0===this.formData.room||null===this.formData.room?"":this.formData.room["id"],ordinance:void 0===this.formData.ordinance||null===this.formData.ordinance?"":this.formData.ordinance["id"],laboratory:void 0===this.formData.laboratory||null===this.formData.laboratory?"":this.formData.laboratory["id"],surgery:void 0===this.formData.surgery||null===this.formData.surgery?"":this.formData.surgery["id"],insurance:"hospitalization"===this.form.bill_type?0:this.get_insurance,insurance_patient:"hospitalization"===this.form.bill_type?0:this.get_insurance_patient,type_consultation:void 0===this.formData.type_consultation||null===this.formData.type_consultation?"":this.formData.type_consultation["title"],checkup:void 0===this.formData.checkup||null===this.formData.checkup?"":this.formData.checkup["id"],radiography:void 0===this.formData.radiography||null===this.formData.radiography?"":this.formData.radiography["id"],exam_investigation:void 0===this.formData.exam_investigation||null===this.formData.exam_investigation?"":this.formData.exam_investigation["id"],diagnostic:void 0===this.formData.diagnostic||null===this.formData.diagnostic?"":this.formData.diagnostic["id"]};return i},getDataFormdetailsOrdinance:function(){var t,e=["ordinance","pharmacy"],i={details_stock:void 0===this.formData.details_stock||null===this.formData.details_stock?"":this.formData.details_stock["id"],storage_depots:e.includes(this.form.bill_type)?this.form.storage_depots?this.form.storage_depots:null===(t=this.$auth.user())||void 0===t?void 0:t.storage_depots.id:null,ordinance:void 0===this.formData.ordinance||null===this.formData.ordinance?"":this.formData.ordinance["id"]};return i},setForm:function(t){this.form.id=t.id,this.form.bills=t.id,this.form.cash=t.cash,this.form.code=t.code,this.form.patient=t.patient,this.itemsPatient.push(t.patient),this.form.doctor=t.doctor,this.itemsDoctor.push(t.doctor),this.form.patient_name=t.patient["name"],this.form.patient_type=t.patient["shape"],this.form.is_accounted=t.is_accounted,this.form.is_proforma=t.is_proforma,this.form.is_proforma_valid=!t.is_proforma_valid,this.form.details_stock=t.details_stock,this.form.bank_card_number=t.bank_card_number,this.form.amount_received=t.amount_received,this.form.amount_paid=t.amount_paid,this.form.storage_depots=null===t.storage_depots?"":t.storage_depots["id"],this.itemsDepot.push(t.storage_depots),this.form.phone_number=t.phone_number,this.form.bills_date=t.createdAt,this.form.payment_method=t.payment_method,this.form.bill_type=t.bill_type,this.form.type_accommodation=t.type_accommodation,this.form.additional_info=t.additional_info,this.form.refund=t.refund,this.form.tva=t.tva,this.getItemsDetails()},getRouteDetails:function(){return this.form.id,this.urlItemsDetails_bills},getMethodDetails:function(){return"POST"},getMethod:function(){return this.form.id?"PUT":"POST"},refreshItemsDetail:function(){var t=this;this.loadingDetails.refresh=!0,this.getItemsDetails().then((function(){})).catch((function(){})).then((function(){t.loadingDetails.refresh=!1}))},getHospital:function(){var t=this;return new Promise((function(e){t.$store.dispatch("request",{url:t.urlItemsHospital}).then((function(i){var a=i.data;t.tva_collected=a.content[0].VAT_collected,e(i)}))}))},getOpenCash:function(){var t=this,e=this;return new Promise((function(i){e.$store.dispatch("request",{url:e.urlItemsCash}).then((function(a){var s=a.data;e.isActive=s.content.is_active,e.isInventory=s.content.is_inventory,!1===e.isActive?!1===e.isInventory?t.createCash():t.currentInventory():(e.isActive=s.content.is_active,!0===e.isInventory&&t.currentInventory()),i(a)}))}))},save:function(){var t=this;this.$store.dispatch("showNotification",{statut:!1});var e=this;e.$v.$touch(),e.$v.$invalid||(this.loading=!0,this.$store.dispatch("request",{url:e.getRoute(),method:e.getMethod(),data:e.getDataForm()}).then((function(){e.$store.dispatch("showNotification",{statut:!0,text:e.$vuetify.lang.t(e.messages.success)}),"PUT"===t.getMethod()?e.$emit("getItems"):(e.$emit("getItems"),e.resetDataForm())})).catch((function(i){var a="$vuetify.error_server";if(i.response&&400===i.response.status){var s=i.response.data;e.setFormErrors(s),t.$forceUpdate();var o=Object.keys(s)[0];o&&Array.isArray(s[o])&&(a=s[o][0])}e.$store.dispatch("showNotification",{statut:!0,text:a,color:"#B71C1C"})})).finally((function(){e.loading=!1})))},proforma:function(){var t=this;this.$store.dispatch("showNotification",{statut:!1});var e=this;e.$v.$touch(),e.$v.$invalid||(this.loading=!0,this.$store.dispatch("request",{url:e.getRoute()+"?print=1&type=proforma",method:e.getMethod(),data:e.getDataForm(),responseType:"blob"}).then((function(i){e.$store.dispatch("showNotification",{statut:!0,text:e.$vuetify.lang.t(e.messages.success)});var a=new Blob([i.data],{type:i.data.type}),s=URL.createObjectURL(a);t.editPdf(s),"PUT"===t.getMethod()?e.$emit("getItems"):(e.$emit("getItems"),e.resetDataForm())})).catch((function(i){var a="$vuetify.error_server";if(i.response&&400===i.response.status){var s=i.response.data;e.setFormErrors(s),t.$forceUpdate();var o=Object.keys(s)[0];o&&Array.isArray(s[o])&&(a=s[o][0])}e.$store.dispatch("showNotification",{statut:!0,text:a,color:"#B71C1C"})})).finally((function(){e.loading=!1})))},save_print_bills:function(){var t=this;this.$store.dispatch("showNotification",{statut:!1});var e=this;e.$v.$touch(),e.$v.$invalid||(this.loading=!0,this.$store.dispatch("request",{url:e.getRoute()+"?print=1&type=bills",method:e.getMethod(),data:e.getDataForm(),responseType:"blob"}).then((function(i){e.$store.dispatch("showNotification",{statut:!0,text:e.$vuetify.lang.t(e.messages.success)});var a=new Blob([i.data],{type:i.data.type}),s=URL.createObjectURL(a);t.editPdf(s),"PUT"===t.getMethod()?e.$emit("getItems"):(e.$emit("getItems"),e.resetDataForm())})).catch((function(i){var a="$vuetify.error_server";if(i.response&&400===i.response.status){var s=i.response.data;e.setFormErrors(s),t.$forceUpdate();var o=Object.keys(s)[0];o&&Array.isArray(s[o])&&(a=s[o][0])}e.$store.dispatch("showNotification",{statut:!0,text:a,color:"#B71C1C"})})).finally((function(){e.loading=!1})))},print_bills:function(){var t=this;this.$store.dispatch("showNotification",{statut:!1});var e=this;e.$v.$touch(),e.$v.$invalid||(this.loading=!0,this.$store.dispatch("request",{url:e.getRoute()+"?just_print=1",method:e.getMethod(),data:e.getDataForm(),responseType:"blob"}).then((function(i){var a=new Blob([i.data],{type:i.data.type}),s=URL.createObjectURL(a);t.editPdf(s),"PUT"===t.getMethod()?e.$emit("getItems"):(e.$emit("getItems"),e.resetDataForm())})).catch((function(i){var a="$vuetify.error_server";if(i.response&&400===i.response.status){var s=i.response.data;e.setFormErrors(s),t.$forceUpdate();var o=Object.keys(s)[0];o&&Array.isArray(s[o])&&(a=s[o][0])}e.$store.dispatch("showNotification",{statut:!0,text:a,color:"#B71C1C"})})).finally((function(){e.loading=!1})))},getItemsDetails:function(){var t=this,e=this,i=this.pagination,a=i.page,s=i.itemsPerPage,o={page:a,size:s};return this._.isEmpty(this._search)||(this._search=this._.merge(o,this._search)),new Promise((function(i,a){t.loadingDetails.list=!0,e.$store.dispatch("request",{url:e.urlItemsDetails_bills+"?bills="+t.form.bills+"&is_proforma=True",params:o}).then((function(t){var a=t.data;e.items=a.content,e.meta={totalElements:a.totalElements},i(t)})).catch((function(i){var s=t.$vuetify.lang.t("$vuetify.error_occured");if(i.response)if(400===i.response.status){var o=i.response.data;e.setFormErrors(o);var n=Object.keys(o)[0];n&&Array.isArray(o[n])&&(s=o[n][0])}else 403===i.response.status?s=e.$vuetify.lang.t("$vuetify.error_denied"):500===i.response.status&&(s=e.$vuetify.lang.t("$vuetify.error_server"));e.$store.dispatch("showNotification",{status:!0,text:s}),a(i)})).then((function(){e.loadingDetails.list=!1,i()}))}))},editDetails:function(t){this.editedRowId=t.id,this.editedRow=Object(C["a"])({},t)},saveRowEdit:function(){var t=this;this.editedRow.amount_net=this.calculatedAmountNet,this.editedRow.type_consultation?(this.editedRow.type_consultation=this.editedRow.type_consultation["id"],this.editedRow["bill_type"]="consultation"):this.editedRow.details_stock?this.editedRow.details_stock=this.editedRow.details_stock["id"]:this.editedRow.medical_act?(this.editedRow.medical_act=this.editedRow.medical_act["id"],this.editedRow["bill_type"]="consultation",this.editedRow["type_consultation"]=this.editedRow.medical_act):this.editedRow.laboratory?(this.editedRow.laboratory=this.editedRow.laboratory["id"],this.editedRow["bill_type"]="consultation",this.editedRow["type_consultation"]=this.editedRow.laboratory):this.editedRow.radiography?(this.editedRow.radiography=this.editedRow.radiography["id"],this.editedRow["bill_type"]="consultation",this.editedRow["type_consultation"]=this.editedRow.radiography):this.editedRow.surgery?(this.editedRow.surgery=this.editedRow.surgery["id"],this.editedRow["bill_type"]="consultation",this.editedRow["type_consultation"]=this.editedRow.surgery):this.editedRow.checkup?(this.editedRow.checkup=this.editedRow.checkup["id"],this.editedRow["bill_type"]="consultation",this.editedRow["type_consultation"]=this.editedRow.checkup):this.editedRow.diagnostic?(this.editedRow.diagnostic=this.editedRow.diagnostic["id"],this.editedRow["bill_type"]="consultation",this.editedRow["type_consultation"]=this.editedRow.diagnostic):this.editedRow.room?this.editedRow.room=this.editedRow.room["id"]:this.editedRow.exam_investigation&&(this.editedRow.exam_investigation=this.editedRow.exam_investigation["id"],this.editedRow["bill_type"]="consultation",this.editedRow["type_consultation"]=this.editedRow.exam_investigation),this.editedRow.bills&&(this.editedRow.bills=this.editedRow.bills["id"]),this.$store.dispatch("showNotification",{statut:!1});var e=this;e.$v.$touch(),e.$v.$invalid||(this.loading=!0,this.$store.dispatch("request",{url:e.getRouteDetails()+"/"+this.editedRow.id,method:"PATCH",data:this.editedRow}).then((function(){e.$store.dispatch("showNotification",{statut:!0,text:e.$vuetify.lang.t("$vuetify.supplies.new.successDetails")}),t.getItemsDetails(),e.resetDataFormProduct()})).catch((function(i){var a;if(i.response)if(400===i.response.status){a="$vuetify.error_occured";var s=i.response.data;e.setFormErrors(s),t.$forceUpdate()}else a="$vuetify.error_server";e.$store.dispatch("showNotification",{statut:!0,text:e.$vuetify.lang.t(a),color:"#B71C1C"})})).then((function(){e.loading=!1})));var i=this.items.findIndex((function(e){return e.id===t.editedRow.id}));-1!==i&&this.items.splice(i,1,Object(C["a"])({},this.editedRow)),this.editedRowId=null,this.editedRow={}},cancelRowEdit:function(){this.editedRowId=null,this.editedRow={}},resetAll:function(){"pharmacy"===this.form.bill_type?this.reset_detail_stock():"medical_act"===this.form.bill_type?this.reset_medical_act():"laboratory"===this.form.bill_type?this.reset_laboratory():"radiography"===this.form.bill_type?this.reset_radiography():"surgery"===this.form.bill_type?this.reset_surgery():"checkup"===this.form.bill_type?this.reset_checkup():"diagnostic"===this.form.bill_type?this.reset_diagnostic():"hospitalization"===this.form.bill_type?this.reset_room():"exam_investigation"===this.form.bill_type&&this.reset_exam_investigation()},resetDataFormProduct:function(){this.formData.quantity_served=0,this.formData.details_stock=null,this.formData.medical_act=null,this.formData.laboratory=null,this.formData.surgery=null,this.formData.checkup=null,this.formData.quantity_served=null,this.formData.quantity_ordered=null,this.formData.delivery=null,this.formData.radiography=null,this.formData.exam_investigation=null,this.formData.diagnostic=null,this.formData.unit_price=null},saveDetails:function(){var t=this;this.$store.dispatch("showNotification",{statut:!1});var e=this;e.$v.$touch(),e.$v.$invalid||(this.loading=!0,this.$store.dispatch("request",{url:e.getRouteDetails(),method:e.getMethodDetails(),data:e.getDataFormdetails()}).then((function(){e.$store.dispatch("showNotification",{statut:!0,text:e.$vuetify.lang.t("$vuetify.supplies.new.successDetails")}),t.getItemsDetails(),e.resetDataFormProduct()})).catch((function(i){var a;if(i.response)if(400===i.response.status){a="$vuetify.error_occured";var s=i.response.data;e.setFormErrors(s),t.$forceUpdate()}else a="$vuetify.error_server";e.$store.dispatch("showNotification",{statut:!0,text:e.$vuetify.lang.t(a),color:"#B71C1C"})})).then((function(){e.loading=!1})))},setFormData:function(t){this.editedRow.pun=t.pun,this.editedRow.pun=this.editedRow.pun-(this.editedRow.pun||0)*(this.editedRow.delivery||0)/100},setFormDataAmount:function(t){this.editedRow.pun=t.pun,this.editedRow.pun=this.editedRow.pun-(this.editedRow.pun||0)*(this.editedRow.delivery||0)/100},saveDetailsOrdinance:function(){var t=this;this.$store.dispatch("showNotification",{statut:!1});var e=this;e.$v.$touch(),e.$v.$invalid||(this.loading=!0,this.$store.dispatch("request",{url:e.getRouteDetails(),method:e.getMethod(),data:e.getDataFormdetailsOrdinance()}).then((function(){e.$store.dispatch("showNotification",{statut:!0,text:e.$vuetify.lang.t("$vuetify.supplies.new.successDetails")}),t.getItemsDetails(),e.resetDataFormProduct()})).catch((function(i){var a;if(i.response)if(400===i.response.status){a="$vuetify.error_occured";var s=i.response.data;e.setFormErrors(s),t.$forceUpdate()}else a="$vuetify.error_server";e.$store.dispatch("showNotification",{statut:!0,text:e.$vuetify.lang.t(a),color:"#B71C1C"})})).then((function(){e.loading=!1})))}},computed:{defaultPaymentMethod:{get:function(){return"CASH"},set:function(t){this.form.payment_method=t}},calculatedPuNet:function(){return this.editedRow.pun},calculatedAmountNet:function(){return(this.editedRow.pun||0)*(this.editedRow.quantity_served||0)},get_assured:function(){var t,e,i="";void 0===this.formData.type_consultation&&null===this.formData.type_consultation||(i=null===(t=this.formData.type_consultation)||void 0===t?void 0:t.is_assured);void 0===this.formData.details_stock&&null===this.formData.details_stock||(i=null===(e=this.formData.details_stock)||void 0===e?void 0:e.is_assured);return i},get_patient_code:function(){var t,e="";return e=null===this.form.patient?"":null===(t=this.form.patient)||void 0===t?void 0:t.code,e},get_patient_shape:function(){var t,e="";return e=null===this.form.patient?"":null===(t=this.form.patient)||void 0===t?void 0:t.type_patient.title,e},get_price_patient:function(){var t=this,e=0;if(null!==this.formData.laboratory||null!==this.formData.details_stock||null!==this.formData.medical_act||null!==this.formData.radiography||null!==this.formData.room||null!==this.formData.type_consultation||null!==this.formData.surgery||null!==this.formData.diagnostic||null!==this.formData.exam_investigation||null!==this.formData.checkup)if("hospitalization"===this.form.bill_type){var i,a=null!==this.formData.number_bed?null===(i=this.formData)||void 0===i?void 0:i.room["prices"].find((function(e){if(e.type_patient===t.get_patient_shape&&e.type_accommodation===t.form.type_accommodation&&e.other_code===t.get_product_code&&e.number_bed===t.formData.number_bed)return!0})):0;e=a?a["price"]:0}else if("pharmacy"===this.form.bill_type){var s;e=null===this.formData.details_stock?"":null===(s=this.formData.details_stock)||void 0===s?void 0:s.product.public_price}else if("consultation"===this.form.bill_type){var o=0;o=this.formData["type_consultation"]["code"].startsWith("TEC")?this.formData["type_consultation"]?this.formData["type_consultation"]["prices"].find((function(e){return e.speciality===t.form.doctor.type_doctor.title}),(function(e){return e.type_emergency===t.formData.type_emergency}),(function(e){return e.type_consult===t.formData.type_consult}),(function(e){return e.type_patient===t.get_patient_shape}),(function(e){return e.other_code===t.get_product_code})):null:this.formData["type_consultation"]?this.formData["type_consultation"]["prices"].find((function(e){return e.type_patient===t.get_patient_shape}),(function(e){return e.other_code===t.get_product_code})):null,e=void 0==o?0:o["price"]}else{var n=this.formData[this.form.bill_type]?this.formData[this.form.bill_type]["prices"].find((function(e){return e.type_patient===t.get_patient_shape}),(function(e){return e.other_code===t.get_product_code})):null;e=void 0==n?0:n["price"]}return e},get_product_code:function(){var t="";if("pharmacy"===this.form.bill_type){var e,i,a="";a=null===this.formData.details_stock||void 0===this.formData.details_stock?"":null===(e=this.formData.details_stock)||void 0===e?void 0:e.product.code;var s="";s=null===this.formData.details_stock||void 0===this.formData.details_stock?"":null===(i=this.formData.details_stock)||void 0===i?void 0:i.qte_stock,t=a+"  /  "+s}else if("medical_act"===this.form.bill_type){var o;t=null===this.formData.medical_act?"":null===(o=this.formData.medical_act)||void 0===o?void 0:o.code}else if("laboratory"===this.form.bill_type){var n;t=null===this.formData.laboratory?"":null===(n=this.formData.laboratory)||void 0===n?void 0:n.code}else if("consultation"===this.form.bill_type){var r;t=null===this.formData.type_consultation?"":null===(r=this.formData.type_consultation)||void 0===r?void 0:r.code}else if("radiography"===this.form.bill_type){var l;t=null===this.formData.radiography?"":null===(l=this.formData.radiography)||void 0===l?void 0:l.code}else if("hospitalization"===this.form.bill_type){var u;t=null===this.formData.room?"":null===(u=this.formData.room)||void 0===u?void 0:u.code}else if("surgery"===this.form.bill_type){var c;t=null===this.formData.surgery?"":null===(c=this.formData.surgery)||void 0===c?void 0:c.code}else if("diagnostic"===this.form.bill_type){var d;t=null===this.formData.diagnostic?"":null===(d=this.formData.diagnostic)||void 0===d?void 0:d.code}else if("exam_investigation"===this.form.bill_type){var m;t=null===this.formData.exam_investigation?"":null===(m=this.formData.exam_investigation)||void 0===m?void 0:m.code}else{var h;null!==this.formData.checkup&&(null===(h=this.formData.checkup)||void 0===h||h.code)}return t},get_doctor:function(){var t,e="";return e=null===this.formData.ordinance||void 0===this.formData.ordinance?"":null===(t=this.formData.ordinance)||void 0===t?void 0:t.consultation.doctor,e},get_patient_solde:function(){var t,e="";return e=null===this.form.patient?"":null===(t=this.form.patient)||void 0===t?void 0:t.solde,e},get_patient_insurance:function(){var t,e,i="";return i=1==(null===(t=this.form.patient)||void 0===t?void 0:t.is_assured)?null===(e=this.form.patient)||void 0===e?void 0:e.insurance_agency.insurance.percent:0,i},get_doctor_quote:function(){var t,e="";return e=null===this.form.doctor?"":null===(t=this.form.doctor)||void 0===t?void 0:t.coef,e},get_bills_amount:function(){var t=0;return this.items.forEach((function(e){t+=e.amount_net})),t},get_bills_amount_insurance:function(){var t=0;return this.items.forEach((function(e){t+=e.insurance_patient})),t},get_share_doctor:function(){var t=this.get_price_patient*this.get_doctor_quote/100;return t},get_bills_tva:function(){var t=0;return this.items.forEach((function(e){t+=e.tva})),t},get_bills_ttc:function(){var t=this.get_bills_tva+this.get_bills_amount;return t},get_pu_net:function(){if(void 0===this.formData.delivery||null===this.formData.delivery)return this.formData.unit_price?this.formData.unit_price:this.get_price_patient;var t=0;t=this.formData.unit_price?this.formData.unit_price*this.formData.delivery:this.get_price_patient*this.formData.delivery;var e=0;e=t/100;var i=0;return i=this.formData.unit_price?this.formData.unit_price-e:this.get_price_patient-e,i},get_amount_gross:function(){if("pharmacy"===this.form.bill_type){var t,e=0;e=null===this.formData.details_stock||void 0===this.formData.details_stock?"":null===(t=this.formData.details_stock)||void 0===t?void 0:t.qte_stock,this.formData.quantity_served>e&&this.get_qte_stock()}var i=0;return i=this.formData.quantity_served*this.formData.unit_price?this.formData.unit_price:this.formData.quantity_served*this.get_price_patient,i},get_bills_amount_net:function(){var t=0,e=0;if(0==this.get_patient_insurance)if(this.form.delivery){var i=this.get_bills_amount*this.form.delivery,a=i/100;e=this.get_bills_amount-a}else e=this.get_bills_amount;else e=this.get_insurance_patient_total;return t=parseInt(e)+parseInt(this.simple_tva?this.simple_tva:0),t},get_tva:function(){var t=0;return t=this.formData.unit_price?parseInt(this.formData.unit_price*this.tva_collected)/100:parseInt(this.tva_collected*this.get_price_patient)/100,this.simple_tva=t,t},get_insurance:function(){var t=0;return t=Math.round(this.get_patient_insurance*this.get_amount_net)/100,t},get_insurance_total:function(){var t=0;this.items.forEach((function(e){0===e.insurance_patient&&(t+=e.amount_net)}));var e=0;this.items.forEach((function(t){0!==t.insurance_patient&&(e+=t.insurance)}));var i=0;if(0===this.get_patient_insurance)i=0;else{console.log(this.get_patient_insurance,t,e);var a=0;t&&(a=Math.round(this.get_patient_insurance*parseInt(t))/100),i=parseInt(a)+parseInt(e)}return i},get_insurance_patient:function(){var t=0;return t=parseInt(this.get_amount_net)-parseInt(this.get_insurance),t},get_insurance_patient_total:function(){var t=0;return t=0===this.get_patient_insurance?0:this.get_bills_amount-this.get_insurance_total,t},get_amount_net:function(){if(void 0===this.formData.quantity_served)return this.get_amount_gross;var t="";return t=this.get_pu_net*this.formData.quantity_served,t},get_bills_amount_paid:function(){return this.form.amount_received>this.get_bills_amount_net?this.get_bills_amount_net:this.form.amount_received},get_balance:function(){if(void 0===this.form.amount_received)return this.get_bills_amount_net;var t="";return t=this.get_bills_amount_net-this.form.amount_received,t<0&&(t=0),t},get_refund:function(){if(void 0===this.form.amount_received)return this.get_bills_amount_net;var t="";return t=this.form.amount_received-this.get_bills_amount_net,t<0&&(t=0),t},nameErrors:function(){var t=[];return this.$v.form.name.$dirty?(!this.$v.form.name.required&&t.push(this.$vuetify.lang.t("$vuetify.supplies.cols.name.required")),t):t},reference_noErrors:function(){var t=[];return this.$v.form.reference_no.$dirty?(!this.$v.form.reference_no.required&&t.push(this.$vuetify.lang.t("$vuetify.supplies.cols.reference_no.required")),t):t},total_amountErrors:function(){var t=[];return this.$v.form.total_amount.$dirty?(!this.$v.form.total_amount.required&&t.push(this.$vuetify.lang.t("$vuetify.supplies.cols.total_amount.required")),t):t}},mounted:function(){this.getOpenCash(),this.getHospital()},components:{DeleteItem:W["a"],FormCmv:E["a"],FormCash:z["a"],PermitOther:S,FormInv:Y["a"],FormWarning:M,FormPdf:Q["a"],FormSettlement:H["a"],FormPatient:U["a"]}},G=J,K=i("c6a6"),X=i("62ad"),Z=i("8fea"),tt=i("4bd4"),et=i("132d"),it=i("0fd9"),at=i("b974"),st=i("71d9"),ot=Object(h["a"])(G,x,k,!1,null,null,null),nt=ot.exports;p()(ot,{VAutocomplete:K["a"],VBtn:_["a"],VCard:v["a"],VCardActions:y["a"],VCardText:y["b"],VCol:X["a"],VDataTable:Z["a"],VDialog:g["a"],VDivider:b["a"],VForm:tt["a"],VIcon:et["a"],VRow:it["a"],VSelect:at["a"],VSpacer:D["a"],VTextField:L["a"],VToolbar:st["a"]});var rt=i("07d0"),lt={mixins:[r["a"]],data:function(){return{urlItemsCash:"cashs/isOpen",urlItems:"bills/current",urlDeleteItems:"",deleteItems:"/bills",sortBy:["createdAt"],dialogForm:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogFormProforma:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogFormCash:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogFormInv:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogDelete:{show:!1},isActive:!1,isInventory:!1,dialogDetail:{show:!1},dialogEnt:{show:!1},form:{id:null,patient:null,doctor:null,patient_name:null,patient_balance:null,net_payable:null,patient_type:null,pub:null,pun:null,amount_gross:null,quantity_ordered:null,amount_net:null,total_amount:null,quantity_served:null,product:null,delivery:null,bills:null,reference_no:null,additional_info:null,bills_amount:null,code:null,cashier:null,bill_type:null,amount_paid:null,bill_shape:null,storage_depots:null},filter:{name:null,role:null},messages:{title:"",submit:"",success:""},messagesDelete:{success:"$vuetify.bills.delete.success"}}},mounted:function(){this.getItems()},methods:{enabled:function(t){this.$refs.validateProforma.setForm(t),t.is_active?(this.dialogFormProforma.shows.showInfo=!0,this.messages={title:"$vuetify.bills.cols.is_proforma_valid.failed",submit:"$vuetify.bills.update.submit",success:"$vuetify.bills.update.success"}):(this.dialogFormProforma.shows.showInfo=!0,this.messages={title:"$vuetify.bills.cols.is_proforma_valid.validate",submit:"$vuetify.bills.update.submit",success:"$vuetify.bills.update.success"})},deleteItem:function(t){this.urlDeleteItems=this.deleteItems+"/"+t.id,this.dialogDelete.show=!0},getOpenCash:function(){var t=this,e=this;return new Promise((function(i){e.$store.dispatch("request",{url:e.urlItemsCash}).then((function(a){var s=a.data;e.isActive=s.content.is_active,e.isInventory=s.content.is_inventory,!1===e.isActive?!1===e.isInventory?t.createCash():t.currentInventory():(e.isActive=s.content.is_active,!0===e.isInventory&&t.currentInventory()),i(a)}))}))},createCash:function(){this.dialogFormCash.show=!0,this.messages={title:"$vuetify.cash.new.title",submit:"$vuetify.cash.new.submit",success:"$vuetify.cash.new.success"}},currentInventory:function(){this.dialogFormInv.show=!0},getItems:function(){var t=this,e=this,i=this.pagination,a=i.page,s=i.itemsPerPage,o={page:a,size:s};return this._.isEmpty(this._search)||(this._search=this._.merge(o,this._search)),new Promise((function(i,a){t.loading.list=!0,e.$store.dispatch("request",{url:e.urlItems+"?is_proforma=true",params:o}).then((function(t){var a=t.data;e.items=a.content,e.meta={totalElements:a.totalElements},i(t)})).catch((function(i){var s=t.$vuetify.lang.t("$vuetify.error_occured");if(i.response)if(400===i.response.status){var o=i.response.data;e.setFormErrors(o);var n=Object.keys(o)[0];n&&Array.isArray(o[n])&&(s=o[n][0])}else 403===i.response.status?s=e.$vuetify.lang.t("$vuetify.error_denied"):500===i.response.status&&(s=e.$vuetify.lang.t("$vuetify.error_server"));e.$store.dispatch("showNotification",{status:!0,text:s}),a(i)})).then((function(){e.loading.list=!1,i()}))}))},setHeaders:function(){this.headers=[{text:"$vuetify.bills.cols.bill_N.title",value:"bill_N",align:"start",sortable:!0,width:"15",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.date_bill.title",value:"date_bill",align:"start",sortable:!0,width:"50",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.patient_name.title",value:"patient_name",align:"start",sortable:!0,width:"30",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.net_payable.title",value:"net_payable",align:"start",sortable:!0,width:"6",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.is_proforma_valid.title",value:"is_proforma_valid",align:"start",sortable:!0,width:"6",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.actions.title",value:null,align:"start",sortable:!0,width:"140"}]},create:function(){this.dialogForm.show=!0,this.messages={title:"$vuetify.proforma.new.title",submit:"$vuetify.proforma.new.submit",success:"$vuetify.proforma.new.success"},this.form={id:null,patient:null,doctor:null,patient_name:null,patient_balance:null,net_payable:null,patient_type:null,pub:null,pun:null,amount_gross:null,quantity_ordered:null,amount_net:null,total_amount:null,quantity_served:null,product:null,delivery:null,bills:null,reference_no:null,additional_info:null,bills_amount:null,code:null,cashier:null,bill_type:null,amount_paid:null,bill_shape:null,storage_depots:null}},editBills:function(t){this.dialogForm.show=!0,this.messages={title:"$vuetify.proforma.update.title",submit:"$vuetify.proforma.update.submit",success:"$vuetify.proforma.update.success"},this.$refs.proformaForm.setForm(t)},showFilter:function(){this.dialogForm.shows.showFilter=!0},performFilter:function(){var t=this;t.loading.list=!0;var e={};null!==t.filter.name&&(e["name"]=t.filter.name),null!==t.filter.role&&(e["role"]=t.filter.role),t._search=e,t.getItems().then((function(){t.$refs.filterForm.closeDialog()})).finally((function(){t.$refs.filterForm.stopLoadingBtn()}))}},components:{FormCash:z["a"],FormBills:nt,FormInv:Y["a"],FormEnable:w,DeleteItem:rt["a"]}},ut=lt,ct=i("ce87"),dt=i("3a2f"),mt=Object(h["a"])(ut,o,n,!1,null,"15831faa",null),ht=mt.exports;p()(mt,{VBtn:_["a"],VCard:v["a"],VDataTable:Z["a"],VHover:ct["a"],VIcon:et["a"],VSpacer:D["a"],VTooltip:dt["a"]});var ft={metaInfo:function(){return{title:this.$vuetify.lang.t("$vuetify.bills.title")}},data:function(){return{}},components:{User:ht}},pt=ft,_t=Object(h["a"])(pt,a,s,!1,null,null,null);e["default"]=_t.exports},"967a":function(t,e,i){"use strict";var a=i("4c68"),s=i.n(a);s.a}}]);
//# sourceMappingURL=chunk-4efd399c.2e45dbd5.js.map