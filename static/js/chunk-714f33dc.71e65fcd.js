(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-714f33dc"],{"0840":function(t,e,a){"use strict";var s=a("6c03"),r=a.n(s);r.a},"6c03":function(t,e,a){},a36e:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t._.includes(t.$auth.user().permissions,"view_dashboard_surgery")?a("div",[a("br"),a("v-card",{attrs:{height:"50px",flat:"",color:"#FAFAFA"}},[a("v-card-text",[a("v-row",{attrs:{wrap:""}},[a("v-col",{staticStyle:{"margin-top":"-10px"},attrs:{cols:"12",sm:"2"}},[a("v-btn",{staticClass:"font-weight-bold white--text",attrs:{depressed:"",color:"btn_logout"},on:{click:function(e){return t.refreshItems()}}},[a("v-icon",{attrs:{left:"",color:"white"}},[t._v("mdi-refresh")]),t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.refresh"))+" ")],1)],1),a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"10"}})],1)],1)],1),a("br"),a("v-row",{attrs:{wrap:""}},[a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{attrs:{lg:"3",cols:"6"}},[a("v-hover",{attrs:{"open-delay":"200"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.hover;return[a("v-card",{attrs:{color:"cyan darken-3",elevation:s?16:2}},[a("v-card-text",{staticClass:"d-flex justify-space-between align-center white--text"},[a("div",[a("strong",[t._v(t._s(t.$vuetify.lang.t("$vuetify.product.stat.sale_of_the_day")))]),a("br"),a("br"),a("span",{staticStyle:{color:"white","font-size":"18px"}},[t._v(t._s(null===t.items.sale_of_the_day_product?0:Intl.NumberFormat().format(Math.round(100*t.items.sale_of_the_day_product)/100)))])]),a("div",[a("strong",[t._v(t._s(t.$vuetify.lang.t("$vuetify.product.stat.back")))]),a("br"),a("br"),t.items.back_sale_of_the_day_product>=0?a("div",[a("span",{staticStyle:{color:"white","font-size":"15px"}},[a("strong",[t._v(t._s(Math.round(100*t.items.back_sale_of_the_day_product)/100)+" %")]),a("v-btn",{attrs:{icon:"",small:""}},[a("v-icon",{attrs:{size:"10",color:"white"}},[t._v("mdi-arrow-up-bold")])],1)],1)]):a("span",{staticStyle:{color:"red","font-size":"15px"}},[a("strong",[t._v(t._s(Math.round(100*t.items.back_sale_of_the_day_product)/100)+" %")]),a("v-btn",{attrs:{icon:"",small:""}},[a("v-icon",{attrs:{size:"10",color:"red"}},[t._v("mdi-arrow-down-bold")])],1)],1)])])],1)]}}],null,!1,3273278051)})],1),a("v-col",{attrs:{lg:"3",cols:"6"}},[a("v-hover",{attrs:{"open-delay":"200"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.hover;return[a("v-card",{attrs:{color:"blue darken-3",elevation:s?16:2}},[a("v-card-text",{staticClass:"d-flex justify-space-between align-center white--text"},[a("div",[a("strong",[t._v(t._s(t.$vuetify.lang.t("$vuetify.product.stat.sale_of_the_month")))]),a("br"),a("br"),a("span",{staticStyle:{color:"white","font-size":"18px"}},[a("strong",[t._v(t._s(null===t.items.sale_of_the_month_product?0:Intl.NumberFormat().format(Math.round(100*t.items.sale_of_the_month_product)/100)))])])]),a("div",[a("strong",[t._v(t._s(t.$vuetify.lang.t("$vuetify.product.stat.back")))]),a("br"),a("br"),t.items.back_sale_of_the_month_product>=0?a("div",[a("span",{staticStyle:{color:"white","font-size":"15px"}},[a("strong",[t._v(t._s(Math.round(100*t.items.back_sale_of_the_month_product)/100)+" %")]),a("v-btn",{attrs:{icon:"",small:""}},[a("v-icon",{attrs:{size:"10",color:"white"}},[t._v("mdi-arrow-up-bold")])],1)],1)]):a("span",{staticStyle:{color:"red","font-size":"15px"}},[a("strong",[t._v(t._s(Math.round(100*t.items.back_sale_of_the_month_product)/100)+" %")]),a("v-btn",{attrs:{icon:"",small:""}},[a("v-icon",{attrs:{size:"10",color:"red"}},[t._v("mdi-arrow-down-bold")])],1)],1)])])],1)]}}],null,!1,120890444)})],1),a("v-col",{attrs:{lg:"3",cols:"6"}},[a("v-hover",{attrs:{"open-delay":"200"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.hover;return[a("v-card",{attrs:{color:"cyan darken-3",elevation:s?16:2}},[a("v-card-text",{staticClass:"d-flex justify-space-between align-center white--text"},[a("div",[a("strong",[t._v(t._s(t.$vuetify.lang.t("$vuetify.consultation.titleNbrDays")))]),a("br"),a("br"),a("span",{staticStyle:{color:"white","font-size":"18px"}},[t._v(t._s(null===t.items.nbr_of_the_day_product?0:Intl.NumberFormat().format(Math.round(100*t.items.nbr_of_the_day_product)/100)))])]),a("div",[a("strong",[t._v(t._s(t.$vuetify.lang.t("$vuetify.product.stat.back")))]),a("br"),a("br"),t.items.back_nbr_of_the_day_product>=0?a("div",[a("span",{staticStyle:{color:"white","font-size":"15px"}},[a("strong",[t._v(t._s(Math.round(100*t.items.back_nbr_of_the_day_product)/100)+" %")]),a("v-btn",{attrs:{icon:"",small:""}},[a("v-icon",{attrs:{size:"10",color:"white"}},[t._v("mdi-arrow-up-bold")])],1)],1)]):a("span",{staticStyle:{color:"red","font-size":"15px"}},[a("strong",[t._v(t._s(Math.round(100*t.items.back_nbr_of_the_day_product)/100)+" %")]),a("v-btn",{attrs:{icon:"",small:""}},[a("v-icon",{attrs:{size:"10",color:"red"}},[t._v("mdi-arrow-down-bold")])],1)],1)])])],1)]}}],null,!1,3693403465)})],1),a("v-col",{attrs:{lg:"3",cols:"6"}},[a("v-hover",{attrs:{"open-delay":"200"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.hover;return[a("v-card",{attrs:{color:"blue darken-3",elevation:s?16:2}},[a("v-card-text",{staticClass:"d-flex justify-space-between align-center white--text"},[a("div",[a("strong",[t._v(t._s(t.$vuetify.lang.t("$vuetify.consultation.titleNbrMonth")))]),a("br"),a("br"),a("span",{staticStyle:{color:"white","font-size":"18px"}},[a("strong",[t._v(t._s(null===t.items.sale_of_the_month_product?0:Intl.NumberFormat().format(Math.round(100*t.items.nbr_of_the_month_product)/100)))])])]),a("div",[a("strong",[t._v(t._s(t.$vuetify.lang.t("$vuetify.product.stat.back")))]),a("br"),a("br"),t.items.back_nbr_of_the_month_product>=0?a("div",[a("span",{staticStyle:{color:"white","font-size":"15px"}},[a("strong",[t._v(t._s(Math.round(100*t.items.back_nbr_of_the_month_product)/100)+" %")]),a("v-btn",{attrs:{icon:"",small:""}},[a("v-icon",{attrs:{size:"10",color:"white"}},[t._v("mdi-arrow-up-bold")])],1)],1)]):a("span",{staticStyle:{color:"red","font-size":"15px"}},[a("strong",[t._v(t._s(Math.round(100*t.items.back_nbr_of_the_month_product)/100)+" %")]),a("v-btn",{attrs:{icon:"",small:""}},[a("v-icon",{attrs:{size:"10",color:"red"}},[t._v("mdi-arrow-down-bold")])],1)],1)])])],1)]}}],null,!1,518958736)})],1)],1),a("br"),a("v-card",[a("v-card-text",[a("v-row",{attrs:{wrap:""}},[a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"6"}},[a("h3",{staticClass:"my-4",staticStyle:{"padding-left":"15px"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.statistics.sell_month_day"))+" ")])]),a("v-col",{attrs:{cols:"12",sm:"5"}},[a("v-menu",{ref:"menu7",staticClass:"white--text",attrs:{"close-on-content-click":!1,"return-value":t.form.date_month,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},on:{"update:returnValue":function(e){return t.$set(t.form,"date_month",e)},"update:return-value":function(e){return t.$set(t.form,"date_month",e)}},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,r=e.attrs;return[a("v-text-field",t._g(t._b({staticStyle:{width:"200px","margin-top":"-10px"},attrs:{"prepend-inner-icon":"mdi-calendar",readonly:"",outlined:"",label:t.$vuetify.lang.t("$vuetify.statistics.cols.month.title"),dense:"","background-color":"white"},model:{value:t.form.date_month,callback:function(e){t.$set(t.form,"date_month",e)},expression:"form.date_month"}},"v-text-field",r,!1),s))]}}],null,!1,3004588804),model:{value:t.menu7,callback:function(e){t.menu7=e},expression:"menu7"}},[a("v-date-picker",{staticClass:"white--text",attrs:{type:"month","no-title":"",max:t.maxDate,scrollable:""},model:{value:t.form.date_month,callback:function(e){t.$set(t.form,"date_month",e)},expression:"form.date_month"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu7=!1}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.cancel"))+" ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.sell_month_day()}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.ok"))+" ")])],1)],1)],1),a("v-menu",{attrs:{right:"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-icon",t._g({staticClass:"ml-3",staticStyle:{"margin-top":"-30px"},attrs:{dark:"",fab:"",large:"",color:"primary"}},s),[t._v(" mdi-format-list-bulleted ")])]}}],null,!1,1410145220)},[a("v-list",{staticClass:"menu-app-bar"},[a("v-list-item",[a("v-list-item-title",[a("download-excel",{staticClass:"btn btn-default",attrs:{data:t.itemsDays.content,fields:t.json_fields,worksheet:"My Worksheet",name:"Statistiques du mois.xls"}},[a("v-btn",{staticClass:"white--text",attrs:{color:"primary"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.product.cols.export.titleXLS"))+" ")])],1)],1)],1),a("v-list-item",[a("v-list-item-title",[a("v-btn",{attrs:{dark:"",color:"primary"},on:{click:function(e){return t.export_month_day()}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.product.cols.export.titlePDF"))+" ")])],1)],1),a("v-list-item",[a("v-list-item-title",[a("v-btn",{attrs:{dark:"",color:"primary"},on:{click:function(e){return t.export_image_month_day()}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.product.cols.export.titlePNG"))+" ")])],1)],1)],1)],1)],1)],1),a("v-card-text",[a("v-card-text",[a("canvas",{staticStyle:{"margin-top":"-70px"},attrs:{height:"90vh",id:"day_chart"}})])],1)],1),a("br")],1)],1)],1):t._e()},r=[],o=(a("4160"),a("b64b"),a("d3b7"),a("159b"),a("b85c")),n=a("796e"),i=a("d9fa"),l=a("f2d9"),c=a("2b0e");c["a"].component("downloadExcel",l["a"]);var d=a("21a6"),u={name:"Dashboard",props:{form:{type:Object,default:function(){return{id:null,productAvailable:null,start_date_cat:null,start_date_month:null,end_date_month:null,date_month:null,end_date_cat:null}}}},data:function(){return{urlItemsStat_day_month:"/bills/stat_day_month",urlItems:"/bills/statistic_product",urlItemsDays:"/bills/statistic_product_days",loading:{list:!1,refresh:!1,filter:!1},sortBy:"turnover",headers:[],events:[],items:[],meta:{},turnover:null,gross_margin:null,searchAvailable:null,isLoadingAvailable:!1,itemsProductAvailable:[],urlProductPlus:"products",pagination:{},supply:!1,sortDesc:!0,itemPerPage:5,itemPerPageOptions:[5,10,30],maxDate:(new Date).toISOString().substr(0,10),maxDateStatMonth:(new Date).toISOString().substr(0,10),loadingBtn:!1,chartData:[],barChart:[],itemsDays:[],itemsDomaine:[],json_fields:{Date:"days",CA:"turnover"},json_fields_dom:{Domaine:"category",CA:"turnover"},items_best_selling:[],menu:!1,labels:[],values:[],menu3:!1,menu2:!1,menu4:!1,menu5:!1,menu6:!1,labelsDays:[],valuesDays:[],menu7:!1,chartOptions:{}}},mounted:function(){this.getItems(),this.sell_month_day()},components:{},created:function(){this.setHeaders()},watch:{searchAvailable:function(t){var e=this;if(null!==t){var a={name:t},s=this;this.isLoadingAvailable=!0,this.$store.dispatch("request",{url:s.urlProductPlus,params:a}).then((function(t){s.itemsProductAvailable=t.data.content})).finally((function(){return e.isLoadingAvailable=!1}))}},pagination:{handler:function(){this.getItems()},deep:!0}},computed:{get_ca_total:function(){var t=0;return this.items_best_selling.forEach((function(e){t+=e.turnover})),t},get_gross_margin_total:function(){var t=0;return this.items_best_selling.forEach((function(e){t+=e.gross_margin})),t},get_pourcent_ca_total:function(){var t=this,e=0;return this.items_best_selling.forEach((function(a){e+=a.turnover/t.get_ca_total})),e},getMinStatDate:function(){var t,e="";return e=null===(t=new Date(this.form.start_date_cat))||void 0===t?void 0:t.toISOString().substr(0,10),e},getminDateMonth:function(){var t,e="";return e=null===(t=new Date(this.form.start_date_month))||void 0===t?void 0:t.toISOString().substr(0,10),e},getminDateBestSell:function(){var t,e="";return e=null===(t=new Date(this.form.start_date_best_selling))||void 0===t?void 0:t.toISOString().substr(0,10),e}},methods:{refreshItems:function(){this.getItems(),this.sell_month_day()},setHeaders:function(){this.headers=[{text:"$vuetify.product.cols.name.title",value:"name",align:"start",sortable:!0,width:"15",class:"grey--text text--darken-3"},{text:"$vuetify.product.cols.category.title",value:"category",align:"start",sortable:!0,width:"1",class:"grey--text text--darken-3"},{text:"$vuetify.statistics.cols.quantity_served.title",value:"quantity_served",align:"start",sortable:!0,width:"1",class:"grey--text text--darken-3"},{text:"$vuetify.statistics.turnover",value:"turnover",align:"start",sortable:!0,width:"1",class:"grey--text text--darken-3"},{text:"$vuetify.statistics.gross_margin",value:"gross_margin",align:"start",sortable:!0,width:"1",class:"grey--text text--darken-3"},{text:"$vuetify.statistics.percent_turnover",value:"percent_turnover",align:"start",sortable:!0,width:"1",class:"grey--text text--darken-3"}]},getMethod:function(){return this.form.id?"PUT":"POST"},getItems:function(){var t=this,e=this;return new Promise((function(a,s){t.loading.list=!0,e.$store.dispatch("request",{url:e.urlItemsStat_day_month+"?type=surgery"}).then((function(t){var s=t.data;e.items=s.content,e.meta={totalElements:s.totalElements},a(t)})).catch((function(a){var r=t.$vuetify.lang.t("$vuetify.error_occured");if(a.response)if(400===a.response.status){var o=a.response.data;e.setFormErrors(o);var n=Object.keys(o)[0];n&&Array.isArray(o[n])&&(r=o[n][0])}else 403===a.response.status?r=e.$vuetify.lang.t("$vuetify.error_denied"):500===a.response.status&&(r=e.$vuetify.lang.t("$vuetify.error_server"));e.$store.dispatch("showNotification",{status:!0,text:r}),s(a)})).then((function(){e.loading.list=!1,a()}))}))},getDataForm:function(){var t={start_date_month:this.form.start_date_month,end_date_month:this.form.end_date_month,date_month:this.form.date_month,start_date_dom:this.form.start_date_cat,product_available:this.form.productAvailable,start_date_best_selling:this.form.start_date_best_selling,end_date_best_selling:this.form.end_date_best_selling,end_date_dom:this.form.end_date_cat};return t},sell_month_day:function(){var t=this;this.$refs.menu7.save(this.form.date_month);var e=this;return new Promise((function(a,s){t.loading.list=!0,e.$store.dispatch("request",{url:e.urlItemsDays+"?type=surgery",method:e.getMethod(),data:e.getDataForm()}).then((function(e){var s=e.data;t.itemsDays=e.data;var r=n["a"].getChart("day_chart");void 0!==r&&r.destroy(),t.labelsDays=[],t.valuesDays=[];var l,c=Object(o["a"])(s.content);try{for(c.s();!(l=c.n()).done;){var d=l.value;t.labelsDays.push(d.days),t.valuesDays.push(d.turnover)}}catch(u){c.e(u)}finally{c.f()}new n["a"](document.getElementById("day_chart"),{type:"bar",plugins:[i["a"]],options:{plugins:{datalabels:{display:!0,align:"middle",color:"white",font:{size:15}}}},data:{labels:t.labelsDays,datasets:[{label:"Chiffre d'affaires",backgroundColor:["#006B98"],borderColor:["#E9EEF4"],data:t.valuesDays,borderWidth:3}]}}),a(e)})).catch((function(a){var r=t.$vuetify.lang.t("$vuetify.error_occured");if(a.response)if(400===a.response.status){var o=a.response.data;e.setFormErrors(o);var n=Object.keys(o)[0];n&&Array.isArray(o[n])&&(r=o[n][0])}else 403===a.response.status?r=e.$vuetify.lang.t("$vuetify.error_denied"):500===a.response.status&&(r=e.$vuetify.lang.t("$vuetify.error_server"));e.$store.dispatch("showNotification",{status:!0,text:r}),s(a)})).then((function(){e.loading.list=!1,a()}))}))},export_image_month_day:function(){var t=document.getElementById("day_chart").toDataURL("image/png"),e=document.createElement("a");e.download="image",e.href=t,e.click()},export_month_day:function(){var t=this,e={type:"pdf"};this._.isEmpty(this._search)||(this._search=this._.merge(e,this._search)),t.$store.dispatch("request",{url:t.urlItemsDays,params:e,data:t.getDataForm(),method:t.getMethod(),responseType:"blob"}).then((function(t){var e="Statistiques mensuel",a=new Blob([t.data],{type:t.data.type});d.saveAs(a,e)})),this.$store.dispatch("showNotification",{statut:!1})},export_domaine:function(){var t=this,e={type:"pdf"};this._.isEmpty(this._search)||(this._search=this._.merge(e,this._search)),t.$store.dispatch("request",{url:t.urlItemsDom,params:e,data:t.getDataForm(),method:t.getMethod(),responseType:"blob"}).then((function(t){var e="Statistiques mensuel",a=new Blob([t.data],{type:t.data.type});d.saveAs(a,e)})),this.$store.dispatch("showNotification",{statut:!1})}}},_=u,v=(a("0840"),a("2877")),m=a("6544"),h=a.n(m),f=a("8336"),p=a("b0af"),y=a("99d9"),b=a("62ad"),g=a("a523"),x=a("2e4b"),w=a("ce87"),$=a("132d"),k=a("8860"),S=a("da13"),D=a("5d23"),I=a("e449"),C=a("0fd9"),M=a("2fa4"),z=a("8654"),A=Object(v["a"])(_,s,r,!1,null,"092dac28",null);e["default"]=A.exports;h()(A,{VBtn:f["a"],VCard:p["a"],VCardText:y["b"],VCol:b["a"],VContainer:g["a"],VDatePicker:x["a"],VHover:w["a"],VIcon:$["a"],VList:k["a"],VListItem:S["a"],VListItemTitle:D["d"],VMenu:I["a"],VRow:C["a"],VSpacer:M["a"],VTextField:z["a"]})}}]);
//# sourceMappingURL=chunk-714f33dc.71e65fcd.js.map