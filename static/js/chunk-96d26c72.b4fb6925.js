(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-96d26c72"],{"9a56":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return t._.includes(t.$auth.user().permissions,"view_dashboard_hospitalization")?e("v-app",{style:{background:t.$vuetify.theme.themes.dark.background},attrs:{id:"inspire"}},[e("br"),e("v-card",{attrs:{height:"50px",flat:"",color:"#FAFAFA"}},[e("v-card-text",[e("v-row",{attrs:{wrap:""}},[e("v-col",{staticStyle:{"margin-top":"-10px"},attrs:{cols:"12",sm:"2"}},[e("v-btn",{staticClass:"font-weight-bold white--text",attrs:{depressed:"",color:"btn_logout"},on:{click:function(a){return t.refreshItems()}}},[e("v-icon",{attrs:{left:"",color:"white"}},[t._v("mdi-refresh")]),t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.refresh"))+" ")],1)],1),e("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"10"}})],1)],1)],1),e("br"),e("v-row",[e("v-col",{staticClass:"mb-0 py-0 mt-2",attrs:{cols:"12",sm:"3"}},[e("v-card",{attrs:{height:"",flat:"",color:"#FAFAFA"}},[e("h3",{attrs:{align:"center"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.room.titleStat"))+" ")]),e("canvas",{attrs:{height:"1vh",id:"room_chart"}})])],1),e("v-col",{staticClass:"mb-0 py-0 mt-2",attrs:{cols:"12",sm:"3"}},[e("v-card",{attrs:{height:"",flat:"",color:"#FAFAFA"}},[e("h3",{attrs:{align:"center"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.room.cols.book.title"))+" ")]),e("canvas",{attrs:{height:"1vh",id:"room_book_chart"}})])],1),e("v-col",{staticClass:"mb-0 py-0 mt-2",attrs:{cols:"12",sm:"3"}},[e("v-card",{attrs:{height:"",flat:"",color:"#FAFAFA"}},[e("h3",{attrs:{align:"center"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.bed.titleStat"))+" ")]),e("canvas",{attrs:{height:"1vh",id:"bed_chart"}})])],1),e("v-col",{staticClass:"mb-0 py-0 mt-2",attrs:{cols:"12",sm:"3"}},[e("v-card",{attrs:{height:"",flat:"",color:"#FAFAFA"}},[e("h3",{attrs:{align:"center"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.hospitalization.titleStat"))+" ")]),e("canvas",{attrs:{height:"1vh",id:"status_chart"}})])],1)],1),e("br"),e("br"),e("v-card",{attrs:{height:"50px",flat:"",color:"#FAFAFA"}},[e("v-card-text",[e("v-row",{attrs:{wrap:""}},[e("v-col",{attrs:{cols:"12",sm:"2"}},[e("v-menu",{ref:"menu7",staticClass:"white--text",attrs:{"close-on-content-click":!1,"return-value":t.form.date_month,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},on:{"update:returnValue":function(a){return t.$set(t.form,"date_month",a)},"update:return-value":function(a){return t.$set(t.form,"date_month",a)}},scopedSlots:t._u([{key:"activator",fn:function(a){var o=a.on,s=a.attrs;return[e("v-text-field",t._g(t._b({staticStyle:{"margin-top":"-10px"},attrs:{"prepend-inner-icon":"mdi-calendar",readonly:"",outlined:"",label:t.$vuetify.lang.t("$vuetify.statistics.cols.month.title"),dense:"","background-color":"white"},model:{value:t.form.date_month,callback:function(a){t.$set(t.form,"date_month",a)},expression:"form.date_month"}},"v-text-field",s,!1),o))]}}],null,!1,3276229806),model:{value:t.menu7,callback:function(a){t.menu7=a},expression:"menu7"}},[e("v-date-picker",{staticClass:"white--text",attrs:{type:"month","no-title":"",max:t.maxDate,scrollable:""},model:{value:t.form.date_month,callback:function(a){t.$set(t.form,"date_month",a)},expression:"form.date_month"}},[e("v-spacer"),e("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(a){t.menu7=!1}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.cancel"))+" ")]),e("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(a){t.sell_month_day(),t.sell_accommodation_month_day()}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.ok"))+" ")])],1)],1)],1),e("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"10"}})],1)],1)],1),e("br"),e("v-row",[e("v-col",{staticClass:"mb-0 py-0 mt-2",attrs:{cols:"12",sm:"12"}},[e("v-card",{attrs:{height:"",flat:"",color:"#FAFAFA"}},[e("v-card-text",[e("v-row",{attrs:{wrap:""}},[e("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"11"}},[e("h3",{staticClass:"my-4",staticStyle:{"padding-left":"15px"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.statistics.sell_month_day"))+" ")])]),e("v-menu",{attrs:{right:"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function(a){var o=a.on;return[e("v-icon",t._g({staticClass:"ml-3",staticStyle:{"margin-top":"-30px"},attrs:{dark:"",fab:"",large:"",color:"primary"}},o),[t._v(" mdi-format-list-bulleted ")])]}}],null,!1,1410145220)},[e("v-list",{staticClass:"menu-app-bar"},[e("v-list-item",[e("v-list-item-title",[e("download-excel",{staticClass:"btn btn-default",attrs:{data:t.itemsDays.content,fields:t.json_fields,worksheet:"My Worksheet",name:"Statistiques du mois.xls"}},[e("v-btn",{staticClass:"white--text",attrs:{color:"primary"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.product.cols.export.titleXLS"))+" ")])],1)],1)],1),e("v-list-item",[e("v-list-item-title",[e("v-btn",{attrs:{dark:"",color:"primary"},on:{click:function(a){return t.export_month_day()}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.product.cols.export.titlePDF"))+" ")])],1)],1),e("v-list-item",[e("v-list-item-title",[e("v-btn",{attrs:{dark:"",color:"primary"},on:{click:function(a){return t.export_image_month_day()}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.product.cols.export.titlePNG"))+" ")])],1)],1)],1)],1)],1)],1),e("br"),e("v-card-text",[e("v-card-text",[e("canvas",{staticStyle:{"margin-top":"-70px"},attrs:{height:"90vh",id:"day_chart"}})])],1)],1)],1),e("v-col",{staticClass:"mb-0 py-0 mt-2",attrs:{cols:"12",sm:"12"}},[e("v-card",{attrs:{height:"",flat:"",color:"#FAFAFA"}},[e("v-card-text",[e("v-row",{attrs:{wrap:""}},[e("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"11"}},[e("h3",{staticClass:"my-4",staticStyle:{"padding-left":"15px"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.hospitalization.cols.type_accommodation.title"))+" ")])]),e("v-menu",{attrs:{right:"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function(a){var o=a.on;return[e("v-icon",t._g({staticClass:"ml-3",staticStyle:{"margin-top":"-30px"},attrs:{dark:"",fab:"",large:"",color:"primary"}},o),[t._v(" mdi-format-list-bulleted ")])]}}],null,!1,1410145220)},[e("v-list",{staticClass:"menu-app-bar"},[e("v-list-item",[e("v-list-item-title",[e("download-excel",{staticClass:"btn btn-default",attrs:{data:t.itemsDays.content,fields:t.json_fields,worksheet:"My Worksheet",name:"Statistiques du mois.xls"}},[e("v-btn",{staticClass:"white--text",attrs:{color:"primary"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.product.cols.export.titleXLS"))+" ")])],1)],1)],1),e("v-list-item",[e("v-list-item-title",[e("v-btn",{attrs:{dark:"",color:"primary"},on:{click:function(a){return t.export_accommodation_month_day()}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.product.cols.export.titlePDF"))+" ")])],1)],1),e("v-list-item",[e("v-list-item-title",[e("v-btn",{attrs:{dark:"",color:"primary"},on:{click:function(a){return t.export_image_accommodation_month_day()}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.product.cols.export.titlePNG"))+" ")])],1)],1)],1)],1)],1)],1),e("br"),e("v-card-text",[e("v-card-text",[e("canvas",{staticStyle:{"margin-top":"-70px"},attrs:{height:"90vh",id:"accommodation_chart"}})])],1)],1)],1)],1)],1):t._e()},s=[],r=(e("b64b"),e("d3b7"),e("ddb0"),e("b85c")),i=e("796e"),l=e("d9fa"),n=e("f2d9"),c=e("2b0e");c["a"].component("downloadExcel",n["a"]);var d=e("21a6"),m={name:"Home",props:{form:{type:Object,default:function(){return{id:null,productAvailable:null,start_date_cat:null,start_date_month:null,end_date_month:null,date_month:null,date_month_accommodation:null,end_date_cat:null}}}},data:function(){return{urlItemsStatSecretariat:"/rooms/stat_room",urlItemsStatHospitalization:"/hospitalizations/statistics",urlItemsDays:"/bills/statistic_product_days",urlItemsDaysAccommodation:"/bills/statistic_accommodation",items:[],itemsDays:[],itemsDaysAccommodation:[],json_fields:{Date:"days",CA:"turnover"},labels:[],values:[],maxDate:(new Date).toISOString().substr(0,10),loading:{list:!1,refresh:!1,filter:!1},loadingAccommodation:{list:!1,refresh:!1,filter:!1},menu7:!1,menu6:!1,labelsRoomTakes:[],valuesRoomTakes:[],labelsBedTakes:[],valuesBedTakes:[],labelsRoomBook:[],valuesRoomBook:[],labelsDaysAccommodation:[],valuesDaysAccommodationk:[],labelsDays:[],valuesDays:[]}},mounted:function(){this.getItems(),this.sell_month_day(),this.sell_accommodation_month_day()},methods:{refreshItems:function(){this.getItems(),this.sell_month_day(),this.sell_accommodation_month_day()},export_image_month_day:function(){var t=document.getElementById("day_chart").toDataURL("image/png"),a=document.createElement("a");a.download="image",a.href=t,a.click()},export_image_accommodation_month_day:function(){var t=document.getElementById("accommodation_chart").toDataURL("image/png"),a=document.createElement("a");a.download="image",a.href=t,a.click()},getMethod:function(){return this.form.id?"PUT":"POST"},export_month_day:function(){var t=this,a={type:"pdf"};this._.isEmpty(this._search)||(this._search=this._.merge(a,this._search)),t.$store.dispatch("request",{url:t.urlItemsDays,params:a,data:t.getDataForm(),method:t.getMethod(),responseType:"blob"}).then((function(t){var a="Statistiques mensuel",e=new Blob([t.data],{type:t.data.type});d.saveAs(e,a)})),this.$store.dispatch("showNotification",{statut:!1})},export_accommodation_month_day:function(){var t=this,a={type:"pdf"};this._.isEmpty(this._search)||(this._search=this._.merge(a,this._search)),t.$store.dispatch("request",{url:t.urlItemsDays,params:a,data:t.getDataForm(),method:t.getMethod(),responseType:"blob"}).then((function(t){var a="Statistiques mensuel",e=new Blob([t.data],{type:t.data.type});d.saveAs(e,a)})),this.$store.dispatch("showNotification",{statut:!1})},getDataForm:function(){var t={date_month_accommodation:this.form.date_month,date_month:this.form.date_month,start_date_dom:this.form.start_date_cat,product_available:this.form.productAvailable,start_date_best_selling:this.form.start_date_best_selling,end_date_best_selling:this.form.end_date_best_selling,end_date_dom:this.form.end_date_cat};return t},sell_month_day:function(){var t=this;this.$refs.menu7.save(this.form.date_month);var a=this;return new Promise((function(e,o){t.loading.list=!0,a.$store.dispatch("request",{url:a.urlItemsDays+"?type=hospitalization",method:a.getMethod(),data:a.getDataForm()}).then((function(a){var o=a.data;t.itemsDays=a.data;var s=i["a"].getChart("day_chart");void 0!==s&&s.destroy(),t.labelsDays=[],t.valuesDays=[];var n,c=Object(r["a"])(o.content);try{for(c.s();!(n=c.n()).done;){var d=n.value;t.labelsDays.push(d.days),t.valuesDays.push(d.turnover)}}catch(m){c.e(m)}finally{c.f()}new i["a"](document.getElementById("day_chart"),{type:"bar",plugins:[l["a"]],options:{plugins:{datalabels:{display:!0,align:"middle",color:"white",font:{size:15}}}},data:{labels:t.labelsDays,datasets:[{label:"Chiffre d'affaires",backgroundColor:["#006B98"],borderColor:["#E9EEF4"],data:t.valuesDays,borderWidth:3}]}}),e(a)})).catch((function(e){var s=t.$vuetify.lang.t("$vuetify.error_occured");if(e.response)if(400===e.response.status){var r=e.response.data;a.setFormErrors(r);var i=Object.keys(r)[0];i&&Array.isArray(r[i])&&(s=r[i][0])}else 403===e.response.status?s=a.$vuetify.lang.t("$vuetify.error_denied"):500===e.response.status&&(s=a.$vuetify.lang.t("$vuetify.error_server"));a.$store.dispatch("showNotification",{status:!0,text:s}),o(e)})).then((function(){a.loading.list=!1,e()}))}))},sell_accommodation_month_day:function(){var t=this;this.$refs.menu7.save(this.form.date_month);var a=this;return new Promise((function(e,o){t.loadingAccommodation.list=!0,a.$store.dispatch("request",{url:a.urlItemsDaysAccommodation,method:a.getMethod(),data:a.getDataForm()}).then((function(a){var o=a.data;t.itemsDaysAccommodation=a.data;var s=i["a"].getChart("accommodation_chart");void 0!==s&&s.destroy(),t.labelsDaysAccommodation=[],t.valuesDaysAccommodation=[];var n,c=Object(r["a"])(o.content);try{for(c.s();!(n=c.n()).done;){var d=n.value;t.labelsDaysAccommodation.push(t.$vuetify.lang.t("$vuetify.hospitalization.cols.type_accommodation."+d.accommodation)),t.valuesDaysAccommodation.push(d.turnover)}}catch(m){c.e(m)}finally{c.f()}new i["a"](document.getElementById("accommodation_chart"),{type:"bar",plugins:[l["a"]],options:{plugins:{datalabels:{display:!0,align:"middle",color:"white",font:{size:15}}}},data:{labels:t.labelsDaysAccommodation,datasets:[{label:"Chiffre d'affaires",backgroundColor:["#006B98"],borderColor:["#E9EEF4"],data:t.valuesDaysAccommodation,borderWidth:3}]}}),e(a)})).catch((function(e){var s=t.$vuetify.lang.t("$vuetify.error_occured");if(e.response)if(400===e.response.status){var r=e.response.data;a.setFormErrors(r);var i=Object.keys(r)[0];i&&Array.isArray(r[i])&&(s=r[i][0])}else 403===e.response.status?s=a.$vuetify.lang.t("$vuetify.error_denied"):500===e.response.status&&(s=a.$vuetify.lang.t("$vuetify.error_server"));a.$store.dispatch("showNotification",{status:!0,text:s}),o(e)})).then((function(){a.loadingAccommodation.list=!1,e()}))}))},getItems:function(){var t=this,a=this;return new Promise((function(e){a.$store.dispatch("request",{url:a.urlItemsStatHospitalization}).then((function(o){var s=o.data;a.items=s.content;var l=i["a"].getChart("status_chart");void 0!==l&&l.destroy(),t.labels=[],t.values=[];var n=i["a"].getChart("room_chart");void 0!==n&&n.destroy(),t.labelsRoomTakes=[],t.valuesRoomTakes=[];var c=i["a"].getChart("bed_chart");void 0!==c&&c.destroy(),t.labelsBedTakes=[],t.valuesBedTakes=[];var d=i["a"].getChart("room_book_chart");void 0!==d&&d.destroy(),t.labelsRoomBook=[],t.valuesRoomBook=[];var m,u=Object(r["a"])(s.content.status_occupation);try{for(u.s();!(m=u.n()).done;){var v=m.value;t.labels.push(t.$vuetify.lang.t("$vuetify.hospitalization.cols.status_occupation."+v.statut)),t.values.push(v.total)}}catch(x){u.e(x)}finally{u.f()}new i["a"](document.getElementById("status_chart"),{type:"doughnut",data:{labels:t.labels,datasets:[{label:"Total",backgroundColor:["#3a90cd","#8e5ea2"],borderColor:["#E9EEF4"],data:t.values,borderWidth:3}]},options:{plugins:{doughnutlabel:{labels:[{text:"550",font:{size:20}},{text:"total"}]}}}});var h,f=Object(r["a"])(s.content.room_take);try{for(f.s();!(h=f.n()).done;){var y=h.value;t.labelsRoomTakes.push(t.$vuetify.lang.t("$vuetify.room.cols.takes."+y.isTakes)),t.valuesRoomTakes.push(y.total)}}catch(x){f.e(x)}finally{f.f()}new i["a"](document.getElementById("room_chart"),{type:"doughnut",data:{labels:t.labelsRoomTakes,datasets:[{label:"Total",backgroundColor:["#3a90cd","#8e5ea2"],borderColor:["#E9EEF4"],data:t.valuesRoomTakes,borderWidth:3}]},options:{plugins:{doughnutlabel:{labels:[{text:"550",font:{size:20}},{text:"total"}]}}}});var _,p=Object(r["a"])(s.content.bed_take);try{for(p.s();!(_=p.n()).done;){var b=_.value;t.labelsBedTakes.push(t.$vuetify.lang.t("$vuetify.bed.cols.takes."+b.isTakes)),t.valuesBedTakes.push(b.total)}}catch(x){p.e(x)}finally{p.f()}new i["a"](document.getElementById("bed_chart"),{type:"doughnut",data:{labels:t.labelsBedTakes,datasets:[{label:"Total",backgroundColor:["#3a90cd","#8e5ea2"],borderColor:["#E9EEF4"],data:t.valuesBedTakes,borderWidth:3}]},options:{plugins:{doughnutlabel:{labels:[{text:"550",font:{size:20}},{text:"total"}]}}}});var g,k=Object(r["a"])(s.content.room_book);try{for(k.s();!(g=k.n()).done;){var $=g.value;t.labelsRoomBook.push(t.$vuetify.lang.t("$vuetify.room.cols.book."+$.isBook)),t.valuesRoomBook.push($.total)}}catch(x){k.e(x)}finally{k.f()}new i["a"](document.getElementById("room_book_chart"),{type:"doughnut",data:{labels:t.labelsRoomBook,datasets:[{label:"Total",backgroundColor:["#3a90cd","#8e5ea2"],borderColor:["#E9EEF4"],data:t.valuesRoomBook,borderWidth:3}]},options:{plugins:{doughnutlabel:{labels:[{text:"550",font:{size:20}},{text:"total"}]}}}}),e(o)}))}))}},components:{}},u=m,v=(e("f265"),e("2877")),h=e("6544"),f=e.n(h),y=e("7496"),_=e("8336"),p=e("b0af"),b=e("99d9"),g=e("62ad"),k=e("2e4b"),$=e("132d"),x=e("8860"),w=e("da13"),A=e("5d23"),C=e("e449"),D=e("0fd9"),F=e("2fa4"),E=e("8654"),B=Object(v["a"])(u,o,s,!1,null,"d7097258",null);a["default"]=B.exports;f()(B,{VApp:y["a"],VBtn:_["a"],VCard:p["a"],VCardText:b["b"],VCol:g["a"],VDatePicker:k["a"],VIcon:$["a"],VList:x["a"],VListItem:w["a"],VListItemTitle:A["d"],VMenu:C["a"],VRow:D["a"],VSpacer:F["a"],VTextField:E["a"]})},f265:function(t,a,e){"use strict";var o=e("ff48"),s=e.n(o);s.a},ff48:function(t,a,e){}}]);
//# sourceMappingURL=chunk-96d26c72.b4fb6925.js.map