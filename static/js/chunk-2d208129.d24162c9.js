(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d208129"],{a2df:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"title mb-5 black--text lighten-5 text-center",staticStyle:{height:"30px","margin-top":"30px","background-color":"#e9eef4"}},[e._v(" "+e._s(e.$vuetify.lang.t("$vuetify.employeeMission.list.title"))+" ")]),s("discipline",{attrs:{color:"black"}})],1)},n=[],a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("v-card",{staticClass:"pb-4"},[s("div",{staticClass:"mt-5 mx-5"},[e._.includes(this.$auth.user().permissions,"add_employeemission")?[s("v-btn",{staticClass:"mr-2 my-2",attrs:{color:"primary",dark:""},on:{click:function(t){return e.create()}}},[s("v-icon",{attrs:{left:""}},[e._v("mdi-blur-radial")]),e._v(" "+e._s(e.$vuetify.lang.t("$vuetify.btn.add"))+" ")],1)]:e._e(),s("v-btn",{staticClass:"mr-2 my-2",attrs:{loading:e.loading.refresh,depressed:"",color:"#f1f5fc"},on:{click:function(t){return e.refreshItems()}}},[s("v-icon",{attrs:{left:"",color:"primary"}},[e._v("mdi-refresh")]),e._v(" "+e._s(e.$vuetify.lang.t("$vuetify.btn.refresh"))+" ")],1),s("v-spacer")],2)]),s("br"),s("v-card",{staticClass:"pb-4"},[s("v-card-title",[s("div",{staticClass:"title"},[e._v(" "+e._s(e.$vuetify.lang.t("$vuetify.employeeMission.filter"))+" ")])]),s("v-card-text",[s("v-row",{attrs:{wrap:""}},[s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"6"}},[s("v-autocomplete",{staticClass:"font-weight-bold",attrs:{dense:"",items:e.itemsEmployee,loading:e.isLoadingEmployee,"search-input":e.searchEmployee,label:e.$vuetify.lang.t("$vuetify.employee.title"),color:"primary","item-text":"name","hide-no-data":"","item-value":"id","prepend-inner-icon":"mdi-code-array",outlined:"",clearable:""},on:{"update:searchInput":function(t){e.searchEmployee=t},"update:search-input":function(t){e.searchEmployee=t}},scopedSlots:e._u([{key:"selection",fn:function(t){return[e._v(" "+e._s(t.item.lastName)+" - "+e._s(t.item.firstName)+" ")]}},{key:"item",fn:function(t){return[e._v(" "+e._s(t.item.lastName)+" - "+e._s(t.item.firstName)+" ")]}},{key:"label",fn:function(){return[s("span",{staticClass:"red--text"},[s("strong",[e._v("* ")])]),e._v(e._s(e.$vuetify.lang.t("$vuetify.employee.title"))+" ")]},proxy:!0}]),model:{value:e.form.employee,callback:function(t){e.$set(e.form,"employee",t)},expression:"form.employee"}})],1)],1)],1)],1),s("v-card",[s("v-data-table",{staticClass:"mt-5",attrs:{"footer-props":{"items-per-page-options":e.itemPerPageOptions},headers:e.headers,items:e.items,"items-per-page":e.itemPerPage,loading:e.loading.list,options:e.pagination,"server-items-length":e.meta.totalElements,"sort-by":e.sortBy,"sort-desc":e.sortDesc,"item-key":"name"},on:{"update:options":function(t){e.pagination=t}},scopedSlots:e._u([{key:"header.employee",fn:function(t){var i=t.header;return[s("tr",[e._v(" "+e._s(e.$vuetify.lang.t(i.text))+" ")])]}},{key:"header.destination",fn:function(t){var i=t.header;return[s("tr",[e._v(" "+e._s(e.$vuetify.lang.t(i.text))+" ")])]}},{key:"header.reason",fn:function(t){var i=t.header;return[s("tr",[e._v(" "+e._s(e.$vuetify.lang.t(i.text))+" ")])]}},{key:"header.means_transport",fn:function(t){var i=t.header;return[s("tr",[e._v(" "+e._s(e.$vuetify.lang.t(i.text))+" ")])]}},{key:"header.startDate",fn:function(t){var i=t.header;return[s("tr",[e._v(" "+e._s(e.$vuetify.lang.t(i.text))+" ")])]}},{key:"header.endDate",fn:function(t){var i=t.header;return[s("tr",[e._v(" "+e._s(e.$vuetify.lang.t(i.text))+" ")])]}},{key:"header.created",fn:function(t){var i=t.header;return[s("tr",[e._v(" "+e._s(e.$vuetify.lang.t(i.text))+" ")])]}},{key:"header.null",fn:function(t){var i=t.header;return[s("tr",[e._v(" "+e._s(e.$vuetify.lang.t(i.text))+" ")])]}},{key:"body",fn:function(t){var i=t.items;return[s("v-hover",{scopedSlots:e._u([{key:"default",fn:function(t){var n=t.hover;return s("tbody",{},e._l(i,(function(t){return s("tr",{key:t.id},[s("td",{staticClass:"subtitle-2"},[e._v(" "+e._s(t.employee.lastName)+" "+e._s(t.employee.firstName)+" ")]),s("td",{staticClass:"subtitle-2"},[e._v(" "+e._s(t.destination)+" ")]),s("td",{staticClass:"subtitle-2"},[e._v(" "+e._s(t.reason)+" ")]),s("td",{staticClass:"subtitle-2"},[e._v(" "+e._s(t.means_transport)+" ")]),s("td",{staticClass:"subtitle-2"},[e._v(" "+e._s(t.startDate)+" ")]),s("td",{staticClass:"subtitle-2"},[e._v(" "+e._s(t.endDate)+" ")]),s("td",{staticClass:"subtitle-2"},[e._v(" "+e._s(e.$moment(t.createdAt).format("YYYY-MM-DD HH:mm:ss"))+" ")]),s("td",{staticClass:"subtitle-2"},[[s("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([e._.includes(e.$auth.user().permissions,"change_employeemission")?{key:"activator",fn:function(i){var a=i.on;return[s("v-btn",e._g({directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.smAndDown||n,expression:"$vuetify.breakpoint.smAndDown || hover"}],attrs:{color:"secondary",icon:"",text:""},on:{click:function(s){return e.editDiscipline(t)}}},a),[s("v-icon",[e._v("mdi-update")])],1)]}}:null],null,!0)},[s("span",[e._v(e._s(e.$vuetify.lang.t("$vuetify.btn.edit")))])]),s("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([e._.includes(e.$auth.user().permissions,"change_employeemission")?{key:"activator",fn:function(i){var a=i.on;return[s("v-btn",e._g({directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.smAndDown||n,expression:"$vuetify.breakpoint.smAndDown || hover"}],attrs:{color:"secondary",icon:"",text:""},on:{click:function(s){return e.print(t)}}},a),[s("v-icon",[e._v("mdi-file-document")])],1)]}}:null],null,!0)},[s("span",[e._v(e._s(e.$vuetify.lang.t("$vuetify.employeeMission.list.doc")))])]),s("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([e._.includes(e.$auth.user().permissions,"delete_employeemission")?{key:"activator",fn:function(i){var a=i.on;return[s("v-btn",e._g({directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.smAndDown||n,expression:"$vuetify.breakpoint.smAndDown || hover"}],attrs:{color:"red",icon:"",text:"",dark:""},on:{click:function(s){return e.deleteItem(t)}}},a),[s("v-icon",[e._v("mdi-delete-outline")])],1)]}}:null],null,!0)},[s("span",[e._v(e._s(e.$vuetify.lang.t("$vuetify.btn.remove")))])])]],2)])})),0)}}],null,!0)})]}}])}),s("form-pdf",{ref:"pdfForm",attrs:{dialog:e.dialogFormPdf}}),s("form-discipline",{ref:"disciplineForm",attrs:{dialog:e.dialogForm,form:e.form,messages:e.messages},on:{getItems:e.getItems}}),s("delete-item",{attrs:{dialog:e.dialogDelete,messages:e.messagesDelete,urlItems:e.urlDeleteItems},on:{getItems:e.getItems}})],1)],1)},o=[],r=(s("4de4"),s("d3b7"),s("3ca3"),s("ddb0"),s("2b3d"),s("24a2")),l=s("92ff"),u=s("cd41"),c=s("8980"),d={mixins:[r["a"]],data:function(){return{urlItems:"/employeeMissions",urlEmployee:"employees/all",isLoadingEmployee:!1,searchEmployee:null,itemsEmployee:[],urlbonus:"performanceBonus",isLoadingbonus:!1,searchbonus:null,itemsbonus:[],sortBy:["id"],dialogForm:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogFormPdf:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogDelete:{show:!1},dialogDetail:{show:!1},dialogEnt:{show:!1},form:{id:null,title:null},filter:{employee:null,bonus:null},messages:{title:"",submit:"",success:""},messagesDelete:{success:"$vuetify.discipline.delete.success"}}},watch:{searchEmployee:function(e){var t=this;if(null!==e){var s={name:e},i=this;this.isLoadingEmployee=!0,this.$store.dispatch("request",{url:i.urlEmployee,params:s}).then((function(e){i.itemsEmployee=e.data.content})).finally((function(){return t.isLoadingEmployee=!1}))}},searchbonus:function(e){var t=this;if(null!==e){var s={name:e},i=this;this.isLoadingbonus=!0,this.$store.dispatch("request",{url:i.urlbonus,params:s}).then((function(e){i.itemsbonus=e.data.content})).finally((function(){return t.isLoadingbonus=!1}))}}},methods:{setHeaders:function(){this.headers=[{text:"$vuetify.employee.title",value:"employee",align:"start",sortable:!0,width:"50",class:"grey--text text--darken-3"},{text:"$vuetify.employeeMission.cols.destination.title",value:"destination",align:"start",sortable:!0,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.employeeMission.cols.reason.title",value:"reason",align:"start",sortable:!0,width:"105",class:"grey--text text--darken-3"},{text:"$vuetify.employeeMission.cols.means_transport.title",value:"means_transport",align:"start",sortable:!0,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.employeeMission.cols.startDate.title",value:"created",align:"start",sortable:!0,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.employeeMission.cols.endDate.title",value:"endDate",align:"start",sortable:!0,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.employeeMission.cols.created.title",value:"created",align:"start",sortable:!0,width:"105",class:"grey--text text--darken-3"},{text:"$vuetify.shape.cols.actions.title",value:null,align:"start",sortable:!0,width:"80"}]},editPdf:function(e){this.dialogFormPdf.show=!0,this.$refs.pdfForm.setForm(e)},print:function(e){var t=this;this.$store.dispatch("showNotification",{statut:!1});var s=this;this.loadingBtn=!0,this.$store.dispatch("request",{url:s.urlItems+"/print?id="+e.id,method:"POST"}).then((function(e){var s=new Blob([e.data],{type:e.data.type}),i=URL.createObjectURL(s);t.editPdf(i)})).catch((function(e){var i;if(400===e.response.status){i="$vuetify.error_occured";var n=e.response.data;s.setFormErrors(n),t.$forceUpdate()}else i="$vuetify.error_server";s.$store.dispatch("showNotification",{statut:!0,text:s.$vuetify.lang.t(i),color:"#B71C1C"})})).then((function(){s.loadingBtn=!1}))},create:function(){this.dialogForm.show=!0,this.messages={title:"$vuetify.employeeMission.new.title",submit:"$vuetify.employeeMission.new.submit",success:"$vuetify.employeeMission.new.success"},this.form={id:null,title:null}},editDiscipline:function(e){this.dialogForm.show=!0,this.messages={title:"$vuetify.employeeMission.update.title",submit:"$vuetify.employeeMission.update.submit",success:"$vuetify.employeeMission.update.success"},this.$refs.disciplineForm.setForm(e)},performFilter:function(){var e=this;e.loading.list=!0;var t={};null!==e.filter.emlyee&&(t["employee"]=e.filter.employee),null!==e.filter.bonus&&(t["bonus"]=e.filter.bonus),e._search=t,e.getItems().then((function(){e.$refs.filterForm.closeDialog()})).finally((function(){e.$refs.filterForm.stopLoadingBtn()}))}},components:{FormDiscipline:l["a"],DeleteItem:u["a"],FormPdf:c["a"]}},m=d,f=s("2877"),v=s("6544"),p=s.n(v),y=s("c6a6"),h=s("8336"),g=s("b0af"),_=s("99d9"),b=s("62ad"),$=s("8fea"),w=s("ce87"),x=s("132d"),k=s("0fd9"),D=s("2fa4"),C=s("3a2f"),F=Object(f["a"])(m,a,o,!1,null,"041bf94c",null),E=F.exports;p()(F,{VAutocomplete:y["a"],VBtn:h["a"],VCard:g["a"],VCardText:_["b"],VCardTitle:_["c"],VCol:b["a"],VDataTable:$["a"],VHover:w["a"],VIcon:x["a"],VRow:k["a"],VSpacer:D["a"],VTooltip:C["a"]});var M={metaInfo:function(){return{title:this.$vuetify.lang.t("$vuetify.employeeMission.title")}},data:function(){return{}},components:{Discipline:E}},I=M,V=Object(f["a"])(I,i,n,!1,null,null,null);t["default"]=V.exports}}]);
//# sourceMappingURL=chunk-2d208129.d24162c9.js.map