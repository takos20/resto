(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0f104c"],{"9f9b":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"","max-width":"1100px"},model:{value:t.dialog.show,callback:function(e){t.$set(t.dialog,"show",e)},expression:"dialog.show"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"#f5f5f5",dense:""}},[a("div",{staticClass:"title",staticStyle:{color:"black"}},[t._v(" "+t._s(t.$vuetify.lang.t(t.messages.title))+" ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",light:""},on:{click:function(e){t.forceRefresh(),t.resetDataForm()}}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("v-card",[a("br"),a("v-form",[a("v-card-text",[a("v-row",{attrs:{wrap:""}},[a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"3"}},[a("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.supplies.cols.code.title"),"prepend-inner-icon":"mdi-code-array mdi-dark mdi-18px",outlined:"",dense:"",filled:"",readonly:""},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"3"}},[a("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.complaints.cols.date.title"),"prepend-inner-icon":"mdi-calendar mdi-dark mdi-18px",outlined:"",dense:"",readonly:"",filled:""},model:{value:t.form.complaints_date,callback:function(e){t.$set(t.form,"complaints_date",e)},expression:"form.complaints_date"}})],1),a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"3"}},[a("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.complaints.cols.responsible.title"),"prepend-inner-icon":"mdi-account mdi-dark mdi-18px",outlined:"",dense:""},model:{value:t.form.responsible,callback:function(e){t.$set(t.form,"responsible",e)},expression:"form.responsible"}})],1),a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"3"}},[a("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.complaints.cols.delivery_person.title"),"prepend-inner-icon":"mdi-account mdi-dark mdi-18px",outlined:"",dense:""},model:{value:t.form.delivery_person,callback:function(e){t.$set(t.form,"delivery_person",e)},expression:"form.delivery_person"}})],1),a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"3"}},[a("v-autocomplete",{staticClass:"font-weight-bold",attrs:{items:t.itemsSuppliers,loading:t.isLoadingSuppliers,"search-input":t.searchSuppliers,color:"primary","item-text":"name","item-value":"id",label:t.$vuetify.lang.t("$vuetify.supplies.cols.supplier.title"),"prepend-inner-icon":"mdi-account mdi-dark mdi-18px",outlined:"",autofocus:"",dense:"",clearable:""},on:{"update:searchInput":function(e){t.searchSuppliers=e},"update:search-input":function(e){t.searchSuppliers=e}},model:{value:t.form.suppliers,callback:function(e){t.$set(t.form,"suppliers",e)},expression:"form.suppliers"}})],1),a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"6"}},[a("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.complaints.cols.witnesses.title"),"prepend-inner-icon":"mdi-account-multiple mdi-dark mdi-18px",outlined:"",dense:""},model:{value:t.form.witnesses,callback:function(e){t.$set(t.form,"witnesses",e)},expression:"form.witnesses"}})],1),a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"3"}},[a("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.purchase_order.cols.delivery_number.title"),"prepend-inner-icon":"mdi-numeric mdi-dark mdi-18px",outlined:"",dense:""},model:{value:t.form.delivery_number,callback:function(e){t.$set(t.form,"delivery_number",e)},expression:"form.delivery_number"}})],1)],1)],1),a("v-divider",{staticClass:"mx-4",staticStyle:{"margin-top":"-10px"}})],1),a("v-form",{staticStyle:{"margin-top":"10px"},on:{submit:function(e){return e.preventDefault(),t.saveDetails.apply(null,arguments)}}},[a("v-card-text",[a("v-row",{attrs:{wrap:""}},["laboratory"===this.$route.params.idD?a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"2"}},[a("v-select",{staticClass:"font-weight-bold",attrs:{color:"primary",items:t.optionType.type_product,label:t.$vuetify.lang.t("$vuetify.supplies.cols.type_product.title"),placeholder:t.$vuetify.lang.t("$vuetify.supplies.cols.type_product.title"),"prepend-inner-icon":"mdi-gender-male-female mdi-dark mdi-18px",outlined:"",dense:""},scopedSlots:t._u([{key:"label",fn:function(){return[a("span",{staticClass:"red--text"},[a("strong",[t._v("* ")])]),t._v(t._s(t.$vuetify.lang.t("$vuetify.supplies.cols.type_product.title"))+" ")]},proxy:!0}],null,!1,1815843071),model:{value:t.formData.type_product,callback:function(e){t.$set(t.formData,"type_product",e)},expression:"formData.type_product"}})],1):t._e(),"pharmacy"===this.$route.params.idD?a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"2"}},[a("v-autocomplete",{staticClass:"font-weight-bold",attrs:{items:t.itemsProduct,loading:t.isLoading,"search-input":t.search,color:"primary","item-text":"name","item-value":"id","return-object":"",label:t.$vuetify.lang.t("$vuetify.supplies.cols.product_name.title"),outlined:"",dense:"",clearable:""},on:{"update:searchInput":function(e){t.search=e},"update:search-input":function(e){t.search=e}},model:{value:t.formData.product,callback:function(e){t.$set(t.formData,"product",e)},expression:"formData.product"}})],1):t._e(),"laboratory"===this.$route.params.idD&&"REAGENT"===this.formData.type_product?a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"2"}},[a("v-autocomplete",{staticClass:"font-weight-bold",attrs:{items:t.itemsReagent,loading:t.isLoadingReagent,"search-input":t.searchReagent,color:"primary","item-text":"name","item-value":"id","return-object":"",label:t.$vuetify.lang.t("$vuetify.reagent.title"),outlined:"",dense:"",clearable:""},on:{"update:searchInput":function(e){t.searchReagent=e},"update:search-input":function(e){t.searchReagent=e}},model:{value:t.formData.reagent,callback:function(e){t.$set(t.formData,"reagent",e)},expression:"formData.reagent"}})],1):t._e(),"laboratory"===this.$route.params.idD&&"CONSUMABLE"===this.formData.type_product?a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"2"}},[a("v-autocomplete",{staticClass:"font-weight-bold",attrs:{items:t.itemsConsumable,loading:t.isLoadingConsumable,"search-input":t.searchConsumable,color:"primary","item-text":"name","item-value":"id","return-object":"",label:t.$vuetify.lang.t("$vuetify.consumable.title"),outlined:"",dense:"",clearable:""},on:{"update:searchInput":function(e){t.searchConsumable=e},"update:search-input":function(e){t.searchConsumable=e}},model:{value:t.formData.consumable,callback:function(e){t.$set(t.formData,"consumable",e)},expression:"formData.consumable"}})],1):t._e(),a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"2"}},[a("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.supplies.cols.product_code.title"),outlined:"",dense:"",readonly:"",filled:""},model:{value:t.get_product_code,callback:function(e){t.get_product_code=e},expression:"get_product_code"}})],1),a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"3"}},[a("v-select",{staticClass:"font-weight-bold",attrs:{color:"primary",items:t.optionAnomaly.type_anomaly,label:t.$vuetify.lang.t("$vuetify.complaints.cols.anomaly.title"),placeholder:t.$vuetify.lang.t("$vuetify.complaints.cols.anomaly.title"),outlined:"",dense:""},scopedSlots:t._u([{key:"label",fn:function(){return[a("span",{staticClass:"red--text"},[a("strong",[t._v("* ")])]),t._v(t._s(t.$vuetify.lang.t("$vuetify.complaints.cols.anomaly.title"))+" ")]},proxy:!0}]),model:{value:t.formData.type_anomaly,callback:function(e){t.$set(t.formData,"type_anomaly",e)},expression:"formData.type_anomaly"}})],1),a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"1"}},[a("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.supplies.cols.quantity.title"),outlined:"",dense:"",type:"number",min:"0",readonly:null!==this.form.id,rules:[t.numberRule]},model:{value:t.formData.quantity,callback:function(e){t.$set(t.formData,"quantity",e)},expression:"formData.quantity"}})],1),"OTHER_ANOMALY"===this.formData.type_anomaly?a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"4"}},[a("v-textarea",{staticClass:"font-weight-bold",attrs:{dense:"",rows:2,outlined:"",label:t.$vuetify.lang.t("$vuetify.complaints.cols.other_anomaly.title"),color:"primary"},model:{value:t.formData.other_anomaly,callback:function(e){t.$set(t.formData,"other_anomaly",e)},expression:"formData.other_anomaly"}})],1):t._e(),a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"2"}},[a("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.supplies.cols.arrival_price.title")+" : "+t.get_product_price,outlined:"",dense:"",type:"number",min:"0",rules:[t.numberRuleArrivalPrice]},model:{value:t.formData.arrival_price,callback:function(e){t.$set(t.formData,"arrival_price",e)},expression:"formData.arrival_price"}})],1),a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"2"}},[a("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.supplies.cols.total_amount.title"),outlined:"",value:t.get_total_amount,dense:"",readonly:"",filled:""},model:{value:t.get_total_amount,callback:function(e){t.get_total_amount=e},expression:"get_total_amount"}})],1),a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"1"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[[a("v-btn",t._g({staticStyle:{"margin-top":"3px"},attrs:{color:"primary",loading:t.loadingBtn,dark:"",type:"submit",dense:"","max-width":"2px",disabled:null===t.form.suppliers}},s),[a("v-icon",{attrs:{dark:""}},[t._v(" mdi-content-save ")])],1)]]}}])},[a("span",{staticClass:"text-center font-weight-bold body-2 withe--text text--d ken-1"},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.bills.new.add_product"))+" ")])])],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mr-2",staticStyle:{"margin-top":"-30px"},attrs:{loading:t.loading.refresh,depressed:"",color:"#f1f5fc"},on:{click:function(e){return t.refreshItemsDetail()}}},[a("v-icon",{attrs:{left:"",color:"primary"}},[t._v("mdi-refresh")]),t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.refresh"))+" ")],1),a("v-btn",{staticClass:"mr-2",staticStyle:{"margin-top":"-30px"},attrs:{color:"primary",dark:"",loading:t.loadingBtn,disabled:null===t.form.suppliers||0===t.get_complaints_amount},on:{click:function(e){return t.save_print_bills()}}},[a("v-icon",[t._v(" mdi-content-save ")]),t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.save"))+" ")],1)],1),a("v-divider",{staticClass:"mx-4"})],1),a("v-card-text",[a("v-data-table",{staticClass:"mt-5",attrs:{"footer-props":{"items-per-page-options":t.itemPerPageOptions},headers:t.headers,items:t.items,"items-per-page":t.itemPerPage,loading:t.loadingDetails.list,options:t.pagination,"server-items-length":t.meta.totalElements,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"item-key":"name"},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"header.product_name",fn:function(e){var s=e.header;return[a("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.product_code",fn:function(e){var s=e.header;return[a("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.type_anomaly",fn:function(e){var s=e.header;return[a("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.other_anomaly",fn:function(e){var s=e.header;return[a("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.quantity",fn:function(e){var s=e.header;return[a("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.arrival_price",fn:function(e){var s=e.header;return[a("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.total_amount",fn:function(e){var s=e.header;return[a("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.null",fn:function(e){var s=e.header;return[a("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"body",fn:function(e){var s=e.items;return[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var i=e.hover;return a("tbody",{},t._l(s,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.product?e.product.name:e.reagent?e.reagent.name:e.consumable?e.consumable.name:"-")+" ")]),a("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.product?e.product.code:e.reagent?e.reagent.code:e.consumable?e.consumable.code:"-")+" ")]),a("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.type_anomaly?t.$vuetify.lang.t("$vuetify.complaints.cols.anomaly."+e.type_anomaly):"-")+" ")]),a("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.other_anomaly?e.other_anomaly:"-")+" ")]),a("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.quantity)+" ")]),a("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.arrival_price)+" ")]),a("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.total_amount)+" ")]),a("td",{staticClass:"subtitle-2",attrs:{width:"50px"}},[[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([t._.includes(t.$auth.user().permissions,"change_detailscomplaints")?{key:"activator",fn:function(s){var o=s.on;return[a("v-btn",t._g({directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.smAndDown||i,expression:"$vuetify.breakpoint.smAndDown || hover"}],attrs:{color:"secondary",icon:"",text:""},on:{click:function(a){return t.editDetails(e)}}},o),[a("v-icon",[t._v("mdi-grease-pencil")])],1)]}}:null],null,!0)},[a("span",[t._v(t._s(t.$vuetify.lang.t("$vuetify.btn.edit")))])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([t._.includes(t.$auth.user().permissions,"delete_detailscomplaints")?{key:"activator",fn:function(s){var o=s.on;return[a("v-btn",t._g({directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.smAndDown||i,expression:"$vuetify.breakpoint.smAndDown || hover"}],attrs:{color:"red",icon:"",text:"",dark:""},on:{click:function(a){return t.deleteItem(e)}}},o),[a("v-icon",[t._v("mdi-delete-outline")])],1)]}}:null],null,!0)},[a("span",[t._v(t._s(t.$vuetify.lang.t("$vuetify.btn.remove")))])])]],2)])})),0)}}],null,!0)})]}}])}),a("delete-item",{attrs:{dialog:t.dialogDelete,messages:t.messagesDelete,urlItems:t.urlDeleteItems},on:{getItemsDetails:t.getItemsDetails}}),a("form-details",{ref:"detailsForm",attrs:{dialog:t.dialogFormDetails,form:t.form,messages:t.messages},on:{getItems:t.getItemsDetails}})],1)],1),a("form-product",{attrs:{dialog:t.dialogForm,messages:t.messages}}),a("form-suppliers",{attrs:{dialog:t.dialogFormSupplies,messages:t.messages}})],1)],1)},i=[],o=(a("4160"),a("b0c0"),a("b64b"),a("d3b7"),a("159b"),a("53ca")),r=a("ae8a"),n=a("6616"),l=a("c6cdb"),u=a("5ed4"),c=a("6947"),m=a("21a6"),p={mixins:[u["a"]],props:{form:{type:Object,default:function(){return{id:null,supplies:null,total_amount:null,quantity:null,product:null,delivery_person:null,complaints_date:null,suppliers:null,responsible:null,witnesses:null,purchase_order:null,is_received:null,code:null}}}},data:function(){return{maxDate:(new Date).toISOString().substr(0,10),formData:{id:null,supplies:null,total_amount:null,quantity:null,product:null,type_product:null,consumable:null,reagent:null,arrival_price:null,other_anomaly:null,type_anomaly:null,purchase_order:null,complaints:null,is_received:null,code:null},isInventory:!1,urlItemsNonePurchase:"details_purchase_orders/nonePurchase",headers:[],items:[],numberRule:function(t){return!(t<0)||"Entrer un nombre positif"},numberRuleArrivalPrice:function(t){return!(t<0)||"Entrer un nombre positif"},meta:{},itemPerPage:10,itemPerPageOptions:[5,10,30],urlDeleteItems:"",sortDesc:!0,loading:{list:!1,refresh:!1,filter:!1},pagination:{},selectedItem:!1,_search:{},_sorts:{},dialogDelete:{show:!1},sortBy:["id"],e1:1,menu2:!1,supply:!1,active:!1,menu3:!1,menu4:!1,menu:!1,dialogForm:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogFormSupplies:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogFormDetails:{show:!1,shows:{showFilter:!1,showInfo:!1}},messagesDelete:{success:"$vuetify.purchase.delete.success"},loadingBtn:!1,loadingDetails:{list:!1,refresh:!1,filter:!1},itemsProduct:[],isLoading:!1,search:null,optionType:{type_product:[]},optionAnomaly:{type_anomaly:[]},urlProduct:"products",urlSuppliers:"suppliers",itemsSuppliers:[],searchSuppliers:null,isLoadingSuppliers:!1,urlReagent:"reagents",itemsReagent:[],searchReagent:null,isLoadingReagent:!1,urlConsumable:"consumables",itemsConsumable:[],searchConsumable:null,isLoadingConsumable:!1,urlItems:"complaints",urlItemsDetails_complaints:"details_complaints"}},watch:{search:function(t){var e=this;if(null!==t){var a={name:t},s=this;this.isLoading=!0,this.$store.dispatch("request",{url:s.urlProduct,params:a}).then((function(t){s.itemsProduct=t.data.content})).finally((function(){return e.isLoading=!1}))}},searchReagent:function(t){var e=this;if(null!==t){var a={name:t},s=this;this.isLoadingReagent=!0,this.$store.dispatch("request",{url:s.urlReagent,params:a}).then((function(t){s.itemsReagent=t.data.content})).finally((function(){return e.isLoadingReagent=!1}))}},searchConsumable:function(t){var e=this;if(null!==t){var a={name:t},s=this;this.isLoadingConsumable=!0,this.$store.dispatch("request",{url:s.urlConsumable,params:a}).then((function(t){s.itemsConsumable=t.data.content})).finally((function(){return e.isLoadingConsumable=!1}))}},searchSuppliers:function(t){var e=this;if(null!==t){var a={name:t},s=this;this.isLoadingSuppliers=!0,this.$store.dispatch("request",{url:s.urlSuppliers,params:a}).then((function(t){s.itemsSuppliers=t.data.content})).finally((function(){return e.isLoadingSuppliers=!1}))}}},created:function(){this.setHeaders(),this.getOptionsType(),this.getOptionsTypeAnomaly()},validations:function(){var t={form:{}};return t},methods:{getMethod:function(){return this.form.complaints?"PUT":"POST"},save_print_bills:function(){var t=this;this.$store.dispatch("showNotification",{statut:!1});var e=this;e.$v.$touch(),e.$v.$invalid||(this.loading=!0,this.$store.dispatch("request",{url:e.getRoute()+"?print=1",method:e.getMethod(),data:e.getDataForm(),responseType:"blob"}).then((function(a){e.$store.dispatch("showNotification",{statut:!0,text:e.$vuetify.lang.t(e.messages.success)});var s="Reclamation_"+(new Date).toISOString().substr(0,10),i=new Blob([a.data],{type:a.data.type});m.saveAs(i,s),"PUT"===t.getMethod()?e.$emit("getItems"):(e.$emit("getItems"),e.resetDataForm())})).catch((function(a){var s="$vuetify.error_server";if(a.response&&400===a.response.status){var i=a.response.data;e.setFormErrors(i),t.$forceUpdate();var o=Object.keys(i)[0];o&&Array.isArray(i[o])&&(s=i[o][0])}e.$store.dispatch("showNotification",{statut:!0,text:s,color:"#B71C1C"})})).finally((function(){e.loading=!1})))},getOptionsType:function(){var t=this;this._.each(this.$store.getters.type_product,(function(e){t.optionType.type_product.push({text:t.$vuetify.lang.t(e.text),value:e.value})}))},getOptionsTypeAnomaly:function(){var t=this;this._.each(this.$store.getters.anomaly,(function(e){t.optionAnomaly.type_anomaly.push({text:t.$vuetify.lang.t(e.text),value:e.value})}))},getNonePurchase:function(){var t=this;return new Promise((function(e){t.$store.dispatch("request",{url:t.urlItemsNonePurchase}).then((function(t){e(t)}))}))},forceRefresh:function(){this.dialog.show=!1,this.items=[],this.active=!1},deleteItem:function(t){this.urlDeleteItems=this.urlItemsDetails_complaints+"/"+t.id,this.dialogDelete.show=!0},setHeaders:function(){this.headers=[{text:"$vuetify.supplies.cols.product_name.title",value:"product_name",align:"start",sortable:!1,width:"140",class:"grey--text text--darken-3"},{text:"$vuetify.supplies.cols.product_code.title",value:"product_code",align:"start",sortable:!1,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.complaints.cols.anomaly.title",value:"type_anomaly",align:"start",sortable:!1,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.complaints.cols.other_anomaly.title",value:"other_anomaly",align:"start",sortable:!1,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.supplies.cols.quantity.title",value:"quantity",align:"start",sortable:!1,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.supplies.cols.arrival_price.title",value:"arrival_price",align:"start",sortable:!1,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.supplies.cols.total_amount.title",value:"total_amount",align:"start",sortable:!1,width:"50",class:"grey--text text--darken-3"},{text:"$vuetify.supplies.cols.actions.title",value:null,align:"start",sortable:!1,width:"70"}]},createD:function(){this.dialogForm.show=!0,this.messages={title:"$vuetify.product.new.title",submit:"$vuetify.product.new.submit",success:"$vuetify.product.new.success"}},createS:function(){this.dialogFormSupplies.show=!0,this.messages={title:"$vuetify.suppliers.new.title",submit:"$vuetify.suppliers.new.submit",success:"$vuetify.suppliers.new.success"}},getDataForm:function(){var t={suppliers:this.form.suppliers,witnesses:this.form.witnesses,responsible:this.form.responsible,purchase_order:this.form.purchase_order,delivery_person:this.form.delivery_person,complaints_amount:this.get_complaints_amount};return t},resetDataFormProduct:function(){this.formData.product=null,this.formData.quantity=null,this.formData.type_anomaly=null,this.formData.other_anomaly=null,this.formData.arrival_price=null,this.formData.total_amount=null},resetDataForm:function(){if(this.resetDataFormProduct(),this.form.product=null,this.form.id=null,this.items=[],!this.form.id){var t=this;this.$v.form.$reset(),this._.each(this.form,(function(e,a){"object"===Object(o["a"])(t.form[a])?t._.each(t.form[a],(function(e,s){"boolean"===typeof t.form[a][s]?t.form[a][s]=!1:t.form[a][s]=null})):"boolean"===typeof t.form[a]?t.form[a]=!1:t.form[a]=null})),this.resetItemsDetails()}},getDataFormdetails:function(){var t={type_product:this.formData.type_product,type_anomaly:this.formData.type_anomaly,other_anomaly:this.formData.other_anomaly,product:this.formData.product?this.formData.product["id"]:this.formData.product,total_amount:this.get_total_amount,quantity:this.formData.quantity,consumable:this.formData.consumable?this.formData.consumable["id"]:this.formData.consumable,reagent:this.formData.reagent?this.formData.reagent["id"]:this.formData.reagent,arrival_price:this.formData.arrival_price?this.formData.arrival_price:this.get_product_price};return t},setForm:function(t){var e,a,s,i,o,r,n,l,u,c,m,p,d,f;this.form.responsible=null===(e=t.complaints)||void 0===e||null===(a=e[0])||void 0===a?void 0:a.responsible,this.form.purchase_order=t.id,this.form.delivery_number=t.delivery_number,this.form.complaints=null===(s=t.complaints)||void 0===s||null===(i=s[0])||void 0===i?void 0:i.id,this.form.delivery_person=null===(o=t.complaints)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.delivery_person,this.form.witnesses=null===(n=t.complaints)||void 0===n||null===(l=n[0])||void 0===l?void 0:l.witnesses,this.getItemsDetails(),this.form.complaints_date=(null===(u=t.complaints)||void 0===u||null===(c=u[0])||void 0===c?void 0:c.createdAt)+" "+(null===(m=t.complaints)||void 0===m||null===(p=m[0])||void 0===p?void 0:p.timeAt),this.form.purchase_amount=t.purchase_amount,this.form.delivery_person=t.delivery_person,this.form.code=null===(d=t.complaints)||void 0===d||null===(f=d[0])||void 0===f?void 0:f.code,this.form.order_date=t.createdAt,this.form.suppliers=t.suppliers["id"],this.itemsSuppliers.push(t.suppliers),this.form.consumable=t.consumable["id"],this.itemsConsumable.push(t.consumable),this.form.reagent=t.reagent["id"],this.itemsReagent.push(t.reagent),this.form.type_product=t.type_product},getRouteDetails:function(){return this.form.id?this.urlItemsDetails_complaints+"/"+this.form.id:this.urlItemsDetails_complaints},getRoute:function(){return this.form.complaints?this.urlItems+"/"+this.form.complaints:this.urlItems},refreshItemsDetail:function(){var t=this;this.loadingDetails.refresh=!0,this.getItemsDetails().then((function(){})).catch((function(){})).then((function(){t.loadingDetails.refresh=!1}))},getItemsDetails:function(){var t=this,e=this,a=this.pagination,s=a.page,i=a.itemsPerPage,o={page:s,size:i};return this._.isEmpty(this._search)||(this._search=this._.merge(o,this._search)),new Promise((function(a,s){t.loadingDetails.list=!0,e.$store.dispatch("request",{url:e.urlItemsDetails_complaints+"/all?complaints="+t.form.complaints,params:o}).then((function(t){var s=t.data;e.items=s.content,e.meta={totalElements:s.totalElements},a(t)})).catch((function(a){var i=t.$vuetify.lang.t("$vuetify.error_occured");if(a.response)if(400===a.response.status){var o=a.response.data;e.setFormErrors(o);var r=Object.keys(o)[0];r&&Array.isArray(o[r])&&(i=o[r][0])}else 403===a.response.status?i=e.$vuetify.lang.t("$vuetify.error_denied"):500===a.response.status&&(i=e.$vuetify.lang.t("$vuetify.error_server"));e.$store.dispatch("showNotification",{status:!0,text:i}),s(a)})).then((function(){e.loadingDetails.list=!1,a()}))}))},resetItemsDetails:function(){var t=this,e=this,a=this.pagination,s=a.page,i=a.itemsPerPage,o={page:s,size:i};return this._.isEmpty(this._search)||(this._search=this._.merge(o,this._search)),new Promise((function(a,s){t.loadingDetails.list=!0,e.$store.dispatch("request",{url:e.urlItemsDetails_complaints+"?supplies=reset",params:o}).then((function(t){var s=t.data;e.meta={totalElements:s.totalElements},a(t)})).catch((function(a){var i=t.$vuetify.lang.t("$vuetify.error_occured");if(a.response)if(400===a.response.status){var o=a.response.data;e.setFormErrors(o);var r=Object.keys(o)[0];r&&Array.isArray(o[r])&&(i=o[r][0])}else 403===a.response.status?i=e.$vuetify.lang.t("$vuetify.error_denied"):500===a.response.status&&(i=e.$vuetify.lang.t("$vuetify.error_server"));e.$store.dispatch("showNotification",{status:!0,text:i}),s(a)})).then((function(){e.loadingDetails.list=!1,a()}))}))},editDetails:function(t){this.formData.product=t.product,this.formData.quantity=null===this.form.id?t.quantity:0,this.formData.arrival_price=t.arrival_price},saveDetails:function(){var t=this;console.log(this.getDataFormdetails()),this.$store.dispatch("showNotification",{statut:!1});var e=this;e.$v.$touch(),e.$v.$invalid||(this.loading=!0,this.$store.dispatch("request",{url:e.getRouteDetails(),method:e.getMethod(),data:e.getDataFormdetails()}).then((function(){e.$store.dispatch("showNotification",{statut:!0,text:e.$vuetify.lang.t("$vuetify.supplies.new.successDetails")}),t.getItemsDetails(),e.resetDataFormProduct()})).catch((function(a){var s;if(a.response)if(400===a.response.status){s="$vuetify.error_occured";var i=a.response.data;e.setFormErrors(i),t.$forceUpdate()}else s="$vuetify.error_server";e.$store.dispatch("showNotification",{statut:!0,text:e.$vuetify.lang.t(s),color:"#B71C1C"})})).then((function(){e.loading=!1})))}},computed:{get_product_code:function(){var t,e="";return e=null===this.formData.product?"":null===(t=this.formData.product)||void 0===t?void 0:t.code,e},get_product_price:function(){var t="";return t=this.formData.product?this.formData.product.purchase_price:this.formData.reagent?this.formData.reagent.purchase_price:this.formData.consumable?this.formData.consumable.purchase_price:this.formData.consumable,t},get_complaints_amount:function(){var t=0;return this.items.forEach((function(e){t+=e.total_amount})),t},get_total_amount:function(){return this.formData.quantity?this.formData.arrival_price?this.formData.quantity*this.formData.arrival_price:this.formData.quantity*this.get_product_price:null!=this.formData.total_amount?this.formData.total_amount:0},nameErrors:function(){var t=[];return this.$v.form.name.$dirty?(!this.$v.form.name.required&&t.push(this.$vuetify.lang.t("$vuetify.supplies.cols.name.required")),t):t},product_codeErrors:function(){var t=[];return this.$v.form.product_code.$dirty?(!this.$v.form.product_code.product_code&&t.push(this.$vuetify.lang.t("$vuetify.supplies.cols.product_code.invalid")),!this.$v.form.product_code.unique&&t.push(this.$vuetify.lang.t("$vuetify.supplies.cols.product_code.unique")),t):t},reference_noErrors:function(){var t=[];return this.$v.form.reference_no.$dirty?(!this.$v.form.reference_no.required&&t.push(this.$vuetify.lang.t("$vuetify.supplies.cols.reference_no.required")),t):t},total_amountErrors:function(){var t=[];return this.$v.form.total_amount.$dirty?(!this.$v.form.total_amount.required&&t.push(this.$vuetify.lang.t("$vuetify.supplies.cols.total_amount.required")),t):t}},mounted:function(){this.getNonePurchase()},components:{DeleteItem:c["a"],FormProduct:n["a"],FormSuppliers:l["a"],FormDetails:r["a"]}},d=p,f=a("2877"),v=a("6544"),h=a.n(v),y=a("c6a6"),_=a("8336"),g=a("b0af"),b=a("99d9"),$=a("62ad"),D=a("8fea"),x=a("169a"),w=a("ce7e"),C=a("4bd4"),k=a("ce87"),I=a("132d"),S=a("0fd9"),q=a("b974"),P=a("2fa4"),F=a("8654"),R=a("a844"),A=a("71d9"),E=a("3a2f"),T=Object(f["a"])(d,s,i,!1,null,null,null);e["a"]=T.exports;h()(T,{VAutocomplete:y["a"],VBtn:_["a"],VCard:g["a"],VCardActions:b["a"],VCardText:b["b"],VCol:$["a"],VDataTable:D["a"],VDialog:x["a"],VDivider:w["a"],VForm:C["a"],VHover:k["a"],VIcon:I["a"],VRow:S["a"],VSelect:q["a"],VSpacer:P["a"],VTextField:F["a"],VTextarea:R["a"],VToolbar:A["a"],VTooltip:E["a"]})}}]);
//# sourceMappingURL=chunk-2d0f104c.9b23a28f.js.map