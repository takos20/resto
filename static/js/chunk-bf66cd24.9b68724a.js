(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bf66cd24"],{"0393":function(t,e,s){"use strict";s("0481"),s("4069");var i=s("5530"),r=(s("210b"),s("604c")),o=s("d9bd");e["a"]=r["a"].extend({name:"v-expansion-panels",provide:function(){return{expansionPanels:this}},props:{accordion:Boolean,disabled:Boolean,flat:Boolean,hover:Boolean,focusable:Boolean,inset:Boolean,popout:Boolean,readonly:Boolean,tile:Boolean},computed:{classes:function(){return Object(i["a"])(Object(i["a"])({},r["a"].options.computed.classes.call(this)),{},{"v-expansion-panels":!0,"v-expansion-panels--accordion":this.accordion,"v-expansion-panels--flat":this.flat,"v-expansion-panels--hover":this.hover,"v-expansion-panels--focusable":this.focusable,"v-expansion-panels--inset":this.inset,"v-expansion-panels--popout":this.popout,"v-expansion-panels--tile":this.tile})}},created:function(){this.$attrs.hasOwnProperty("expand")&&Object(o["a"])("expand","multiple",this),Array.isArray(this.value)&&this.value.length>0&&"boolean"===typeof this.value[0]&&Object(o["a"])(':value="[true, false, true]"',':value="[0, 2]"',this)},methods:{updateItem:function(t,e){var s=this.getValue(t,e),i=this.getValue(t,e+1);t.isActive=this.toggleMethod(s),t.nextIsActive=this.toggleMethod(i)}}})},"0e8f":function(t,e,s){"use strict";s("20f6");var i=s("e8f2");e["a"]=Object(i["a"])("flex")},"210b":function(t,e,s){},"49e2":function(t,e,s){"use strict";var i=s("0789"),r=s("9d65"),o=s("a9ad"),n=s("3206"),a=s("80d2"),l=s("58df"),u=Object(l["a"])(r["a"],o["a"],Object(n["a"])("expansionPanel","v-expansion-panel-content","v-expansion-panel"));e["a"]=u.extend().extend({name:"v-expansion-panel-content",data:function(){return{isActive:!1}},computed:{parentIsActive:function(){return this.expansionPanel.isActive}},watch:{parentIsActive:{immediate:!0,handler:function(t,e){var s=this;t&&(this.isBooted=!0),null==e?this.isActive=t:this.$nextTick((function(){return s.isActive=t}))}}},created:function(){this.expansionPanel.registerContent(this)},beforeDestroy:function(){this.expansionPanel.unregisterContent()},render:function(t){var e=this;return t(i["a"],this.showLazyContent((function(){return[t("div",e.setBackgroundColor(e.color,{staticClass:"v-expansion-panel-content",directives:[{name:"show",value:e.isActive}]}),[t("div",{class:"v-expansion-panel-content__wrap"},Object(a["t"])(e))])]})))}})},"6ca7":function(t,e,s){},a722:function(t,e,s){"use strict";s("20f6");var i=s("e8f2");e["a"]=Object(i["a"])("layout")},ac7c:function(t,e,s){"use strict";s("d3b7"),s("25f0");var i=s("15fd"),r=s("5530"),o=(s("6ca7"),s("ec29"),s("9d26")),n=s("c37a"),a=s("fe09");e["a"]=a["a"].extend({name:"v-checkbox",props:{indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"}},data:function(){return{inputIndeterminate:this.indeterminate}},computed:{classes:function(){return Object(r["a"])(Object(r["a"])({},n["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls":!0,"v-input--checkbox":!0,"v-input--indeterminate":this.inputIndeterminate})},computedIcon:function(){return this.inputIndeterminate?this.indeterminateIcon:this.isActive?this.onIcon:this.offIcon},validationState:function(){if(!this.isDisabled||this.inputIndeterminate)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0}},watch:{indeterminate:function(t){var e=this;this.$nextTick((function(){return e.inputIndeterminate=t}))},inputIndeterminate:function(t){this.$emit("update:indeterminate",t)},isActive:function(){this.indeterminate&&(this.inputIndeterminate=!1)}},methods:{genCheckbox:function(){var t=this.attrs$,e=(t.title,Object(i["a"])(t,["title"]));return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(o["a"],this.setTextColor(this.validationState,{props:{dense:this.dense,dark:this.dark,light:this.light}}),this.computedIcon),this.genInput("checkbox",Object(r["a"])(Object(r["a"])({},e),{},{"aria-checked":this.inputIndeterminate?"mixed":this.isActive.toString()})),this.genRipple(this.setTextColor(this.rippleState))])},genDefaultSlot:function(){return[this.genCheckbox(),this.genLabel()]}}})},c865:function(t,e,s){"use strict";var i=s("5530"),r=s("0789"),o=s("9d26"),n=s("a9ad"),a=s("3206"),l=s("5607"),u=s("80d2"),c=s("58df"),d=Object(c["a"])(n["a"],Object(a["a"])("expansionPanel","v-expansion-panel-header","v-expansion-panel"));e["a"]=d.extend().extend({name:"v-expansion-panel-header",directives:{ripple:l["a"]},props:{disableIconRotate:Boolean,expandIcon:{type:String,default:"$expand"},hideActions:Boolean,ripple:{type:[Boolean,Object],default:!1}},data:function(){return{hasMousedown:!1}},computed:{classes:function(){return{"v-expansion-panel-header--active":this.isActive,"v-expansion-panel-header--mousedown":this.hasMousedown}},isActive:function(){return this.expansionPanel.isActive},isDisabled:function(){return this.expansionPanel.isDisabled},isReadonly:function(){return this.expansionPanel.isReadonly}},created:function(){this.expansionPanel.registerHeader(this)},beforeDestroy:function(){this.expansionPanel.unregisterHeader()},methods:{onClick:function(t){this.$emit("click",t)},genIcon:function(){var t=Object(u["t"])(this,"actions")||[this.$createElement(o["a"],this.expandIcon)];return this.$createElement(r["d"],[this.$createElement("div",{staticClass:"v-expansion-panel-header__icon",class:{"v-expansion-panel-header__icon--disable-rotate":this.disableIconRotate},directives:[{name:"show",value:!this.isDisabled}]},t)])}},render:function(t){var e=this;return t("button",this.setBackgroundColor(this.color,{staticClass:"v-expansion-panel-header",class:this.classes,attrs:{tabindex:this.isDisabled?-1:null,type:"button","aria-expanded":this.isActive},directives:[{name:"ripple",value:this.ripple}],on:Object(i["a"])(Object(i["a"])({},this.$listeners),{},{click:this.onClick,mousedown:function(){return e.hasMousedown=!0},mouseup:function(){return e.hasMousedown=!1}})}),[Object(u["t"])(this,"default",{open:this.isActive},!0),this.hideActions||this.genIcon()])}})},cd41:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-dialog",{attrs:{"max-width":"300px"},model:{value:t.dialog.show,callback:function(e){t.$set(t.dialog,"show",e)},expression:"dialog.show"}},[s("v-card",[s("v-card-text",[s("v-divider",{staticClass:"mx-4"}),s("v-card-text",[s("div",{staticClass:"body-1 font-weight-bold"},[s("br"),s("h3",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.delete.confirm"))+" ")])])])],1),s("v-divider",{staticClass:"mx-4",staticStyle:{"margin-top":"-30px"}}),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{disabled:t.loading},on:{click:function(e){t.dialog.show=!1}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.no"))+" ")]),s("v-btn",{attrs:{loading:t.loading,dark:"",color:"#0984e3"},on:{click:function(e){return t.deleteItem()}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.yes"))+" ")])],1)],1)],1)},r=[],o={props:{dialog:{type:Object,default:function(){return{show:!1}}},urlItems:{type:String,default:""},messages:{type:Object,default:function(){return{success:""}}}},data:function(){return{loading:!1}},methods:{deleteItem:function(){var t=this;this.loading=!0,this.$store.dispatch("request",{url:t.urlItems,method:"DELETE",data:t.urlDeleteItems}).then((function(){t.$store.dispatch("showNotification",{statut:!0,text:t.$vuetify.lang.t(t.messages.success)}),t.$emit("getItems"),t.dialog.show=!1})).catch((function(e){console.log("erreur delete",e),t.$store.dispatch("showNotification",{statut:!0,text:t.$vuetify.lang.t("$vuetify.deletedErrors")})})).then((function(){t.loading=!1}))}}},n=o,a=s("2877"),l=s("6544"),u=s.n(l),c=s("8336"),d=s("b0af"),m=s("99d9"),p=s("169a"),h=s("ce7e"),f=s("2fa4"),v=Object(a["a"])(n,i,r,!1,null,null,null);e["a"]=v.exports;u()(v,{VBtn:c["a"],VCard:d["a"],VCardActions:m["a"],VCardText:m["b"],VDialog:p["a"],VDivider:h["a"],VSpacer:f["a"]})},cd55:function(t,e,s){"use strict";var i=s("5530"),r=s("4e82"),o=s("3206"),n=s("80d2"),a=s("58df");e["a"]=Object(a["a"])(Object(r["a"])("expansionPanels","v-expansion-panel","v-expansion-panels"),Object(o["b"])("expansionPanel",!0)).extend({name:"v-expansion-panel",props:{disabled:Boolean,readonly:Boolean},data:function(){return{content:null,header:null,nextIsActive:!1}},computed:{classes:function(){return Object(i["a"])({"v-expansion-panel--active":this.isActive,"v-expansion-panel--next-active":this.nextIsActive,"v-expansion-panel--disabled":this.isDisabled},this.groupClasses)},isDisabled:function(){return this.expansionPanels.disabled||this.disabled},isReadonly:function(){return this.expansionPanels.readonly||this.readonly}},methods:{registerContent:function(t){this.content=t},unregisterContent:function(){this.content=null},registerHeader:function(t){this.header=t,t.$on("click",this.onClick)},unregisterHeader:function(){this.header=null},onClick:function(t){t.detail&&this.header.$el.blur(),this.$emit("click",t),this.isReadonly||this.isDisabled||this.toggle()},toggle:function(){var t=this;this.$nextTick((function(){return t.$emit("change")}))}},render:function(t){return t("div",{staticClass:"v-expansion-panel",class:this.classes,attrs:{"aria-expanded":String(this.isActive)}},Object(n["t"])(this))}})},dcd2:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"title mb-5 black--text lighten-5 text-center",staticStyle:{height:"30px","margin-top":"30px","background-color":"#e9eef4"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.users.list.title"))+" ")]),s("user",{attrs:{color:"black"}})],1)},r=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-card",{staticClass:"pb-4"},[s("div",{staticClass:"mt-5 mx-5"},[t._.includes(this.$auth.user().permissions,"add_user")?[s("v-btn",{staticClass:"mr-2 my-2",attrs:{color:"primary",dark:""},on:{click:function(e){return t.create()}}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-account-plus-outline")]),t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.add"))+" ")],1)]:t._e(),s("v-btn",{staticClass:"mr-2 my-2",attrs:{loading:t.loading.refresh,depressed:"",color:"#f1f5fc"},on:{click:function(e){return t.refreshItems()}}},[s("v-icon",{attrs:{left:"",color:"primary"}},[t._v("mdi-refresh")]),t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.refresh"))+" ")],1),s("v-spacer")],2)]),s("v-card",[s("v-data-table",{staticClass:"mt-5",attrs:{"footer-props":{"items-per-page-options":t.itemPerPageOptions},headers:t.headers,items:t.items,"items-per-page":t.itemPerPage,loading:t.loading.list,options:t.pagination,"server-items-length":t.meta.totalElements,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"item-key":"username"},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"header.username",fn:function(e){var i=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(i.text))+" ")])]}},{key:"header.is_active",fn:function(e){var i=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(i.text))+" ")])]}},{key:"header.role",fn:function(e){var i=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(i.text))+" ")])]}},{key:"header.create_date",fn:function(e){var i=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(i.text))+" ")])]}},{key:"header.null",fn:function(e){var i=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(i.text))+" ")])]}},{key:"body",fn:function(e){var i=e.items;return[s("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.hover;return s("tbody",{},t._l(i,(function(e){return s("tr",{key:e.id},[s("td",{staticClass:"subtitle-2"},[t._v(t._s(e.username))]),e.groups.length>0?s("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.groups[0].name)+" ")]):s("td",{staticClass:"subtitle-2"},[t._v("-")]),s("td",[s("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(i){var r=i.on;return[e.is_active?[s("v-icon",t._g({staticClass:"pointer",attrs:{color:"primary",dark:"",disabled:!t.get_permissions},on:{click:function(s){return t.enabled(e)}}},r),[t._v(" mdi-check-circle ")])]:[s("v-icon",t._g({staticClass:"pointer",attrs:{color:"red accent-4",dark:"",disabled:!t.get_permissions},on:{click:function(s){return t.enabled(e)}}},r),[t._v(" mdi-close-circle ")])]]}}],null,!0)},[e.is_active?s("span",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.users.cols.status.disabled"))+" ")]):s("span",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.users.cols.status.enabled"))+" ")])])],1),s("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(t.$moment(e.createdAt).format("YYYY-MM-DD"))+" "+t._s(e.timeAt)+" ")]),s("td",{staticClass:"subtitle-2"},[[s("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([t._.includes(t.$auth.user().permissions,"change_user")||t.$auth.check(["admin"])||t.$auth.check(["super_admin"])?{key:"activator",fn:function(i){var o=i.on;return[s("v-btn",t._g({directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.smAndDown||r,expression:"$vuetify.breakpoint.smAndDown || hover"}],attrs:{color:"secondary",icon:"",text:""},on:{click:function(s){return t.editUser(e)}}},o),[s("v-icon",[t._v("mdi-update")])],1)]}}:null],null,!0)},[s("span",[t._v(t._s(t.$vuetify.lang.t("$vuetify.btn.edit")))])]),s("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([t._.includes(t.$auth.user().permissions,"delete_user")?{key:"activator",fn:function(i){var o=i.on;return[s("v-btn",t._g({directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.smAndDown||r,expression:"$vuetify.breakpoint.smAndDown || hover"}],attrs:{color:"red",icon:"",text:"",dark:""},on:{click:function(s){return t.deleteItem(e)}}},o),[s("v-icon",[t._v("mdi-delete-outline")])],1)]}}:null],null,!0)},[s("span",[t._v(t._s(t.$vuetify.lang.t("$vuetify.btn.remove")))])])]],2)])})),0)}}],null,!0)})]}}])}),t.$auth.user().is_superuser?s("form-super",{ref:"userForm",attrs:{dialog:t.dialogFormSuper,form:t.form,messages:t.messages},on:{getItems:t.getItems}}):s("form-user",{ref:"userForm",attrs:{dialog:t.dialogForm,form:t.form,messages:t.messages},on:{getItems:t.getItems}}),s("delete-item",{attrs:{dialog:t.dialogDelete,messages:t.messagesDelete,urlItems:t.urlDeleteItems},on:{getItems:t.getItems}}),s("form-enable",{ref:"enableUser",attrs:{dialog:t.dialogForm,messages:t.messages},on:{getItems:t.getItems}})],1)],1)},n=[],a=(s("4de4"),s("caad"),s("d3b7"),s("2532"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-dialog",{attrs:{"max-width":"300"},model:{value:t.dialog.shows.showInfo,callback:function(e){t.$set(t.dialog.shows,"showInfo",e)},expression:"dialog.shows.showInfo"}},[s("v-card",[s("v-card-text",[s("div",{staticClass:"body-1 font-weight-bold"},[s("br"),s("h3",[t._v(" "+t._s(t.$vuetify.lang.t(t.messages.title))+" ")])])]),s("v-divider"),s("v-card-actions",[s("v-spacer"),s("v-btn",{on:{click:function(e){t.dialog.shows.showInfo=!1}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.close"))+" ")]),s("v-btn",{attrs:{color:"#0984e3",loading:t.loading,dark:"",type:"submit"},on:{click:t.send}},[t._v(" "+t._s(t.$vuetify.lang.t(t.messages.submit))+" ")])],1)],1)],1)}),l=[],u=s("5ed4"),c={mixins:[u["a"]],name:"Infos",props:{dialog:{type:Object,default:function(){return{shows:{showInfo:!1}}}},form:{type:Object,default:function(){return{id:null,code_user:null,position_held:null,doctor:null,patient:null,username:null,password:null,re_password:null,role:null,is_active:!1}}}},data:function(){return{loading:!1,urlItems:"users",itemsRole:[]}},methods:{setForm:function(t){var e,s;this.form.id=t.id,this.form.code=t.code,this.form.username=t.username,this.form.password=t.password,this.form.re_password=t.password,this.form.is_active=!t.is_active,this.form.doctor=null==t.doctor?"":t.doctor["id"],this.form.patient=null==t.patient?"":t.patient["id"],this.form.groups=null===(e=t.groups)||void 0===e||null===(s=e[0])||void 0===s?void 0:s.id,this.itemsRole.push(t.groups[0])},getRoute:function(){return this.form.id?this.urlItems+"/"+this.form.id:this.urlItems},send:function(){this.$store.dispatch("setNotification",{status:!1});var t=this;this.loading=!0,this.$store.dispatch("request",{url:t.getRoute(),method:"PATCH",data:t.getDataForm()}).then((function(){t.$store.dispatch("setNotification",{status:!0,message:t.$vuetify.lang.t(t.messages.success)}),t.$emit("getItems")})).catch((function(e){console.log("error",e);var s="$vuetify.error_occured";t.$store.dispatch("setNotification",{status:!0,message:t.$vuetify.lang.t(s)})})).then((function(){t.loading=!1}))}}},d=c,m=s("2877"),p=s("6544"),h=s.n(p),f=s("8336"),v=s("b0af"),g=s("99d9"),y=s("169a"),$=s("ce7e"),b=s("2fa4"),_=Object(m["a"])(d,a,l,!1,null,null,null),x=_.exports;h()(_,{VBtn:f["a"],VCard:v["a"],VCardActions:g["a"],VCardText:g["b"],VDialog:y["a"],VDivider:$["a"],VSpacer:b["a"]});var w=s("24a2"),k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-dialog",{attrs:{persistent:"","max-width":"780px"},model:{value:t.dialog.show,callback:function(e){t.$set(t.dialog,"show",e)},expression:"dialog.show"}},[s("v-card",[s("v-card-title",[s("div",{staticClass:"title"},[t._v(" "+t._s(t.$vuetify.lang.t(t.messages.title))+" ")])]),s("v-divider",{staticClass:"mx-4"}),s("v-form",{on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[s("v-card",[s("v-card-text",[s("v-container",[s("v-row",{attrs:{wrap:""}},[s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"4"}},[s("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.users.cols.code_user.title"),"prepend-inner-icon":"mdi-text-short mdi-dark mdi-18px",outlined:"",dense:"",filled:"",readonly:""},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"4"}}),s("v-col",{staticClass:"mb-0 py-0",staticStyle:{"margin-top":"-20px"},attrs:{cols:"12",sm:"4"}},[s("v-switch",{attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.users.cols.status.title2"),outlined:"",dense:""},model:{value:t.is_active,callback:function(e){t.is_active=e},expression:"is_active"}})],1),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"12"}},[s("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.users.cols.username.title"),clearable:"","error-messages":t.usernameErrors,"prepend-inner-icon":"mdi-account-outline mdi-dark mdi-18px",outlined:"",dense:""},on:{blur:function(e){return t.$v.form.username.$touch()},input:function(e){return t.$v.form.username.$touch()}},scopedSlots:t._u([{key:"label",fn:function(){return[s("span",{staticClass:"red--text"},[s("strong",[t._v("* ")])]),t._v(t._s(t.$vuetify.lang.t("$vuetify.users.cols.username.title"))+" ")]},proxy:!0}]),model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"10"}},[s("v-autocomplete",{staticClass:"font-weight-bold",attrs:{items:t.itemsRole,loading:t.isLoadingRole,"search-input":t.searchRole,color:"primary","item-text":"group_name","return-object":"",clearable:"","item-value":"id",label:t.$vuetify.lang.t("$vuetify.users.cols.role.title"),"prepend-inner-icon":"mdi-account mdi-dark mdi-18px",outlined:"",dense:""},on:{"update:searchInput":function(e){t.searchRole=e},"update:search-input":function(e){t.searchRole=e}},scopedSlots:t._u([{key:"label",fn:function(){return[s("span",{staticClass:"red--text"},[s("strong",[t._v("* ")])]),t._v(t._s(t.$vuetify.lang.t("$vuetify.users.cols.role.title"))+" ")]},proxy:!0}]),model:{value:t.form.groups,callback:function(e){t.$set(t.form,"groups",e)},expression:"form.groups"}})],1),this.$auth.user().is_superuser?s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"5"}},[s("v-autocomplete",{staticClass:"font-weight-bold",attrs:{items:t.itemsHospital,loading:t.isLoadingHospital,"search-input":t.searchHospital,color:"primary","item-text":"name","item-value":"id",clearable:"",label:t.$vuetify.lang.t("$vuetify.users.cols.role.title"),"prepend-inner-icon":"mdi-account mdi-dark mdi-18px",outlined:"",dense:""},on:{"update:searchInput":function(e){t.searchHospital=e},"update:search-input":function(e){t.searchHospital=e}},scopedSlots:t._u([{key:"label",fn:function(){return[s("span",{staticClass:"red--text"},[s("strong",[t._v("* ")])]),t._v(t._s(t.$vuetify.lang.t("$vuetify.hospitals.title"))+" ")]},proxy:!0}],null,!1,2430601426),model:{value:t.form.hospital,callback:function(e){t.$set(t.form,"hospital",e)},expression:"form.hospital"}})],1):t._e(),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"2"}},[t._.includes(this.$auth.user().permissions,"add_permission")?s("v-btn",{attrs:{dark:"",dense:"",color:"primary"},on:{click:function(e){return t.createPermission()}}},[s("v-icon",{attrs:{dark:""}},[t._v(" mdi-plus ")])],1):t._e()],1),this.$auth.user().is_superuser?s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"5"}}):t._e(),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"6"}},[s("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.users.cols.password.title"),"prepend-inner-icon":"mdi-shield-account-outline mdi-dark mdi-18px","error-messages":t.passwordErrors,type:"password",outlined:"",dense:""},on:{blur:function(e){return t.$v.form.password.$touch()},input:function(e){return t.$v.form.password.$touch()}},scopedSlots:t._u([{key:"label",fn:function(){return[s("span",{staticClass:"red--text"},[s("strong",[t._v("* ")])]),t._v(t._s(t.$vuetify.lang.t("$vuetify.users.cols.password.title"))+" ")]},proxy:!0}]),model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"6"}},[s("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.users.cols.re_password.title"),"error-messages":t.rePasswordErrors,"prepend-inner-icon":"mdi-shield-account-outline mdi-dark mdi-18px",type:"password",outlined:"",dense:""},on:{blur:function(e){return t.$v.form.re_password.$touch()},input:function(e){return t.$v.form.re_password.$touch()}},scopedSlots:t._u([{key:"label",fn:function(){return[s("span",{staticClass:"red--text"},[s("strong",[t._v("* ")])]),t._v(t._s(t.$vuetify.lang.t("$vuetify.users.cols.re_password.title"))+" ")]},proxy:!0}]),model:{value:t.form.re_password,callback:function(e){t.$set(t.form,"re_password",e)},expression:"form.re_password"}})],1),"PATIENT"===t.form.type?s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"12"}},[s("v-autocomplete",{staticClass:"font-weight-bold",attrs:{outlined:"",dense:"",items:t.itemsPatient,required:"",loading:t.isLoadingPatient,"search-input":t.searchPatient,color:"primary","item-text":"name","item-value":"id",label:t.$vuetify.lang.t("$vuetify.appointment.cols.patient.title"),clearable:""},on:{"update:searchInput":function(e){t.searchPatient=e},"update:search-input":function(e){t.searchPatient=e}},model:{value:t.form.patient,callback:function(e){t.$set(t.form,"patient",e)},expression:"form.patient"}})],1):t._e()],1)],1)],1),s("v-divider",{staticClass:"mx-4",staticStyle:{"margin-top":"-25px"}}),s("v-card-actions",[s("v-spacer"),s("v-btn",{on:{click:function(e){t.dialog.show=!1}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.close"))+" ")]),s("v-btn",{attrs:{color:"primary",loading:t.loading,dark:"",type:"submit"}},[t._v(" "+t._s(t.$vuetify.lang.t(t.messages.submit))+" ")])],1)],1)],1)],1),s("form-permission",{attrs:{dialog:t.dialogFormPermission}})],1)},C=[],I=(s("b0c0"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-dialog",{attrs:{persistent:"","max-width":"980px"},model:{value:t.dialog.show,callback:function(e){t.$set(t.dialog,"show",e)},expression:"dialog.show"}},[s("v-card",[s("v-card-title",[s("div",{staticClass:"title"},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.permission.title"))+" ")]),s("v-spacer"),s("v-spacer"),s("v-btn",{attrs:{icon:"",light:""},on:{click:function(e){t.dialog.show=!1}}},[s("v-icon",[t._v("mdi-close")])],1)],1),s("v-divider",{staticClass:"mx-4"}),s("v-form",{on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[s("v-card",[s("v-card-text",[s("v-container",[s("v-row",{attrs:{wrap:""}},[s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"6"}},[s("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.permission.cols.name.title"),"error-messages":t.nameErrors,"prepend-inner-icon":"mdi-account-multiple mdi-dark mdi-18px",outlined:"",dense:""},on:{blur:function(e){return t.$v.form.name.$touch()},input:function(e){return t.$v.form.name.$touch()}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"6"}},[s("v-checkbox",{staticClass:"font-weight-bold",attrs:{outlined:"",dense:"",label:t.$vuetify.lang.t("$vuetify.permission.all")},model:{value:t.checkbox,callback:function(e){t.checkbox=e},expression:"checkbox"}})],1),!1===t.checkbox?s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"12"}},[s("div",[s("v-expansion-panels",{attrs:{multiple:""}},t._l(t.permissions,(function(e,i){return s("v-expansion-panel",{key:i.id},[s("v-expansion-panel-header",[t._v(" "+t._s(t.permissions[i][0].module_name)+" ")]),s("v-expansion-panel-content",{attrs:{color:"grey lighten-3"}},[s("v-layout",{attrs:{row:"",wrap:""}},t._l(e,(function(e,i){return s("v-flex",{key:i,attrs:{xs2:""}},[s("v-checkbox",{attrs:{label:t.$vuetify.lang.t("$vuetify.permission.cols.allPermissiion."+e.description),value:e.permissionId,multiple:""},model:{value:t.permission,callback:function(e){t.permission=e},expression:"permission"}})],1)})),1)],1)],1)})),1)],1)]):t._e()],1),s("br")],1)],1),s("v-divider",{staticClass:"mx-4",staticStyle:{"margin-top":"-25px"}}),s("v-card-actions",[s("v-spacer"),s("v-btn",{on:{click:function(e){t.dialog.show=!1}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.close"))+" ")]),s("v-btn",{attrs:{color:"primary",loading:t.loading,dark:"",type:"submit"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.save"))+" ")])],1)],1)],1)],1)],1)}),D=[],P=(s("4160"),s("b64b"),s("159b"),s("b85c")),q=s("b5ae"),L=s("717c"),V={mixins:[u["a"]],props:{form:{type:Object,default:function(){return{id:null,permission:[],name:null}}}},data:function(){return{e1:1,isLoading:!1,permissions:{},permission:[],checkbox:!0,isLoadingD:!1,isLoadingP:!1,urlContentType:"users/contentTypes/permissions",itemsPermission:[],isLoadingPermission:!1,search:null,searchDoctor:null,searchPatient:null,searchDepart:null,menu2:!1,menu3:!1,menu4:!1,menu:!1,loading:!1,dialogForm:{show:!1,shows:{showFilter:!1,showInfo:!1}},optionRole:{type_Role:[]},urlItems:"users/permissions",types:{role:[]},itemsRoles:[]}},watch:{},created:function(){this.getPermissions()},validations:function(){var t={form:{name:{required:q["required"],unique:L["G"]}}};return t},methods:{getPermissions:function(){var t=this,e=this;return new Promise((function(s,i){e.$store.dispatch("request",{url:e.urlContentType}).then((function(e){var i,r=Object(P["a"])(e.data.content);try{for(r.s();!(i=r.n()).done;){var o,n,a,l,u,c=i.value;if(!t.permissions[null===(o=c.module)||void 0===o?void 0:o.id])t.permissions[null===(u=c.module)||void 0===u?void 0:u.id]=[];t.permissions[null===(n=c.module)||void 0===n?void 0:n.id].push({name:c.name,description:c.codename,module_id:null===(a=c.module)||void 0===a?void 0:a.id,module_name:null===(l=c.module)||void 0===l?void 0:l.name,permissionId:c.id,isChecked:!1})}}catch(d){r.e(d)}finally{r.f()}s(e)})).catch((function(s){var r=t.$vuetify.lang.t("$vuetify.error_occured");if(s.response)if(400===s.response.status){var o=s.response.data;e.setFormErrors(o);var n=Object.keys(o)[0];n&&Array.isArray(o[n])&&(r=o[n][0])}else 403===s.response.status?r=e.$vuetify.lang.t("$vuetify.error_denied"):500===s.response.status&&(r=e.$vuetify.lang.t("$vuetify.error_server"));e.$store.dispatch("showNotification",{status:!0,text:r}),i(s)})).then((function(){s()}))}))},getRoute:function(){return this.form.id?this.urlItems+"?id="+this.form.id:this.urlItems},getMethod:function(){return this.form.id?"PUT":"POST"},save:function(){var t=this;this.$store.dispatch("showNotification",{statut:!1});var e=this;e.$v.$touch(),e.$v.$invalid||(this.loading=!0,this.$store.dispatch("request",{url:e.getRoute(),method:e.getMethod(),data:e.getDataForm()}).then((function(){e.$store.dispatch("showNotification",{statut:!0,text:e.$vuetify.lang.t(e.messages.success)}),e.$emit("getItems")})).catch((function(s){var i="$vuetify.error_server";if(s.response&&400===s.response.status){var r=s.response.data;e.setFormErrors(r),t.$forceUpdate();var o=Object.keys(r)[0];o&&Array.isArray(r[o])&&(i=r[o][0])}e.$store.dispatch("showNotification",{statut:!0,text:i,color:"#B71C1C"})})).finally((function(){e.loading=!1})))},getDataForm:function(){var t={name:this.form.name,checkbox:this.checkbox,permission:this.permission};return t},setForm:function(t){var e=this;this.form.id=t.id,this.form.name=t.name,this.form["oldRole"]=t.name,this.permission=[],t.permissions.forEach((function(t){e.itemsPermission.push({text:e.$vuetify.lang.t("$vuetify.permission.cols.allPermissiion."+t.codename),value:t.id}),e.permission.push(t.id)}))}},computed:{icon:function(){return"mdi-checkbox-blank-outline"},permissionErrors:function(){var t=[];return this.$v.form.permission.$dirty?(!this.$v.form.permission.required&&t.push(this.$vuetify.lang.t("$vuetify.permission.cols.permis.required")),t):t},contentTypeErrors:function(){var t=[];return this.$v.form.contentType.$dirty?(!this.$v.form.contentType.required&&t.push(this.$vuetify.lang.t("$vuetify.permission.cols.contentType.required")),t):t},nameErrors:function(){var t=[];return this.$v.form.name.$dirty?(!this.$v.form.name.required&&t.push(this.$vuetify.lang.t("$vuetify.permission.cols.name.required")),!this.$v.form.name.unique&&t.push(this.$vuetify.lang.t("$vuetify.permission.cols.name.unique")),t):t}},components:{}},E=V,R=s("ac7c"),F=s("62ad"),O=s("a523"),j=s("cd55"),A=s("49e2"),S=s("c865"),H=s("0393"),T=s("0e8f"),B=s("4bd4"),N=s("132d"),M=s("a722"),U=s("0fd9"),Y=s("8654"),J=Object(m["a"])(E,I,D,!1,null,null,null),z=J.exports;h()(J,{VBtn:f["a"],VCard:v["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:g["c"],VCheckbox:R["a"],VCol:F["a"],VContainer:O["a"],VDialog:y["a"],VDivider:$["a"],VExpansionPanel:j["a"],VExpansionPanelContent:A["a"],VExpansionPanelHeader:S["a"],VExpansionPanels:H["a"],VFlex:T["a"],VForm:B["a"],VIcon:N["a"],VLayout:M["a"],VRow:U["a"],VSpacer:b["a"],VTextField:Y["a"]});var G={mixins:[u["a"]],props:{form:{type:Object,default:function(){return{id:null,code:null,position_held:null,doctor:null,hospital:null,patient:null,username:null,password:null,type:null,groups:null,re_password:null,role:null}}}},data:function(){return{e1:1,isLoading:!1,is_active:!0,isLoadingD:!1,isLoadingP:!1,urlRole:"users/roles",itemsRole:[],searchRole:null,isLoadingRole:!1,search:null,dialogFormPermission:{show:!1,shows:{showFilter:!1,showInfo:!1}},menu2:!1,menu3:!1,menu4:!1,menu:!1,searchDepart:null,isLoadingDepot:!1,searchDepot:null,itemsDepot:[],isLoadingHospital:!1,searchHospital:null,itemsHospital:[],urlDepot:"storage_depots",urlPatients:"patients",urlHospital:"hospitals",urlDoctors:"doctors",isLoadingPatient:!1,isLoadingDoctor:!1,searchPatient:null,searchDoctor:null,itemsPatient:[],itemsDoctor:[],formData:{id:null,name:null},dialogForm:{show:!1,shows:{showFilter:!1,showInfo:!1}},optionType:{type_Role:[]},urlItems:"users",types:{role:[]},itemsRoles:[]}},watch:{searchPatient:function(t){var e=this;if(null!==t){var s={name:t},i=this;this.isLoading=!0,this.$store.dispatch("request",{url:i.urlPatients,params:s}).then((function(t){i.itemsPatient=t.data.content})).finally((function(){return e.isLoading=!1}))}},searchDoctor:function(t){var e=this;if(null!==t){var s={name:t},i=this;this.isLoading=!0,this.$store.dispatch("request",{url:i.urlDoctors,params:s}).then((function(t){i.itemsDoctor=t.data.content})).finally((function(){return e.isLoading=!1}))}},searchDepot:function(t){var e=this;if(null!==t){var s={name:t},i=this;this.isLoadingDepot=!0,this.$store.dispatch("request",{url:i.urlDepot,params:s}).then((function(t){i.itemsDepot=t.data.content})).finally((function(){return e.isLoadingDepot=!1}))}},searchHospital:function(t){var e=this;if(null!==t){var s={name:t},i=this;this.isLoadingHospital=!0,this.$store.dispatch("request",{url:i.urlHospital,params:s}).then((function(t){i.itemsHospital=t.data.content})).finally((function(){return e.isLoadingHospital=!1}))}},searchRole:function(t){var e=this;if(null!==t){var s={group_name:t},i=this;this.isLoadingRole=!0,this.$store.dispatch("request",{url:i.urlRole,params:s,limit:50}).then((function(t){i.itemsRole=t.data.content})).finally((function(){return e.isLoadingRole=!1}))}}},created:function(){this.getOptionsRole()},validations:function(){var t={form:{username:{required:q["required"],maxLength:Object(q["maxLength"])(255),minLength:Object(q["minLength"])(3),unique:L["bb"]},groups:{required:q["required"]},password:{required:Object(q["requiredIf"])((function(t){return!t["id"]}))},re_password:{sameAsPassword:Object(q["sameAs"])("password")}}};return t},methods:{createPermission:function(){this.dialogFormPermission.show=!0},createD:function(){this.dialogForm.show=!0,this.formData={id:null,name:null}},getOptionsRole:function(){var t=this;this._.each(this.$store.getters.roles,(function(e){t.optionType.type_Role.push({text:t.$vuetify.lang.t(e.text),value:e.value})}))},getDataForm:function(){var t={username:this.form.username,role:this.form.role,hospital:this.form.hospital,type:this.form.type,patient:this.form.patient,groups:this.form.groups["group"]["id"],is_active:this.is_active};return this._.isNull(this.form.password)||(t.password=this.form.password),this._.isNull(this.form.re_password)||(t.re_password=this.form.re_password),t},setForm:function(t){var e,s,i;this.form.id=t.id,this.form.code=t.code,this.form.type=t.type,this.form.username=t.username,this.form.patient=null===t.patient?"":t.patient["id"],this.itemsPatient.push(t.patient),this.form.hospital=null===t.hospital?"":t.hospital["id"],this.itemsHospital.push(t.hospital),this.form["oldUsername"]=t.username,this._.isEmpty(t.password)&&this._.isNull(t.password)||(this.form.password=t.password),this._.isEmpty(t.re_password)&&this._.isNull(t.re_password)||(this.form.re_password=t.re_password),this.is_active=t.is_active,this.form.groups=null!==(e=null===(s=t.groups)||void 0===s||null===(i=s[0])||void 0===i?void 0:i.id)&&void 0!==e?e:null,this.itemsRole.push(t.groups[0])}},computed:{get_patient_code:function(){var t,e="";return e="CAISSIER"===(null===(t=this.form.groups)||void 0===t?void 0:t.name),e},roleErrors:function(){var t=[];return this.$v.form.groups.$dirty?(!this.$v.form.groups.required&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.role.required")),t):t},typeErrors:function(){var t=[];return this.$v.form.type.$dirty?(!this.$v.form.type.required&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.role.required")),t):t},usernameErrors:function(){var t=[];return this.$v.form.username.$dirty?(!this.$v.form.username.required&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.username.required")),!this.$v.form.username.minLength&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.username.minLength",this.$v.form.username.$params.minLength.min)),!this.$v.form.username.maxLength&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.username.maxLength",this.$v.form.username.$params.maxLength.max)),!this.$v.form.username.unique&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.username.unique")),t):t},passwordErrors:function(){var t=[];return this.$v.form.password.$dirty?(!this.$v.form.password.required&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.password.required")),t):t},rePasswordErrors:function(){var t=[];return this.$v.form.re_password.$dirty?(!this.$v.form.re_password.sameAsPassword&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.re_password.error")),t):t},firstnameErrors:function(){var t=[];return this.$v.form.code_user.$dirty?(!this.$v.form.code_user.required&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.code_user.required")),!this.$v.form.code_user.maxLength&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.code_user.maxLength",this.$v.form.code_user.$params.maxLength.max)),t):t},lastnameErrors:function(){var t=[];return this.$v.form.position_held.$dirty?(!this.$v.form.position_held.required&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.position_held.required")),!this.$v.form.position_held.maxLength&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.position_held.maxLength",this.$v.form.position_held.$params.maxLength.max)),t):t},emailErrors:function(){var t=[];return this.$v.form.email.$dirty?(!this.$v.form.email.required&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.email.required")),!this.$v.form.email.maxLength&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.email.invalid")),!this.$v.form.email.email&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.email.invalid")),!this.$v.form.email.unique&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.email.unique")),t):t},phoneErrors:function(){var t=[];return this.$v.form.phone.$dirty?(!this.$v.form.phone.phoneR&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.phone.invalid")),!this.$v.form.phone.unique&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.phone.unique")),t):t},other_phoneErrors:function(){var t=[];return this.$v.form.other_phone.$dirty?(!this.$v.form.other_phone.phoneR&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.phone.invalid")),!this.$v.form.other_phone.unique&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.phone.unique")),t):t}},components:{FormPermission:z}},K=G,Q=s("c6a6"),W=s("b73d"),X=Object(m["a"])(K,k,C,!1,null,null,null),Z=X.exports;h()(X,{VAutocomplete:Q["a"],VBtn:f["a"],VCard:v["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:g["c"],VCol:F["a"],VContainer:O["a"],VDialog:y["a"],VDivider:$["a"],VForm:B["a"],VIcon:N["a"],VRow:U["a"],VSpacer:b["a"],VSwitch:W["a"],VTextField:Y["a"]});var tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-dialog",{attrs:{persistent:"","max-width":"780px"},model:{value:t.dialog.show,callback:function(e){t.$set(t.dialog,"show",e)},expression:"dialog.show"}},[s("v-card",[s("v-card-title",[s("div",{staticClass:"title"},[t._v(" "+t._s(t.$vuetify.lang.t(t.messages.title))+" ")])]),s("v-divider",{staticClass:"mx-4"}),s("v-form",{on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[s("v-card",[s("v-card-text",[s("v-container",[s("v-row",{attrs:{wrap:""}},[s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"4"}},[s("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.users.cols.code_user.title"),"prepend-inner-icon":"mdi-text-short mdi-dark mdi-18px",outlined:"",dense:"",filled:"",readonly:""},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"4"}}),s("v-col",{staticClass:"mb-0 py-0",staticStyle:{"margin-top":"-20px"},attrs:{cols:"12",sm:"4"}},[s("v-switch",{attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.users.cols.status.title2"),outlined:"",dense:""},model:{value:t.is_active,callback:function(e){t.is_active=e},expression:"is_active"}})],1),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"6"}},[s("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.users.cols.username.title"),clearable:"","error-messages":t.usernameErrors,"prepend-inner-icon":"mdi-account-outline mdi-dark mdi-18px",outlined:"",dense:""},on:{blur:function(e){return t.$v.form.username.$touch()},input:function(e){return t.$v.form.username.$touch()}},scopedSlots:t._u([{key:"label",fn:function(){return[s("span",{staticClass:"red--text"},[s("strong",[t._v("* ")])]),t._v(t._s(t.$vuetify.lang.t("$vuetify.users.cols.username.title"))+" ")]},proxy:!0}]),model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"4"}},[s("v-autocomplete",{staticClass:"font-weight-bold",attrs:{items:t.itemsRole,loading:t.isLoadingRole,"search-input":t.searchRole,color:"primary","item-text":"group_name","return-object":"",clearable:"","item-value":"id",label:t.$vuetify.lang.t("$vuetify.users.cols.role.title"),"prepend-inner-icon":"mdi-account mdi-dark mdi-18px",outlined:"",dense:""},on:{"update:searchInput":function(e){t.searchRole=e},"update:search-input":function(e){t.searchRole=e}},scopedSlots:t._u([{key:"label",fn:function(){return[s("span",{staticClass:"red--text"},[s("strong",[t._v("* ")])]),t._v(t._s(t.$vuetify.lang.t("$vuetify.users.cols.role.title"))+" ")]},proxy:!0}]),model:{value:t.form.groups,callback:function(e){t.$set(t.form,"groups",e)},expression:"form.groups"}})],1),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"1"}},[t._.includes(this.$auth.user().permissions,"add_permission")?s("v-btn",{attrs:{dark:"",dense:"",color:"primary"},on:{click:function(e){return t.createPermission()}}},[s("v-icon",{attrs:{dark:""}},[t._v(" mdi-plus ")])],1):t._e()],1),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"12"}},[s("v-autocomplete",{staticClass:"font-weight-bold",attrs:{items:t.itemsHospital,loading:t.isLoadingHospital,"search-input":t.searchHospital,color:"primary","item-text":"name","item-value":"id",clearable:"",label:t.$vuetify.lang.t("$vuetify.users.cols.role.title"),"prepend-inner-icon":"mdi-account mdi-dark mdi-18px",outlined:"",dense:""},on:{"update:searchInput":function(e){t.searchHospital=e},"update:search-input":function(e){t.searchHospital=e}},scopedSlots:t._u([{key:"label",fn:function(){return[s("span",{staticClass:"red--text"},[s("strong",[t._v("* ")])]),t._v(t._s(t.$vuetify.lang.t("$vuetify.hospitals.title"))+" ")]},proxy:!0}]),model:{value:t.form.hospital,callback:function(e){t.$set(t.form,"hospital",e)},expression:"form.hospital"}})],1),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"6"}},[s("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.users.cols.password.title"),"prepend-inner-icon":"mdi-shield-account-outline mdi-dark mdi-18px","error-messages":t.passwordErrors,type:"password",outlined:"",dense:""},on:{blur:function(e){return t.$v.form.password.$touch()},input:function(e){return t.$v.form.password.$touch()}},scopedSlots:t._u([{key:"label",fn:function(){return[s("span",{staticClass:"red--text"},[s("strong",[t._v("* ")])]),t._v(t._s(t.$vuetify.lang.t("$vuetify.users.cols.password.title"))+" ")]},proxy:!0}]),model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"6"}},[s("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.users.cols.re_password.title"),"error-messages":t.rePasswordErrors,"prepend-inner-icon":"mdi-shield-account-outline mdi-dark mdi-18px",type:"password",outlined:"",dense:""},on:{blur:function(e){return t.$v.form.re_password.$touch()},input:function(e){return t.$v.form.re_password.$touch()}},scopedSlots:t._u([{key:"label",fn:function(){return[s("span",{staticClass:"red--text"},[s("strong",[t._v("* ")])]),t._v(t._s(t.$vuetify.lang.t("$vuetify.users.cols.re_password.title"))+" ")]},proxy:!0}]),model:{value:t.form.re_password,callback:function(e){t.$set(t.form,"re_password",e)},expression:"form.re_password"}})],1),"PATIENT"===t.form.type?s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"12"}},[s("v-autocomplete",{staticClass:"font-weight-bold",attrs:{outlined:"",dense:"",items:t.itemsPatient,required:"",loading:t.isLoadingPatient,"search-input":t.searchPatient,color:"primary","item-text":"name","item-value":"id",label:t.$vuetify.lang.t("$vuetify.appointment.cols.patient.title"),clearable:""},on:{"update:searchInput":function(e){t.searchPatient=e},"update:search-input":function(e){t.searchPatient=e}},model:{value:t.form.patient,callback:function(e){t.$set(t.form,"patient",e)},expression:"form.patient"}})],1):t._e()],1)],1)],1),s("v-divider",{staticClass:"mx-4",staticStyle:{"margin-top":"-25px"}}),s("v-card-actions",[s("v-spacer"),s("v-btn",{on:{click:function(e){t.dialog.show=!1}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.close"))+" ")]),s("v-btn",{attrs:{color:"primary",loading:t.loading,dark:"",type:"submit"}},[t._v(" "+t._s(t.$vuetify.lang.t(t.messages.submit))+" ")])],1)],1)],1)],1),s("form-permission",{attrs:{dialog:t.dialogFormPermission}})],1)},et=[],st={mixins:[u["a"]],props:{form:{type:Object,default:function(){return{id:null,code:null,position_held:null,doctor:null,hospital:null,patient:null,username:null,password:null,type:null,groups:null,re_password:null,role:null}}}},data:function(){return{e1:1,isLoading:!1,is_active:!0,isLoadingD:!1,isLoadingP:!1,urlRole:"users/roles",itemsRole:[],searchRole:null,isLoadingRole:!1,search:null,dialogFormPermission:{show:!1,shows:{showFilter:!1,showInfo:!1}},menu2:!1,menu3:!1,menu4:!1,menu:!1,searchDepart:null,isLoadingDepot:!1,searchDepot:null,itemsDepot:[],isLoadingHospital:!1,searchHospital:null,itemsHospital:[],urlDepot:"storage_depots",urlPatients:"patients",urlHospital:"hospitals",urlDoctors:"doctors",isLoadingPatient:!1,isLoadingDoctor:!1,searchPatient:null,searchDoctor:null,itemsPatient:[],itemsDoctor:[],formData:{id:null,name:null},dialogForm:{show:!1,shows:{showFilter:!1,showInfo:!1}},optionType:{type_Role:[]},urlItems:"users",types:{role:[]},itemsRoles:[]}},watch:{searchPatient:function(t){var e=this;if(null!==t){var s={name:t},i=this;this.isLoading=!0,this.$store.dispatch("request",{url:i.urlPatients,params:s}).then((function(t){i.itemsPatient=t.data.content})).finally((function(){return e.isLoading=!1}))}},searchDoctor:function(t){var e=this;if(null!==t){var s={name:t},i=this;this.isLoading=!0,this.$store.dispatch("request",{url:i.urlDoctors,params:s}).then((function(t){i.itemsDoctor=t.data.content})).finally((function(){return e.isLoading=!1}))}},searchDepot:function(t){var e=this;if(null!==t){var s={name:t},i=this;this.isLoadingDepot=!0,this.$store.dispatch("request",{url:i.urlDepot,params:s}).then((function(t){i.itemsDepot=t.data.content})).finally((function(){return e.isLoadingDepot=!1}))}},searchHospital:function(t){var e=this;if(null!==t){var s={name:t},i=this;this.isLoadingHospital=!0,this.$store.dispatch("request",{url:i.urlHospital,params:s}).then((function(t){i.itemsHospital=t.data.content})).finally((function(){return e.isLoadingHospital=!1}))}},searchRole:function(t){var e=this;if(null!==t){var s={group_name:t},i=this;this.isLoadingRole=!0,this.$store.dispatch("request",{url:i.urlRole,params:s,limit:50}).then((function(t){i.itemsRole=t.data.content})).finally((function(){return e.isLoadingRole=!1}))}}},created:function(){this.getOptionsRole()},validations:function(){var t={form:{username:{required:q["required"],maxLength:Object(q["maxLength"])(255),minLength:Object(q["minLength"])(3),unique:L["bb"]},groups:{required:q["required"]},password:{required:Object(q["requiredIf"])((function(t){return!t["id"]}))},re_password:{sameAsPassword:Object(q["sameAs"])("password")}}};return t},methods:{createPermission:function(){this.dialogFormPermission.show=!0},createD:function(){this.dialogForm.show=!0,this.formData={id:null,name:null}},getOptionsRole:function(){var t=this;this._.each(this.$store.getters.roles,(function(e){t.optionType.type_Role.push({text:t.$vuetify.lang.t(e.text),value:e.value})}))},getDataForm:function(){var t={username:this.form.username,role:this.form.role,hospital:this.form.hospital,type:this.form.type,patient:this.form.patient,groups:this.form.groups["group"]["id"],is_active:this.is_active};return this._.isNull(this.form.password)||(t.password=this.form.password),this._.isNull(this.form.re_password)||(t.re_password=this.form.re_password),t},setForm:function(t){var e,s,i;this.form.id=t.id,this.form.code=t.code,this.form.type=t.type,this.form.username=t.username,this.form.patient=null===t.patient?"":t.patient["id"],this.itemsPatient.push(t.patient),this.form.hospital=null===t.hospital?"":t.hospital["id"],this.itemsHospital.push(t.hospital),this.form["oldUsername"]=t.username,this._.isEmpty(t.password)&&this._.isNull(t.password)||(this.form.password=t.password),this._.isEmpty(t.re_password)&&this._.isNull(t.re_password)||(this.form.re_password=t.re_password),this.is_active=t.is_active,this.form.groups=null!==(e=null===(s=t.groups)||void 0===s||null===(i=s[0])||void 0===i?void 0:i.id)&&void 0!==e?e:null,this.itemsRole.push(t.groups[0])}},computed:{get_patient_code:function(){var t,e="";return e="CAISSIER"===(null===(t=this.form.groups)||void 0===t?void 0:t.name),e},roleErrors:function(){var t=[];return this.$v.form.groups.$dirty?(!this.$v.form.groups.required&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.role.required")),t):t},typeErrors:function(){var t=[];return this.$v.form.type.$dirty?(!this.$v.form.type.required&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.role.required")),t):t},usernameErrors:function(){var t=[];return this.$v.form.username.$dirty?(!this.$v.form.username.required&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.username.required")),!this.$v.form.username.minLength&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.username.minLength",this.$v.form.username.$params.minLength.min)),!this.$v.form.username.maxLength&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.username.maxLength",this.$v.form.username.$params.maxLength.max)),!this.$v.form.username.unique&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.username.unique")),t):t},passwordErrors:function(){var t=[];return this.$v.form.password.$dirty?(!this.$v.form.password.required&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.password.required")),t):t},rePasswordErrors:function(){var t=[];return this.$v.form.re_password.$dirty?(!this.$v.form.re_password.sameAsPassword&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.re_password.error")),t):t},firstnameErrors:function(){var t=[];return this.$v.form.code_user.$dirty?(!this.$v.form.code_user.required&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.code_user.required")),!this.$v.form.code_user.maxLength&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.code_user.maxLength",this.$v.form.code_user.$params.maxLength.max)),t):t},lastnameErrors:function(){var t=[];return this.$v.form.position_held.$dirty?(!this.$v.form.position_held.required&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.position_held.required")),!this.$v.form.position_held.maxLength&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.position_held.maxLength",this.$v.form.position_held.$params.maxLength.max)),t):t},emailErrors:function(){var t=[];return this.$v.form.email.$dirty?(!this.$v.form.email.required&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.email.required")),!this.$v.form.email.maxLength&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.email.invalid")),!this.$v.form.email.email&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.email.invalid")),!this.$v.form.email.unique&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.email.unique")),t):t},phoneErrors:function(){var t=[];return this.$v.form.phone.$dirty?(!this.$v.form.phone.phoneR&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.phone.invalid")),!this.$v.form.phone.unique&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.phone.unique")),t):t},other_phoneErrors:function(){var t=[];return this.$v.form.other_phone.$dirty?(!this.$v.form.other_phone.phoneR&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.phone.invalid")),!this.$v.form.other_phone.unique&&t.push(this.$vuetify.lang.t("$vuetify.users.cols.phone.unique")),t):t}},components:{FormPermission:z}},it=st,rt=Object(m["a"])(it,tt,et,!1,null,null,null),ot=rt.exports;h()(rt,{VAutocomplete:Q["a"],VBtn:f["a"],VCard:v["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:g["c"],VCol:F["a"],VContainer:O["a"],VDialog:y["a"],VDivider:$["a"],VForm:B["a"],VIcon:N["a"],VRow:U["a"],VSpacer:b["a"],VSwitch:W["a"],VTextField:Y["a"]});var nt=s("cd41"),at={mixins:[w["a"]],data:function(){return{urlItems:"/users",sortBy:["id"],dialogForm:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogFormSuper:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogDelete:{show:!1},dialogDetail:{show:!1},dialogEnt:{show:!1},form:{id:null,code_user:null,email:null,username:null,password:null,role:null,is_active:null},filter:{username:null,role:null},messages:{title:"",submit:"",success:""},messagesDelete:{success:"$vuetify.users.delete.success"}}},methods:{setHeaders:function(){this.headers=[{text:"$vuetify.users.cols.username.title",value:"username",align:"start",sortable:!0,width:"15",class:"grey--text text--darken-3"},{text:this.$vuetify.lang.t("$vuetify.users.cols.role.title"),value:"role",align:"start",sortable:!0,width:"6",class:"grey--text text--darken-3"},{text:"$vuetify.users.cols.status.title",value:"is_active",align:"start",sortable:!0,width:"1",class:"grey--text text--darken-3"},{text:"$vuetify.users.cols.created.title",value:"create_date",align:"start",sortable:!0,width:"105",class:"grey--text text--darken-3"},{text:"$vuetify.users.cols.actions.title",value:null,align:"start",sortable:!0,width:"40"}]},create:function(){this.$auth.user().is_superuser?this.dialogFormSuper.show=!0:this.dialogForm.show=!0,this.messages={title:"$vuetify.users.new.title",submit:"$vuetify.users.new.submit",success:"$vuetify.users.new.success"},this.form={id:null,code_user:null,position_held:null,doctor:null,patient:null,username:null,password:null,re_password:null,role:null,is_active:!1}},editUser:function(t){this.$auth.user().is_superuser?this.dialogFormSuper.show=!0:this.dialogForm.show=!0,this.messages={title:"$vuetify.users.update.title",submit:"$vuetify.users.update.submit",success:"$vuetify.users.update.success"},this.$refs.userForm.setForm(t)},enabled:function(t){this.$refs.enableUser.setForm(t),t.is_active?(this.dialogForm.shows.showInfo=!0,this.messages={title:"$vuetify.users.cols.status.disabled",submit:"$vuetify.users.update.submit",success:"$vuetify.users.update.success"}):(this.dialogForm.shows.showInfo=!0,this.messages={title:"$vuetify.users.cols.status.enabled",submit:"$vuetify.users.update.submit",success:"$vuetify.users.update.success"})},showFilter:function(){this.dialogForm.shows.showFilter=!0},performFilter:function(){var t=this;t.loading.list=!0;var e={};null!==t.filter.username&&(e["username"]=t.filter.username),null!==t.filter.code&&(e["code"]=t.filter.code),t._search=e,t.getItems().then((function(){t.$refs.filterForm.closeDialog()})).finally((function(){t.$refs.filterForm.stopLoadingBtn()}))},assignEnterprise:function(t){this.dialogEnt.show=!0,this.$refs.assignForm.setForm(t)}},computed:{get_permissions:function(){var t="";return t=this._.includes(this.$auth.user().permissions,"change_user"),t}},components:{FormUser:Z,FormSuper:ot,FormEnable:x,DeleteItem:nt["a"]}},lt=at,ut=s("8fea"),ct=s("ce87"),dt=s("3a2f"),mt=Object(m["a"])(lt,o,n,!1,null,"da4f33c6",null),pt=mt.exports;h()(mt,{VBtn:f["a"],VCard:v["a"],VDataTable:ut["a"],VHover:ct["a"],VIcon:N["a"],VSpacer:b["a"],VTooltip:dt["a"]});var ht={metaInfo:function(){return{title:this.$vuetify.lang.t("$vuetify.users.title")}},data:function(){return{}},components:{User:pt}},ft=ht,vt=Object(m["a"])(ft,i,r,!1,null,null,null);e["default"]=vt.exports}}]);
//# sourceMappingURL=chunk-bf66cd24.9b68724a.js.map