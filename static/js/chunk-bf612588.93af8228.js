(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bf612588"],{cd41:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-dialog",{attrs:{"max-width":"300px"},model:{value:t.dialog.show,callback:function(e){t.$set(t.dialog,"show",e)},expression:"dialog.show"}},[s("v-card",[s("v-card-text",[s("v-divider",{staticClass:"mx-4"}),s("v-card-text",[s("div",{staticClass:"body-1 font-weight-bold"},[s("br"),s("h3",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.delete.confirm"))+" ")])])])],1),s("v-divider",{staticClass:"mx-4",staticStyle:{"margin-top":"-30px"}}),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{disabled:t.loading},on:{click:function(e){t.dialog.show=!1}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.no"))+" ")]),s("v-btn",{attrs:{loading:t.loading,dark:"",color:"#0984e3"},on:{click:function(e){return t.deleteItem()}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.yes"))+" ")])],1)],1)],1)},i=[],n={props:{dialog:{type:Object,default:function(){return{show:!1}}},urlItems:{type:String,default:""},messages:{type:Object,default:function(){return{success:""}}}},data:function(){return{loading:!1}},methods:{deleteItem:function(){var t=this;this.loading=!0,this.$store.dispatch("request",{url:t.urlItems,method:"DELETE",data:t.urlDeleteItems}).then((function(){t.$store.dispatch("showNotification",{statut:!0,text:t.$vuetify.lang.t(t.messages.success)}),t.$emit("getItems"),t.dialog.show=!1})).catch((function(e){console.log("erreur delete",e),t.$store.dispatch("showNotification",{statut:!0,text:t.$vuetify.lang.t("$vuetify.deletedErrors")})})).then((function(){t.loading=!1}))}}},o=n,r=s("2877"),l=s("6544"),c=s.n(l),u=s("8336"),m=s("b0af"),d=s("99d9"),h=s("169a"),f=s("ce7e"),v=s("2fa4"),_=Object(r["a"])(o,a,i,!1,null,null,null);e["a"]=_.exports;c()(_,{VBtn:u["a"],VCard:m["a"],VCardActions:d["a"],VCardText:d["b"],VDialog:h["a"],VDivider:f["a"],VSpacer:v["a"]})},d258:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"title mb-5 black--text lighten-5 text-center",staticStyle:{height:"30px","margin-top":"30px","background-color":"#e9eef4"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.cash_movement.list.title2"))+" ")]),s("user",{attrs:{color:"black"}})],1)},i=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-card",[s("div",{staticClass:"mt-5 mx-5"},[[t._.includes(this.$auth.user().permissions,"add_cash_movement")?s("v-btn",{staticClass:"my-2 mr-2 white--text",attrs:{color:"primary"},on:{click:function(e){return t.createCashMovement()}}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.cash_movement.titleTransfer"))+" ")],1):t._e()],s("v-btn",{staticClass:"mr-2 my-2",attrs:{loading:t.loading.refresh,depressed:"",color:"#f1f5fc"},on:{click:function(e){return t.refreshItems()}}},[s("v-icon",{attrs:{left:"",color:"primary"}},[t._v("mdi-refresh")]),t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.refresh"))+" ")],1),s("v-spacer")],2),s("div",[s("v-card-title",[s("div",{staticClass:"title"},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.cash_movement.filterTransfer"))+" ")])]),s("v-card-text",[s("v-row",{attrs:{wrap:""}},[s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"6"}},[s("v-menu",{attrs:{color:"primary","close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,i=e.attrs;return[s("v-text-field",t._g(t._b({staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.item_movements.cols.period_of.title"),"prepend-inner-icon":"mdi-calendar",outlined:"",dense:"",clearable:"",readonly:""},model:{value:t.filter.start_date,callback:function(e){t.$set(t.filter,"start_date",e)},expression:"filter.start_date"}},"v-text-field",i,!1),a))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[s("v-date-picker",{attrs:{color:"primary"},on:{change:t.performFilter,input:function(e){t.menu=!1}},model:{value:t.filter.start_date,callback:function(e){t.$set(t.filter,"start_date",e)},expression:"filter.start_date"}})],1)],1),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"6"}},[s("v-menu",{attrs:{color:"primary","close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,i=e.attrs;return[s("v-text-field",t._g(t._b({staticClass:"font-weight-bold",attrs:{color:"primary",clearable:"",label:t.$vuetify.lang.t("$vuetify.item_movements.cols.period_of.title2"),"prepend-inner-icon":"mdi-calendar",outlined:"",dense:"",readonly:""},model:{value:t.filter.end_date,callback:function(e){t.$set(t.filter,"end_date",e)},expression:"filter.end_date"}},"v-text-field",i,!1),a))]}}]),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[s("v-date-picker",{attrs:{min:this.filter.start_date,color:"primary"},on:{change:t.performFilter,input:function(e){t.menu2=!1}},model:{value:t.filter.end_date,callback:function(e){t.$set(t.filter,"end_date",e)},expression:"filter.end_date"}})],1)],1)],1)],1)],1),s("v-data-table",{staticClass:"mt-5",attrs:{"footer-props":{"items-per-page-options":t.itemPerPageOptions},headers:t.headers,items:t.items,"items-per-page":t.itemPerPage,loading:t.loading.list,options:t.pagination,"server-items-length":t.meta.totalElements,"sort-by":t.sortBy,"item-key":"name"},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"header.create_date",fn:function(e){var a=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.cash_origin",fn:function(e){var a=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.balance_before",fn:function(e){var a=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.amount_movement",fn:function(e){var a=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.physical_amount",fn:function(e){var a=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.cash_destination",fn:function(e){var a=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.balance_after",fn:function(e){var a=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.motive",fn:function(e){var a=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.null",fn:function(e){var a=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"body",fn:function(e){var a=e.items;return[s("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var i=e.hover;return s("tbody",{},t._l(a,(function(e){return s("tr",{key:e.id},[s("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(t.$moment(e.createdAt).format("YYYY-MM-DD"))+" "+t._s(e.timeAt)+" ")]),s("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.cash_origin.code)+" - "+t._s(e.cash_origin.user.username)+" ")]),s("td",{staticClass:"subtitle-2"},[t._v(t._s(e.balance_before))]),s("td",{staticClass:"subtitle-2"},[t._v(t._s(e.amount_movement))]),s("td",{staticClass:"subtitle-2"},[t._v(t._s(e.physical_amount))]),s("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.cash_destination.code)+" - "+t._s(e.cash_destination.user.username)+" ")]),s("td",{staticClass:"subtitle-2"},[t._v(t._s(e.balance_after))]),s("td",{staticClass:"subtitle-2"},[t._v(t._s(e.motive))]),s("td",{staticClass:"subtitle-2"},[[s("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([t._.includes(t.$auth.user().permissions,"delete_cash_movement")?{key:"activator",fn:function(a){var n=a.on;return[s("v-btn",t._g({directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.smAndDown||i,expression:"$vuetify.breakpoint.smAndDown || hover"}],attrs:{color:"red",icon:"",text:"",dark:""},on:{click:function(s){return t.deleteItem(e)}}},n),[s("v-icon",[t._v("mdi-delete-outline")])],1)]}}:null],null,!0)},[s("span",[t._v(t._s(t.$vuetify.lang.t("$vuetify.btn.remove")))])])]],2)])})),0)}}],null,!0)})]}}])}),s("delete-item",{attrs:{dialog:t.dialogDelete,messages:t.messagesDelete,urlItems:t.urlDeleteItems},on:{getItems:t.getItems}}),s("form-movement",{ref:"cash_movementForm",attrs:{dialog:t.dialogFormMovement,messages:t.messages},on:{getItems:t.getItems}})],1)],1)},o=[],r=(s("4de4"),s("b64b"),s("d3b7"),s("24a2")),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-dialog",{attrs:{persistent:"","max-width":"980px"},model:{value:t.dialog.show,callback:function(e){t.$set(t.dialog,"show",e)},expression:"dialog.show"}},[s("v-card",[s("v-card-title",[s("div",{staticClass:"title"},[t._v(" "+t._s(t.$vuetify.lang.t(t.messages.title))+" ")])]),s("v-divider",{staticClass:"mx-4"}),s("v-form",{on:{submit:function(e){return e.preventDefault(),t.save_print_bills()}}},[s("v-card",[s("v-card-text",[s("v-container",[s("v-row",{attrs:{wrap:""}},[s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"6"}},[s("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.cash_movement.cols.code.title"),"prepend-inner-icon":"mdi-code-array mdi-dark mdi-18px",outlined:"",dense:"",filled:"",readonly:""},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"6"}}),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"6"}},[s("v-autocomplete",{staticClass:"font-weight-bold",attrs:{items:t.itemsCash_origin,loading:t.isLoadingCash_origin,"search-input":t.searchCash_origin,"error-messages":t.cash_originErrors,"return-object":"",color:"primary","item-text":"code","item-value":"id",label:t.$vuetify.lang.t("$vuetify.cash_movement.cols.cash_origin.title"),"prepend-inner-icon":"mdi-arrow-collapse-left mdi-dark mdi-18px",outlined:"",dense:"",clearable:""},on:{"update:searchInput":function(e){t.searchCash_origin=e},"update:search-input":function(e){t.searchCash_origin=e},blur:function(e){return t.$v.form.cash_origin.$touch()},input:function(e){return t.$v.form.cash_origin.$touch()}},scopedSlots:t._u([{key:"selection",fn:function(e){return[t._v(" "+t._s(e.item.code)+" - "+t._s(e.item.user.username)+" - "+t._s(t.$vuetify.lang.t("$vuetify.cash.cols.type_cash."+e.item.type_cash))+" ")]}},{key:"item",fn:function(e){return[t._v(" "+t._s(e.item.code)+" - "+t._s(e.item.user.username)+" - "+t._s(t.$vuetify.lang.t("$vuetify.cash.cols.type_cash."+e.item.type_cash))+" ")]}},{key:"label",fn:function(){return[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.cash_movement.cols.cash_origin.title"))),s("span",{staticClass:"red--text"},[s("strong",[t._v("* ")])])]},proxy:!0}]),model:{value:t.form.cash_origin,callback:function(e){t.$set(t.form,"cash_origin",e)},expression:"form.cash_origin"}})],1),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"6"}},[s("v-autocomplete",{staticClass:"font-weight-bold",attrs:{items:t.itemsCash_destination,loading:t.isLoadingCash_destination,"search-input":t.searchCash_destination,"error-messages":t.cash_destinationErrors,color:"primary","return-object":"","item-text":"code","item-value":"id",label:t.$vuetify.lang.t("$vuetify.cash_movement.cols.cash_destination.title"),"prepend-inner-icon":"mdi-arrow-collapse-right mdi-dark mdi-18px",outlined:"",dense:"",clearable:""},on:{"update:searchInput":function(e){t.searchCash_destination=e},"update:search-input":function(e){t.searchCash_destination=e},blur:function(e){return t.$v.form.cash_destination.$touch()},input:function(e){return t.$v.form.cash_destination.$touch()}},scopedSlots:t._u([{key:"selection",fn:function(e){return[t._v(" "+t._s(e.item.code)+" - "+t._s(e.item.user.username)+" - "+t._s(t.$vuetify.lang.t("$vuetify.cash.cols.type_cash."+e.item.type_cash))+" ")]}},{key:"item",fn:function(e){return[t._v(" "+t._s(e.item.code)+" - "+t._s(e.item.user.username)+" - "+t._s(t.$vuetify.lang.t("$vuetify.cash.cols.type_cash."+e.item.type_cash))+" ")]}},{key:"label",fn:function(){return[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.cash_movement.cols.cash_destination.title"))),s("span",{staticClass:"red--text"},[s("strong",[t._v("* ")])])]},proxy:!0}]),model:{value:t.form.cash_destination,callback:function(e){t.$set(t.form,"cash_destination",e)},expression:"form.cash_destination"}})],1),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"4"}},[s("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary","error-messages":t.amount_movementErrors,label:t.$vuetify.lang.t("$vuetify.cash_movement.cols.amount_movement.title"),"prepend-inner-icon":"mdi-cash mdi-dark mdi-18px",outlined:"",readonly:"",type:"number",min:"0",rules:[t.numberRule],dense:"",suffix:"FCFA"},on:{blur:function(e){return t.$v.form.amount_movement.$touch()},input:function(e){return t.$v.form.amount_movement.$touch()}},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.cash_movement.cols.amount_movement.title"))),s("span",{staticClass:"red--text"},[s("strong",[t._v("* ")])])]},proxy:!0}]),model:{value:t.form.amount_movement,callback:function(e){t.$set(t.form,"amount_movement",t._n(e))},expression:"form.amount_movement"}})],1),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"4"}},[s("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.cash_movement.cols.physical_amount.title"),"prepend-inner-icon":"mdi-cash mdi-dark mdi-18px",outlined:"",type:"number",min:"0",rules:[t.numberRule],dense:"",suffix:"FCFA"},model:{value:t.form.physical_amount,callback:function(e){t.$set(t.form,"physical_amount",e)},expression:"form.physical_amount"}})],1),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"4"}},[s("v-text-field",{staticClass:"font-weight-bold",attrs:{value:t.difference,color:"primary",readonly:"",label:t.$vuetify.lang.t("$vuetify.cash_movement.cols.difference.title"),"prepend-inner-icon":"mdi-text-shadow mdi-dark mdi-18px",type:"motive",outlined:"",dense:""}})],1),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"12"}},[s("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.cash_movement.cols.motive.title"),"prepend-inner-icon":"mdi-text-shadow mdi-dark mdi-18px",type:"motive",outlined:"",dense:""},model:{value:t.form.motive,callback:function(e){t.$set(t.form,"motive",e)},expression:"form.motive"}})],1)],1),"same_cash"===this.checkCash()?s("v-card-text",{staticClass:"mt-3",staticStyle:{"background-color":"#ffeaea","border-radius":"4px"}},[s("div",{staticClass:"d-flex align-center py-2 px-3"},[s("v-icon",{staticClass:"mr-2",attrs:{color:"red",size:"24"}},[t._v("mdi-alert")]),s("h3",{staticClass:"red--text font-weight-bold mb-0"},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.cash_movement.same_cash"))+" ")])],1)]):t._e(),"counter_bank"===this.checkCash()?s("v-card-text",{staticClass:"mt-3",staticStyle:{"background-color":"#ffeaea","border-radius":"4px"}},[s("div",{staticClass:"d-flex align-center py-2 px-3"},[s("v-icon",{staticClass:"mr-2",attrs:{color:"red",size:"24"}},[t._v("mdi-alert")]),s("h3",{staticClass:"red--text font-weight-bold mb-0"},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.cash_movement.counter_bank"))+" ")])],1)]):t._e(),"bank_counter"===this.checkCash()?s("v-card-text",{staticClass:"mt-3",staticStyle:{"background-color":"#ffeaea","border-radius":"4px"}},[s("div",{staticClass:"d-flex align-center py-2 px-3"},[s("v-icon",{staticClass:"mr-2",attrs:{color:"red",size:"24"}},[t._v("mdi-alert")]),s("h3",{staticClass:"red--text font-weight-bold mb-0"},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.cash_movement.bank_counter"))+" ")])],1)]):t._e(),0===this.form.amount_movement?s("v-card-text",{staticClass:"mt-3",staticStyle:{"background-color":"#ffeaea","border-radius":"4px"}},[s("div",{staticClass:"d-flex align-center py-2 px-3"},[s("v-icon",{staticClass:"mr-2",attrs:{color:"red",size:"24"}},[t._v("mdi-alert")]),s("h3",{staticClass:"red--text font-weight-bold mb-0"},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.cash_movement.bank_counter"))+" ")])],1)]):t._e()],1)],1),s("v-divider",{staticClass:"mx-4",staticStyle:{"margin-top":"-25px"}}),s("v-card-actions",[s("v-spacer"),s("v-btn",{on:{click:function(e){return t.close()}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.close"))+" ")]),s("v-btn",{attrs:{color:"primary",loading:t.loading,type:"submit",disabled:null===this.form.amount_movement||0===this.form.amount_movement||["same_cash","counter_bank","bank_counter"].includes(t.checkCash())}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.bills.new.save_print_bills"))+" ")])],1)],1)],1)],1),s("form-pdf",{ref:"pdfForm",attrs:{dialog:t.dialogFormPdf}})],1)},c=[],u=s("53ca"),m=s("5ed4"),d=s("8980"),h=s("b5ae"),f={mixins:[m["a"]],props:{form:{type:Object,default:function(){return{id:null,code:null,type:null,motive:null,cash_origin:null,difference:null,physical_amount:null,cash_destination:null,amount_movement:null}}}},data:function(){return{formData:{id:null,name:null},dialogFormPdf:{show:!1,shows:{showFilter:!1,showInfo:!1}},optionType_cash_movement:{type_cash_movement:[]},numberRule:function(t){return!(t<0)||"Veuillez entrer un nombre positif"},urlItemsCash_origin:"cashs/all",itemsCash_origin:[],isLoadingCash_origin:!1,searchCash_origin:null,urlItemsCash_destination:"cashs/all",itemsCash_destination:[],isLoadingCash_destination:!1,searchCash_destination:null,dialogForm:{show:!1,shows:{showFilter:!1,showInfo:!1}},urlItems:"cash_movements"}},watch:{"form.cash_origin":function(t){this.form.amount_movement=t?t["balance"]:null},searchExpenses_nature:function(t){var e=this;if(null!==t){var s={code:t},a=this;this.isLoadingExpenses_nature=!0,this.$store.dispatch("request",{url:a.urlItemsExpenses_nature,params:s}).then((function(t){a.itemsExpenses_nature=t.data.content})).finally((function(){return e.isLoadingExpenses_nature=!1}))}},searchCash_destination:function(t){var e=this;if(null!==t){var s={code:t,is_transfer:!1},a=this;this.isLoadingCash_destination=!0,this.$store.dispatch("request",{url:a.urlItemsCash_destination,params:s}).then((function(t){a.itemsCash_destination=t.data.content})).finally((function(){return e.isLoadingCash_destination=!1}))}},searchCash_origin:function(t){var e=this;if(null!==t){var s={code:t,is_transfer:!1},a=this;this.isLoadingCash_origin=!0,this.$store.dispatch("request",{url:a.urlItemsCash_origin,params:s}).then((function(t){a.itemsCash_origin=t.data.content})).finally((function(){return e.isLoadingCash_origin=!1}))}}},created:function(){},validations:function(){var t={form:{amount_movement:{required:h["required"]},cash_origin:{required:h["required"]},cash_destination:{required:h["required"]}}};return t},methods:{getOptionsType_cash_movement:function(){var t=this;this._.each(this.$store.getters.type_cash_movement,(function(e){t.optionType_cash_movement.type_cash_movement.push({text:t.$vuetify.lang.t(e.text),value:e.value})}))},editPdf:function(t){this.dialogFormPdf.show=!0,this.$refs.pdfForm.setForm(t)},getDataForm:function(){var t={amount_movement:this.form.amount_movement,type_cash_movement:this.form.type_cash_movement,difference:this.difference,physical_amount:null==this.form.physical_amount?0:this.form.physical_amount,cash_origin:this.form.cash_origin["id"],cash_destination:this.form.cash_destination["id"],type:"TRANSFER",motive:this.form.motive};return t},save_print_bills:function(){var t=this;this.$store.dispatch("showNotification",{statut:!1});var e=this;e.$v.$touch(),e.$v.$invalid||(this.loading=!0,this.$store.dispatch("request",{url:e.getRoute(),method:e.getMethod(),data:e.getDataForm(),responseType:"blob"}).then((function(){e.$store.dispatch("showNotification",{statut:!0,text:e.$vuetify.lang.t(e.messages.success)}),"PUT"===t.getMethod()?e.$emit("getItems"):(e.$emit("getItems"),e.resetDataForm())})).catch((function(s){var a="$vuetify.error_server";if(s.response&&400===s.response.status){var i=s.response.data;e.setFormErrors(i),t.$forceUpdate();var n=Object.keys(i)[0];n&&Array.isArray(i[n])&&(a=i[n][0])}e.$store.dispatch("showNotification",{statut:!0,text:a,color:"#B71C1C"})})).finally((function(){e.loading=!1})))},close:function(){this.dialog.show=!1,this.resetDataForm()},resetDataForm:function(){if(!this.form.id){var t=this;this.form.cash_origin=null,this.form.cash_destination=null,this.itemsCash_destination=[],this.itemsCash_origin=[],this.$v.form.$reset(),this._.each(this.form,(function(e,s){"object"===Object(u["a"])(t.form[s])?t._.each(t.form[s],(function(e,a){"boolean"===typeof t.form[s][a]?t.form[s][a]=!1:t.form[s][a]=null})):"boolean"===typeof t.form[s]?t.form[s]=!1:t.form[s]=null}))}},setForm:function(t){this.form.id=t.id,this.form.code=t.code,this.form.cash=t.cash,this.form.type=t.type,this.form.difference=t.difference,this.form.type_cash_movement=t.type_cash_movement,this.form.amount_movement=t.amount_movement,this.form.cash_origin=t.cash_origin,this.itemsCash_origin.push(t.cash_origin),this.form.cash_destination=t.cash_destination,this.itemsCash_destination.push(t.cash_destination),this.form.physical_amount=t.physical_amount,this.form.motive=t.motive},checkCash:function(){var t="";return null!==this.form.cash_origin&&null!==this.form.cash_destination&&(this.form.cash_destination.id===this.form.cash_origin.id&&(t="same_cash"),"CASH_COUNTERS"===this.form.cash_origin.type_cash&&"CASH_BANK"===this.form.cash_destination.type_cash&&(t="counter_bank"),"CASH_COUNTERS"===this.form.cash_destination.type_cash&&"CASH_BANK"===this.form.cash_origin.type_cash&&(t="bank_counter")),t}},computed:{difference:function(){return this.form.amount_movement-this.form.physical_amount},get_movement_type:function(){var t,e="";return e=null===this.form.expenses_nature?"":null===(t=this.form.expenses_nature)||void 0===t?void 0:t.type,e},amount_movementErrors:function(){var t=[];return this.$v.form.amount_movement.$dirty?(!this.$v.form.amount_movement.required&&t.push(this.$vuetify.lang.t("$vuetify.cash_movement.cols.amount_movement.required")),t):t},type_cash_movementErrors:function(){var t=[];return this.$v.form.type_cash_movement.$dirty?(!this.$v.form.type_cash_movement.required&&t.push(this.$vuetify.lang.t("$vuetify.cash_movement.cols.type_cash_movement.required")),t):t},cash_originErrors:function(){var t=[];return this.$v.form.cash_origin.$dirty?(!this.$v.form.cash_origin.required&&t.push(this.$vuetify.lang.t("$vuetify.cash_movement.cols.cash_origin.required")),t):t},cash_destinationErrors:function(){var t=[];return this.$v.form.cash_destination.$dirty?(!this.$v.form.cash_destination.required&&t.push(this.$vuetify.lang.t("$vuetify.cash_movement.cols.cash_destination.required")),t):t}},components:{FormPdf:d["a"]}},v=f,_=s("2877"),p=s("6544"),y=s.n(p),g=s("c6a6"),$=s("8336"),b=s("b0af"),x=s("99d9"),C=s("62ad"),w=s("a523"),k=s("169a"),F=s("ce7e"),I=s("4bd4"),E=s("132d"),V=s("0fd9"),D=s("2fa4"),S=s("8654"),A=Object(_["a"])(v,l,c,!1,null,null,null),T=A.exports;y()(A,{VAutocomplete:g["a"],VBtn:$["a"],VCard:b["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:x["c"],VCol:C["a"],VContainer:w["a"],VDialog:k["a"],VDivider:F["a"],VForm:I["a"],VIcon:E["a"],VRow:V["a"],VSpacer:D["a"],VTextField:S["a"]});var O=s("cd41"),q=s("21a6"),M={mixins:[r["a"]],data:function(){return{urlItems:"cash_movements",urlItemsAll:"cash_movements",urlItemsGet:"/cashs/current",urlItemsCash:"cashs/isOpen",sortBy:["-id"],items:[],cashs:[],isActive:null,current_cash:null,menu2:!1,menu:!1,cash:null,maxDate:(new Date).toISOString().substr(0,10),minDate:(new Date).toISOString().substr(0,10),dialogDelete:{show:!1},dialogDetail:{show:!1},dialogEnt:{show:!1},loading:{list:!1,refresh:!1,filter:!1},dialogFormMovement:{show:!1,shows:{showFilter:!1,showInfo:!1}},form:{id:null,type:null,email:null,code:null,password:null,role:null,is_active:null},filter:{type:null,start_date:null,end_date:null,role:null},messages:{title:"",submit:"",success:""},optionMovement:{type_Movement:[]},messagesDelete:{success:"$vuetify.cash_movement.delete.success"}}},computed:{get_cash_fund:function(){return void 0!==this.cashs&&this.cashs!==[]?this.cashs.cash_fund:0},get_solde:function(){var t=this.get_cash_fund+this.get_sum_entry-this.get_sum_exit;return t},get_sum_entry:function(){var t=this._.filter(this.items,(function(t){return"ENTRY"===t.type})),e=this._.sumBy(t,(function(t){return t.amount_movement}));return e},get_sum_exit:function(){var t=this._.filter(this.items,(function(t){return"EXIT"===t.type})),e=this._.sumBy(t,(function(t){return t.amount_movement}));return e}},created:function(){this.setHeaders,this.getOptionsMovement()},mounted:function(){this.get_all()},methods:{get_all:function(){var t=this;this.getItemsOpen(),setTimeout((function(){t.getItems()}),200)},getOptionsMovement:function(){var t=this;this._.each(this.$store.getters.type_Movement,(function(e){t.optionMovement.type_Movement.push({text:t.$vuetify.lang.t(e.text),value:e.value})}))},createCashMovement:function(){this.dialogFormMovement.show=!0,this.messages={title:"$vuetify.cash_movement.new.title",submit:"$vuetify.cash_movement.new.submit",success:"$vuetify.cash_movement.new.success"}},editCash_movement:function(t){this.dialogFormMovement.show=!0,this.messages={title:"$vuetify.cash_movement.update.title",submit:"$vuetify.cash_movement.update.submit",success:"$vuetify.cash_movement.update.success"},this.$refs.cash_movementForm.setForm(t)},getItemsOpen:function(){var t=this,e=this,s=this.pagination,a=s.page,i=s.itemsPerPage,n={page:a,size:i};return this._.isEmpty(this._search)||(this._search=this._.merge(n,this._search)),new Promise((function(s,a){t.loading.list=!0,e.$store.dispatch("request",{url:e.urlItemsGet,params:n}).then((function(a){var i=a.data;e.cashs=i.content.cash,t.current_cash=e.cashs.id,e.meta={totalElements:i.totalElements},s(a)})).catch((function(s){var i=t.$vuetify.lang.t("$vuetify.error_occured");if(s.response)if(400===s.response.status){var n=s.response.data;e.setFormErrors(n);var o=Object.keys(n)[0];o&&Array.isArray(n[o])&&(i=n[o][0])}else 403===s.response.status?i=e.$vuetify.lang.t("$vuetify.error_denied"):500===s.response.status&&(i=e.$vuetify.lang.t("$vuetify.error_server"));e.$store.dispatch("showNotification",{status:!0,text:i}),a(s)})).then((function(){e.loading.list=!1,s()}))}))},getItems:function(){var t=this,e=this,s=this.pagination,a=s.page,i=s.itemsPerPage,n={page:a,size:i};return this._.isEmpty(this._search)||(this._search=this._.merge(n,this._search)),new Promise((function(s,a){t.loading.list=!0,e.$store.dispatch("request",{url:e.urlItemsAll+"?type=TRANSFER",params:n}).then((function(t){var a=t.data;e.items=a.content,e.meta={totalElements:a.totalElements},s(t)})).catch((function(s){var i=t.$vuetify.lang.t("$vuetify.error_occured");if(s.response)if(400===s.response.status){var n=s.response.data;e.setFormErrors(n);var o=Object.keys(n)[0];o&&Array.isArray(n[o])&&(i=n[o][0])}else 403===s.response.status?i=e.$vuetify.lang.t("$vuetify.error_denied"):500===s.response.status&&(i=e.$vuetify.lang.t("$vuetify.error_server"));e.$store.dispatch("showNotification",{status:!0,text:i}),a(s)})).then((function(){e.loading.list=!1,s()}))}))},exportPDF:function(){var t=this,e={};null!==t.filter.type&&(e["type"]=t.filter.type),null!==t.filter.start_date&&void 0!==t.filter.start_date&&(e["start_date"]=t.filter.start_date),null!==t.filter.end_date&&(e["end_date"]=t.filter.end_date),this._.isEmpty(this._search)||(this._search=this._.merge(e,this._search)),t.$store.dispatch("request",{url:t.urlItemsAll+"?export=pdf",params:e,responseType:"blob"}).then((function(t){var e="Listes des mouvements",s=new Blob([t.data],{type:t.data.type});q.saveAs(s,e)})),this.$store.dispatch("showNotification",{statut:!1})},setHeaders:function(){this.headers=[{text:"$vuetify.cash_movement.cols.created.title",value:"create_date",align:"start",sortable:!1,width:"105",class:"grey--text text--darken-3"},{text:"$vuetify.cash_movement.cols.cash_origin.title",value:"cash_origin",align:"start",sortable:!1,width:"15",class:"grey--text text--darken-3"},{text:"$vuetify.cash_movement.cols.balance_before.title",value:"balance_before",align:"start",sortable:!1,width:"50",class:"grey--text text--darken-3"},{text:"$vuetify.cash_movement.cols.amount_movement.title",value:"amount_movement",align:"start",sortable:!1,width:"50",class:"grey--text text--darken-3"},{text:"$vuetify.cash_movement.cols.physical_amount.title",value:"physical_amount",align:"start",sortable:!1,width:"50",class:"grey--text text--darken-3"},{text:"$vuetify.cash_movement.cols.cash_destination.title",value:"cash_destination",align:"start",sortable:!1,width:"50",class:"grey--text text--darken-3"},{text:"$vuetify.cash_movement.cols.balance_after.title",value:"balance_after",align:"start",sortable:!1,width:"20",class:"grey--text text--darken-3"},{text:"$vuetify.cash_movement.cols.motive.title",value:"motive",align:"start",sortable:!1,width:"20",class:"grey--text text--darken-3"},{text:"$vuetify.cash_movement.cols.actions.title",value:null,align:"start",sortable:!1,width:"140"}]},close:function(t){this.dialogFormClose.shows.showInfo=!0,this.messages={title:"$vuetify.cash.cols.status.enabled",submit:"$vuetify.cash.update.submit",success:"$vuetify.cash.update.success"},this.$refs.closeCash.setForm(t)},open:function(t){this.dialogFormOpen.shows.showInfo=!0,this.messages={title:"$vuetify.cash.cols.status.opened",submit:"$vuetify.cash.update.submit",success:"$vuetify.cash.update.success"},this.$refs.openCash.setForm(t)},showFilter:function(){this.dialogForm.shows.showFilter=!0},performFilter:function(){var t=this;t.loading.list=!0;var e={};null!==t.filter.type&&(e["type"]=t.filter.type),null!==t.filter.start_date&&void 0!==t.filter.start_date&&(e["start_date"]=t.filter.start_date),null!==t.filter.end_date&&(e["end_date"]=t.filter.end_date),t._search=e,t.getItems().then((function(){t.$refs.filterForm.closeDialog()})).finally((function(){t.$refs.filterForm.stopLoadingBtn()}))}},components:{DeleteItem:O["a"],FormMovement:T}},P=M,N=s("8fea"),j=s("2e4b"),L=s("ce87"),R=s("e449"),B=s("3a2f"),z=Object(_["a"])(P,n,o,!1,null,"d2b863a4",null),H=z.exports;y()(z,{VBtn:$["a"],VCard:b["a"],VCardText:x["b"],VCardTitle:x["c"],VCol:C["a"],VDataTable:N["a"],VDatePicker:j["a"],VHover:L["a"],VIcon:E["a"],VMenu:R["a"],VRow:V["a"],VSpacer:D["a"],VTextField:S["a"],VTooltip:B["a"]});var U={metaInfo:function(){return{title:this.$vuetify.lang.t("$vuetify.cash_movement.title")}},data:function(){return{}},components:{User:H}},Y=U,G=Object(_["a"])(Y,a,i,!1,null,null,null);e["default"]=G.exports}}]);
//# sourceMappingURL=chunk-bf612588.93af8228.js.map