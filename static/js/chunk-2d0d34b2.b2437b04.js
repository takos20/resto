(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d34b2"],{"5bc2":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"title mb-5 black--text lighten-5 text-center",staticStyle:{height:"30px","margin-top":"30px","background-color":"#e9eef4"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.bills.list.title"))+" ")]),s("user",{attrs:{color:"black"}})],1)},l=[],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-card",{staticClass:"pb-4"},[s("div",{staticClass:"mt-5 mx-5"},[t._.includes(this.$auth.user().permissions,"add_bills")?[s("v-btn",{staticClass:"mr-2 my-2",attrs:{color:"primary",dark:""},on:{click:function(e){return t.create()}}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-content-paste")]),t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.add"))+" ")],1)]:t._e(),s("v-btn",{staticClass:"mr-2 my-2",attrs:{loading:t.loading.refresh,depressed:"",color:"#f1f5fc"},on:{click:function(e){return t.refreshItems()}}},[s("v-icon",{attrs:{left:"",color:"primary"}},[t._v("mdi-refresh")]),t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.refresh"))+" ")],1),s("v-spacer")],2)]),s("v-card",[!0===this.isActive&&!1===this.isInventory?s("v-data-table",{staticClass:"mt-5",attrs:{"footer-props":{"items-per-page-options":t.itemPerPageOptions},headers:t.headers,items:t.items,"items-per-page":t.itemPerPage,loading:t.loading.list,options:t.pagination,"server-items-length":t.meta.totalElements,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"item-key":"name"},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"header.bill_N",fn:function(e){var a=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.date_bill",fn:function(e){var a=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.bill_type",fn:function(e){var a=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.patient_name",fn:function(e){var a=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.cashier",fn:function(e){var a=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.net_payable",fn:function(e){var a=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.amount_paid",fn:function(e){var a=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.balance",fn:function(e){var a=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.refund",fn:function(e){var a=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.deleted",fn:function(e){var a=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.null",fn:function(e){var a=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(a.text))+" ")])]}},{key:"body",fn:function(e){var a=e.items;return[s("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var l=e.hover;return s("tbody",{},t._l(a,(function(e){return s("tr",{key:e.id},[s("td",{staticClass:"subtitle-2"},[t._v(t._s(e.code))]),s("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(t.$moment(e.createdAt).format("YYYY-MM-DD"))+" "+t._s(e.timeAt)+" ")]),s("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.bills.cols.bill_type."+e.bill_type))+" ")]),s("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.patient.name)+" ")]),s("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.cash.user.username)+" ")]),s("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.bills_amount)+" ")]),s("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.amount_paid)+" ")]),s("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.balance.toFixed(2))+" ")]),s("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.refund.toFixed(2))+" ")]),s("td",[[e.deleted?[s("v-icon",{staticClass:"pointer",attrs:{color:"primary",dark:""}},[t._v(" mdi-check-circle ")])]:[s("v-icon",{staticClass:"pointer",attrs:{color:"red accent-4",dark:""}},[t._v(" mdi-close-circle ")])]]],2),s("td",{staticClass:"subtitle-2"},[[s("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([t._.includes(t.$auth.user().permissions,"change_bills")?{key:"activator",fn:function(a){var i=a.on;return[s("v-btn",t._g({directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.smAndDown||l,expression:"$vuetify.breakpoint.smAndDown || hover"}],attrs:{color:"secondary",icon:"",text:""},on:{click:function(s){return t.editBills(e)}}},i),[s("v-icon",[t._v("mdi-update")])],1)]}}:null],null,!0)},[s("span",[t._v(t._s(t.$vuetify.lang.t("$vuetify.btn.edit")))])]),s("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([t._.includes(t.$auth.user().permissions,"delete_bills")?{key:"activator",fn:function(a){var i=a.on;return[s("v-btn",t._g({directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.smAndDown||l,expression:"$vuetify.breakpoint.smAndDown || hover"}],attrs:{color:"red",icon:"",text:"",dark:""},on:{click:function(s){return t.deleteItem(e)}}},i),[s("v-icon",[t._v("mdi-delete-outline")])],1)]}}:null],null,!0)},[s("span",[t._v(t._s(t.$vuetify.lang.t("$vuetify.btn.remove")))])])]],2)])})),0)}}],null,!0)})]}}],null,!1,818035363)}):t._e(),s("form-bills",{ref:"billsForm",attrs:{dialog:t.dialogForm,form:t.form,messages:t.messages},on:{getItems:t.getItems}}),s("delete-item",{attrs:{dialog:t.dialogDelete,messages:t.messagesDelete,urlItems:t.urlDeleteItems},on:{getItems:t.getItems}}),s("form-cash",{ref:"cashForm",attrs:{dialog:t.dialogFormCash,messages:t.messages},on:{getItems:t.getOpenCash}}),s("form-inv",{ref:"invForm",attrs:{dialog:t.dialogFormInv}})],1)],1)},n=[],r=(s("4de4"),s("b0c0"),s("b64b"),s("d3b7"),s("24a2")),o=s("1603"),u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-dialog",{attrs:{persistent:"","max-width":"680px",transition:"dialog-bottom-transition"},model:{value:t.dialog.show,callback:function(e){t.$set(t.dialog,"show",e)},expression:"dialog.show"}},[s("v-scale-transition",[t.dialog.show?s("v-card",{staticClass:"dialog-card"},[s("v-card-title",{staticClass:"d-flex align-center pb-2"},[s("v-icon",{staticClass:"mr-2",attrs:{color:"red"}},[t._v("mdi-alert-circle")]),s("span",{staticClass:"title font-weight-bold"},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.delete.confirm"))+" ")])],1),s("v-divider"),s("v-card-text",{staticClass:"pt-4"},[s("div",{staticClass:"d-flex align-center"},[s("v-icon",{staticClass:"mr-3",attrs:{color:"red",size:"32"}},[t._v(" mdi-delete-alert ")]),s("h4",{staticClass:"red--text font-weight-medium mb-0"},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.delete.bill"))+" ")])],1)]),s("v-divider"),s("v-form",{on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[s("v-card-text",[s("v-container",[s("v-row",{attrs:{wrap:""}},[s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"6"}},[s("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.users.cols.username.title")+" : "+this.get_username,"prepend-inner-icon":"mdi-account-outline mdi-dark mdi-18px",outlined:"",dense:""},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"6"}},[s("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.users.cols.password.title"),"prepend-inner-icon":"mdi-shield-account-outline mdi-dark mdi-18px","error-messages":t.passwordErrors,type:"password",outlined:"",dense:""},on:{blur:function(e){return t.$v.form.password.$touch()},input:function(e){return t.$v.form.password.$touch()}},scopedSlots:t._u([{key:"label",fn:function(){return[s("span",{staticClass:"red--text"},[s("strong",[t._v("* ")])]),t._v(t._s(t.$vuetify.lang.t("$vuetify.users.cols.password.title"))+" ")]},proxy:!0}],null,!1,2932136091),model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1)],1)],1)],1),s("v-divider",{staticClass:"mx-4",staticStyle:{"margin-top":"-30px"}}),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{disabled:t.loading},on:{click:function(e){t.dialog.show=!1}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.no"))+" ")]),s("v-btn",{attrs:{loading:t.loading,dark:"",color:"#0984e3"},on:{click:function(e){return t.deleteItem()}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.yes"))+" ")])],1)],1):t._e()],1)],1)},c=[],d=s("5ed4"),v=s("b5ae"),f={mixins:[d["a"]],props:{dialog:{type:Object,default:function(){return{show:!1}}},form:{type:Object,default:function(){return{id:null,username:null,password:null}}},messages:{type:Object,default:function(){return{success:""}}}},data:function(){return{loading:!1}},validations:function(){var t={form:{password:{required:v["required"]}}};return t},methods:{getDataForm:function(){var t={username:this.form.username?this.form.username:this.get_username,password:this.form.password};return t},deleteItem:function(){var t=this;this.loading=!0,this.$store.dispatch("request",{url:t.urlItems,method:"DELETE",data:t.getDataForm()}).then((function(){t.$store.dispatch("showNotification",{statut:!0,text:t.$vuetify.lang.t(t.messages.success)}),t.$emit("getItems"),t.dialog.show=!1})).catch((function(e){console.log("erreur delete",e),t.$store.dispatch("showNotification",{statut:!0,text:t.$vuetify.lang.t("$vuetify.deletedErrors")})})).then((function(){t.loading=!1}))}}},m=f,h=s("2877"),p=s("6544"),_=s.n(p),g=s("8336"),y=s("b0af"),b=s("99d9"),$=s("62ad"),w=s("a523"),x=s("169a"),k=s("ce7e"),C=s("4bd4"),I=s("132d"),F=s("0fd9"),D=s("0789"),V=s("2fa4"),A=s("8654"),E=Object(h["a"])(m,u,c,!1,null,null,null),O=E.exports;_()(E,{VBtn:g["a"],VCard:y["a"],VCardActions:b["a"],VCardText:b["b"],VCardTitle:b["c"],VCol:$["a"],VContainer:w["a"],VDialog:x["a"],VDivider:k["a"],VForm:C["a"],VIcon:I["a"],VRow:F["a"],VScaleTransition:D["e"],VSpacer:V["a"],VTextField:A["a"]});var S=s("402c"),q=s("9f8f"),B={mixins:[r["a"]],data:function(){return{urlItemsCash:"cashs/isOpen",urlItems:"bills/current",urlDeleteItems:"",deleteItems:"/bills",sortBy:["createdAt"],dialogForm:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogFormCash:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogFormInv:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogDelete:{show:!1},isActive:!1,isInventory:!1,dialogDetail:{show:!1},dialogEnt:{show:!1},form:{id:null,patient:null,doctor:null,patient_name:null,patient_balance:null,net_payable:null,patient_type:null,pub:null,pun:null,amount_gross:null,quantity_ordered:null,amount_net:null,total_amount:null,quantity_served:null,product:null,delivery:null,bills:null,reference_no:null,additional_info:null,bills_amount:null,code:null,cashier:null,bill_type:null,amount_paid:null,bill_shape:null,storage_depots:null},filter:{name:null,role:null},messages:{title:"",submit:"",success:""},messagesDelete:{success:"$vuetify.bills.delete.success"}}},mounted:function(){this.getOpenCash(),this.getItems()},methods:{deleteItem:function(t){this.urlDeleteItems=this.deleteItems+"/"+t.id,this.dialogDelete.show=!0},getOpenCash:function(){var t=this,e=this;return new Promise((function(s){e.$store.dispatch("request",{url:e.urlItemsCash}).then((function(a){var l=a.data;e.isActive=l.content.is_active,e.isInventory=l.content.is_inventory,!1===e.isActive?!1===e.isInventory?t.createCash():t.currentInventory():(e.isActive=l.content.is_active,!0===e.isInventory&&t.currentInventory()),s(a)}))}))},createCash:function(){this.dialogFormCash.show=!0,this.messages={title:"$vuetify.cash.new.title",submit:"$vuetify.cash.new.submit",success:"$vuetify.cash.new.success"}},currentInventory:function(){this.dialogFormInv.show=!0},getItems:function(){var t=this,e=this,s=this.pagination,a=s.page,l=s.itemsPerPage,i={page:a,size:l};return this._.isEmpty(this._search)||(this._search=this._.merge(i,this._search)),new Promise((function(s,a){t.loading.list=!0,e.$store.dispatch("request",{url:e.urlItems,params:i}).then((function(t){var a=t.data;e.items=a.content,e.meta={totalElements:a.totalElements},s(t)})).catch((function(s){var l=t.$vuetify.lang.t("$vuetify.error_occured");if(s.response)if(400===s.response.status){var i=s.response.data;e.setFormErrors(i);var n=Object.keys(i)[0];n&&Array.isArray(i[n])&&(l=i[n][0])}else 403===s.response.status?l=e.$vuetify.lang.t("$vuetify.error_denied"):500===s.response.status&&(l=e.$vuetify.lang.t("$vuetify.error_server"));e.$store.dispatch("showNotification",{status:!0,text:l}),a(s)})).then((function(){e.loading.list=!1,s()}))}))},setHeaders:function(){this.headers=[{text:"$vuetify.bills.cols.bill_N.title",value:"bill_N",align:"start",sortable:!0,width:"15",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.date_bill.title",value:"date_bill",align:"start",sortable:!0,width:"50",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.bill_type.title",value:"bill_type",align:"start",sortable:!0,width:"30",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.patient_name.title",value:"patient_name",align:"start",sortable:!0,width:"30",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.cashier.title",value:"cashier",align:"start",sortable:!0,width:"6",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.net_payable.title",value:"net_payable",align:"start",sortable:!0,width:"6",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.amount_paid.title",value:"amount_paid",align:"start",sortable:!0,width:"6",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.balance.title",value:"balance",align:"start",sortable:!0,width:"6",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.refund.title",value:"refund",align:"start",sortable:!0,width:"6",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.status.title",value:"deleted",align:"start",sortable:!0,width:"1",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.actions.title",value:null,align:"start",sortable:!0,width:"140"}]},create:function(){this.dialogForm.show=!0,this.messages={title:"$vuetify.bills.new.title",submit:"$vuetify.bills.new.submit",success:"$vuetify.bills.new.success"},this.form={id:null,patient:null,doctor:null,patient_name:null,patient_balance:null,net_payable:null,patient_type:null,pub:null,pun:null,amount_gross:null,quantity_ordered:null,amount_net:null,total_amount:null,quantity_served:null,product:null,delivery:null,bills:null,reference_no:null,additional_info:null,bills_amount:null,code:null,cashier:null,bill_type:null,amount_paid:null,bill_shape:null,storage_depots:null}},editBills:function(t){this.dialogForm.show=!0,this.messages={title:"$vuetify.bills.update.title",submit:"$vuetify.bills.update.submit",success:"$vuetify.bills.update.success"},this.$refs.billsForm.setForm(t)},showFilter:function(){this.dialogForm.shows.showFilter=!0},performFilter:function(){var t=this;t.loading.list=!0;var e={};null!==t.filter.name&&(e["name"]=t.filter.name),null!==t.filter.role&&(e["role"]=t.filter.role),t._search=e,t.getItems().then((function(){t.$refs.filterForm.closeDialog()})).finally((function(){t.$refs.filterForm.stopLoadingBtn()}))}},components:{FormCash:S["a"],FormBills:o["a"],FormInv:q["a"],DeleteItem:O}},N=B,P=s("8fea"),j=s("ce87"),T=s("3a2f"),Y=Object(h["a"])(N,i,n,!1,null,"e1b1d610",null),z=Y.exports;_()(Y,{VBtn:g["a"],VCard:y["a"],VDataTable:P["a"],VHover:j["a"],VIcon:I["a"],VSpacer:V["a"],VTooltip:T["a"]});var H={metaInfo:function(){return{title:this.$vuetify.lang.t("$vuetify.bills.title")}},data:function(){return{}},components:{User:z}},J=H,L=Object(h["a"])(J,a,l,!1,null,null,null);e["default"]=L.exports}}]);
//# sourceMappingURL=chunk-2d0d34b2.b2437b04.js.map