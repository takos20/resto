(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-111dd8c4"],{"0edb":function(t,e,a){},"651c":function(t,e,a){"use strict";var s=a("f4ea"),i=a.n(s);i.a},aa2b:function(t,e,a){},af31:function(t,e,a){"use strict";var s=a("aa2b"),i=a.n(s);i.a},bf18:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t._.includes(t.$auth.user().permissions,"view_dashboard_secretariat")?a("v-app",{style:{background:t.$vuetify.theme.themes.dark.background},attrs:{id:"inspire"}},[a("br"),a("v-card",{attrs:{height:"50px",flat:"",color:"#FAFAFA"}},[a("v-card-text",[a("v-row",{attrs:{wrap:""}},[a("v-col",{staticStyle:{"margin-top":"-10px"},attrs:{cols:"12",sm:"2"}},[a("v-btn",{staticClass:"font-weight-bold white--text",attrs:{depressed:"",color:"btn_logout"},on:{click:function(e){return t.refreshItems()}}},[a("v-icon",{attrs:{left:"",color:"white"}},[t._v("mdi-refresh")]),t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.refresh"))+" ")],1)],1),a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"10"}})],1)],1)],1),a("br"),a("v-row",[a("v-col",{staticClass:"mb-0 py-0 mt-2",attrs:{cols:"12",sm:"3"}},[a("v-card",{attrs:{height:"",flat:"",color:"#FAFAFA"}},[a("h3",{attrs:{align:"center"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.statistics.patient_gender"))+" ")]),a("canvas",{attrs:{height:"1vh",id:"patient_chart"}})])],1),a("v-col",{staticClass:"mb-0 py-0 mt-2",attrs:{cols:"12",sm:"3"}},[a("v-card",{attrs:{height:"",flat:"",color:"#FAFAFA"}},[a("h3",{attrs:{align:"center"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.statistics.doctor_type"))+" ")]),a("canvas",{attrs:{height:"1vh",id:"doctor_chart"}})])],1),a("v-col",{staticClass:"mb-0 py-0 mt-2",attrs:{cols:"12",sm:"3"}},[a("v-card",{attrs:{height:"",flat:"",color:"#FAFAFA"}},[a("h3",{attrs:{align:"center"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.statistics.appointment_state_patient"))+" ")]),a("canvas",{attrs:{height:"1vh",id:"app_shape_chart"}})])],1),a("v-col",{staticClass:"mb-0 py-0 mt-2",attrs:{cols:"12",sm:"3"}},[a("v-card",{attrs:{height:"",flat:"",color:"#FAFAFA"}},[a("h3",{attrs:{align:"center"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.statistics.appointment_status"))+" ")]),a("canvas",{attrs:{height:"1vh",id:"status_chart"}})])],1)],1),a("br"),a("br"),a("v-row",{attrs:{wrap:""}},[a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"4"}},[a("form-rdvw",{attrs:{color:"black"}})],1),a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"8"}},[a("form-rdv",{attrs:{color:"black"}})],1)],1),a("v-card",{attrs:{height:"50px",flat:"",color:"#FAFAFA"}},[a("v-card-text",[a("v-row",{attrs:{wrap:""}},[a("v-col",{attrs:{cols:"12",sm:"2"}},[a("v-menu",{ref:"menu7",staticClass:"white--text",attrs:{"close-on-content-click":!1,"return-value":t.form.date_month,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},on:{"update:returnValue":function(e){return t.$set(t.form,"date_month",e)},"update:return-value":function(e){return t.$set(t.form,"date_month",e)}},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-text-field",t._g(t._b({staticStyle:{"margin-top":"-10px"},attrs:{"prepend-inner-icon":"mdi-calendar",readonly:"",outlined:"",label:t.$vuetify.lang.t("$vuetify.statistics.cols.month.title"),dense:"","background-color":"white"},model:{value:t.form.date_month,callback:function(e){t.$set(t.form,"date_month",e)},expression:"form.date_month"}},"v-text-field",i,!1),s))]}}],null,!1,3276229806),model:{value:t.menu7,callback:function(e){t.menu7=e},expression:"menu7"}},[a("v-date-picker",{staticClass:"white--text",attrs:{type:"month","no-title":"",max:t.maxDate,scrollable:""},model:{value:t.form.date_month,callback:function(e){t.$set(t.form,"date_month",e)},expression:"form.date_month"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu7=!1}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.cancel"))+" ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.sell_month_day(),t.appointment_month_day()}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.ok"))+" ")])],1)],1)],1),a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"10"}})],1)],1)],1),a("br"),a("v-row",[a("v-col",{staticClass:"mb-0 py-0 mt-2",attrs:{cols:"12",sm:"12"}},[a("v-card",{attrs:{height:"",flat:"",color:"#FAFAFA"}},[a("v-card-text",[a("v-row",{attrs:{wrap:""}},[a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"11"}},[a("h3",{staticClass:"my-4",staticStyle:{"padding-left":"15px"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.statistics.patient_days"))+" ")])]),a("v-menu",{attrs:{right:"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-icon",t._g({staticClass:"ml-3",staticStyle:{"margin-top":"-30px"},attrs:{dark:"",fab:"",large:"",color:"primary"}},s),[t._v(" mdi-format-list-bulleted ")])]}}],null,!1,1410145220)},[a("v-list",{staticClass:"menu-app-bar"},[a("v-list-item",[a("v-list-item-title",[a("download-excel",{staticClass:"btn btn-default",attrs:{data:t.itemsDays.content,fields:t.json_fields,worksheet:"My Worksheet",name:"Statistiques du mois.xls"}},[a("v-btn",{staticClass:"white--text",attrs:{color:"primary"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.product.cols.export.titleXLS"))+" ")])],1)],1)],1),a("v-list-item",[a("v-list-item-title",[a("v-btn",{attrs:{dark:"",color:"primary"},on:{click:function(e){return t.export_month_day()}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.product.cols.export.titlePDF"))+" ")])],1)],1),a("v-list-item",[a("v-list-item-title",[a("v-btn",{attrs:{dark:"",color:"primary"},on:{click:function(e){return t.export_image_month_day()}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.product.cols.export.titlePNG"))+" ")])],1)],1)],1)],1)],1)],1),a("br"),a("v-card-text",[a("v-card-text",[a("canvas",{staticStyle:{"margin-top":"-70px"},attrs:{height:"90vh",id:"day_chart"}})])],1)],1)],1),a("v-col",{staticClass:"mb-0 py-0 mt-2",attrs:{cols:"12",sm:"12"}},[a("v-card",{attrs:{height:"",flat:"",color:"#FAFAFA"}},[a("v-card-text",[a("v-row",{attrs:{wrap:""}},[a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"11"}},[a("h3",{staticClass:"my-4",staticStyle:{"padding-left":"15px"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.statistics.appointment_days"))+" ")])]),a("v-menu",{attrs:{right:"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-icon",t._g({staticClass:"ml-3",staticStyle:{"margin-top":"-30px"},attrs:{dark:"",fab:"",large:"",color:"primary"}},s),[t._v(" mdi-format-list-bulleted ")])]}}],null,!1,1410145220)},[a("v-list",{staticClass:"menu-app-bar"},[a("v-list-item",[a("v-list-item-title",[a("download-excel",{staticClass:"btn btn-default",attrs:{data:t.itemsDays.content,fields:t.json_fields,worksheet:"My Worksheet",name:"Statistiques du mois.xls"}},[a("v-btn",{staticClass:"white--text",attrs:{color:"primary"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.product.cols.export.titleXLS"))+" ")])],1)],1)],1),a("v-list-item",[a("v-list-item-title",[a("v-btn",{attrs:{dark:"",color:"primary"},on:{click:function(e){return t.export_appointment_month_day()}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.product.cols.export.titlePDF"))+" ")])],1)],1),a("v-list-item",[a("v-list-item-title",[a("v-btn",{attrs:{dark:"",color:"primary"},on:{click:function(e){return t.export_image_appointment_month_day()}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.product.cols.export.titlePNG"))+" ")])],1)],1)],1)],1)],1)],1),a("br"),a("v-card-text",[a("v-card-text",[a("canvas",{staticStyle:{"margin-top":"-70px"},attrs:{height:"90vh",id:"appointment_chart"}})])],1)],1)],1)],1)],1):t._e()},i=[],n=(a("b64b"),a("d3b7"),a("ddb0"),a("b85c")),r=a("24a2"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-text",[a("v-row",{attrs:{wrap:""}},[a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"11"}},[a("h3",{staticClass:"my-4",staticStyle:{"padding-left":"15px"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.appointment.list.titleDays"))+" ")])]),a("v-menu",{attrs:{right:"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-icon",t._g({staticClass:"ml-3",staticStyle:{"margin-top":"-30px"},attrs:{dark:"",fab:"",large:"",color:"primary"}},s),[t._v(" mdi-format-list-bulleted ")])]}}])},[a("v-list",{staticClass:"menu-app-bar"},[a("v-list-item",[a("v-list-item-title",[a("download-excel",{staticClass:"btn btn-default",attrs:{data:t.itemsDays.content,fields:t.json_fields,worksheet:"My Worksheet",name:"Statistiques du mois.xls"}},[a("v-btn",{staticClass:"white--text",attrs:{color:"primary"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.product.cols.export.titleXLS"))+" ")])],1)],1)],1),a("v-list-item",[a("v-list-item-title",[a("v-btn",{attrs:{dark:"",color:"primary"},on:{click:function(e){return t.export_month_day()}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.product.cols.export.titlePDF"))+" ")])],1)],1),a("v-list-item",[a("v-list-item-title",[a("v-btn",{attrs:{dark:"",color:"primary"},on:{click:function(e){return t.export_image_month_day()}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.product.cols.export.titlePNG"))+" ")])],1)],1)],1)],1)],1)],1),a("v-card-text",[a("v-data-table",{staticClass:"mt-5",attrs:{"footer-props":{"items-per-page-options":t.itemPerPageOptions},headers:t.headers,items:t.items,"items-per-page":t.itemPerPage,loading:t.loading.list,options:t.pagination,"server-items-length":t.meta.totalElements,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"item-key":"patient"},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"header.name_patient",fn:function(e){var s=e.header;return[a("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.patient_shape",fn:function(e){var s=e.header;return[a("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.type_patient",fn:function(e){var s=e.header;return[a("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.name_doctor",fn:function(e){var s=e.header;return[a("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.appointment_status",fn:function(e){var s=e.header;return[a("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.appointment_hour",fn:function(e){var s=e.header;return[a("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"body",fn:function(e){var s=e.items;return[a("v-hover",[a("tbody",t._l(s,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.patient.name)+" ")]),"NORMAL"==e.patient_shape?a("td",{staticClass:"subtitle-2"},[a("v-btn",{staticClass:"mr-2 my-2 white--text",attrs:{color:"primary",small:""}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.patient.cols.patient_shape."+e.patient_shape))+" ")])],1):"PREGNANT"==e.patient_shape?a("td",{staticClass:"subtitle-2"},[a("v-btn",{staticClass:"mr-2 my-2 white--text",attrs:{color:"#FF2A04",small:""}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.patient.cols.patient_shape."+e.patient_shape))+" ")])],1):"CHILD"==e.patient_shape?a("td",{staticClass:"subtitle-2"},[a("v-btn",{staticClass:"mr-2 my-2 white--text",attrs:{color:"#645600",small:""}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.patient.cols.patient_shape."+e.patient_shape))+" ")])],1):"OLD"==e.patient_shape?a("td",{staticClass:"subtitle-2"},[a("v-btn",{staticClass:"mr-2 my-2 white--text",attrs:{color:"#3C3E42",small:""}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.patient.cols.patient_shape."+e.patient_shape))+" ")])],1):"DISABILITY"==e.patient_shape?a("td",{staticClass:"subtitle-2"},[a("v-btn",{staticClass:"mr-2 my-2 black--text",attrs:{color:"orange2",small:""}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.patient.cols.patient_shape."+e.patient_shape))+" ")])],1):t._e(),a("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.patient.type_patient?e.patient.type_patient.title:"")+" ")]),a("td",{staticClass:"subtitle-2"},[t._v("DR. "+t._s(e.doctor.name))]),"NOT_STARTED"==e.appointment_status?a("td",{staticClass:"subtitle-2"},[a("v-btn",{staticClass:"mr-2 my-2 white--text",attrs:{color:"#3C3E42",small:""}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.appointment.cols.appointment_status."+e.appointment_status))+" ")])],1):"PENDING"==e.appointment_status?a("td",{staticClass:"subtitle-2"},[a("v-btn",{staticClass:"mr-2 my-2 white--text",attrs:{color:"#006400",small:""}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.appointment.cols.appointment_status."+e.appointment_status))+" ")])],1):"CANCELED"==e.appointment_status?a("td",{staticClass:"subtitle-2"},[a("v-btn",{staticClass:"mr-2 my-2 white--text",attrs:{color:"#FF2A04",small:""}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.appointment.cols.appointment_status."+e.appointment_status))+" ")])],1):"PARAMETER_TAKING"==e.appointment_status?a("td",{staticClass:"subtitle-2"},[a("v-btn",{staticClass:"mr-2 my-2 white--text",attrs:{color:"#1E90FF",small:""}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.appointment.cols.appointment_status."+e.appointment_status))+" ")])],1):"WAITING"==e.appointment_status?a("td",{staticClass:"subtitle-2"},[a("v-btn",{staticClass:"mr-2 my-2 white--text",attrs:{color:"#FFD700",small:""}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.appointment.cols.appointment_status."+e.appointment_status))+" ")])],1):"FINISHED"==e.appointment_status?a("td",{staticClass:"subtitle-2"},[a("v-btn",{staticClass:"mr-2 my-2 white--text",attrs:{color:"#FF8C00",small:""}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.appointment.cols.appointment_status."+e.appointment_status))+" ")])],1):t._e(),a("td",{staticClass:"subtitle-2"},[a("v-sheet",{staticClass:"mr-1 my-1 pr-4 pl-4 white--text text-center d-inline-block",attrs:{color:"primary",dark:"",border:"",rounded:"",elevation:3}},[t._v(" "+t._s(e.start_appointment_hour)+" - "+t._s(e.end_appointment_hour)+" ")])],1)])})),0)])]}}])})],1)],1)},l=[],c=(a("99af"),a("4de4"),a("f2d9")),p=a("2b0e");p["a"].component("downloadExcel",c["a"]);var u=a("21a6"),d={mixins:[r["a"]],name:"Home",props:{form:{type:Object,default:function(){return{id:null,date_month:null}}}},data:function(){return{urlItems:null,urlItemsDaysAppointment:"/appointments/days_appointment",items:[],itemsDays:[],itemsDaysAppointment:[],json_fields:{Date:"days",CA:"turnover"},labels:[],values:[],urlItemsAppointments:"/appointments",sortBy:["id"],maxDate:(new Date).toISOString().substr(0,10),loading:{list:!1,refresh:!1,filter:!1},loadingAppointment:{list:!1,refresh:!1,filter:!1},menu7:!1,menu6:!1}},mounted:function(){this.timer=setInterval(this.getItemsRDV(),2e4)},methods:{setHeadersWaiting:function(){this.headersWaiting=[{text:"$vuetify.prescription.cols.patient.title",value:"name_patient",align:"start",sortable:!0,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.patient.cols.age.title",value:"age",align:"start",sortable:!0,width:"20",class:"grey--text text--darken-3"}]},setHeaders:function(){this.headers=[{text:"$vuetify.prescription.cols.patient.title",value:"name_patient",align:"start",sortable:!0,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.patient.cols.patient_shape.title",value:"patient_shape",align:"start",sortable:!0,width:"50",class:"grey--text text--darken-3"},{text:"$vuetify.type_patient.title",value:"type_patient",align:"start",sortable:!0,width:"50",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.dealing_with.title",value:"name_doctor",align:"start",sortable:!0,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.appointment.cols.appointment_status.title",value:"appointment_status",align:"start",sortable:!0,width:"30",class:"grey--text text--darken-3"},{text:"$vuetify.appointment.cols.appointment_hour.title",value:"appointment_hour",align:"start",sortable:!0,width:"130",class:"grey--text text--darken-3"}]},refreshItems:function(){this.getItemsRDV()},getMethod:function(){return this.form.id?"PUT":"POST"},getDataForm:function(){var t={date_month:this.form.date_month};return t},export_month_day:function(){var t=this,e={};null!==t.filter.patient&&(e["patient"]=t.filter.patient),null!==t.filter.patient_shape&&(e["patient_shape"]=t.filter.patient_shape),null!==t.filter.appointment_status&&(e["appointment_status"]=t.filter.appointment_status),null!==t.filter.doctor&&(e["doctor"]=t.filter.doctor),null!==t.filter.start_appointment_date&&(e["start_appointment_date"]=t.filter.start_appointment_date),this._.isEmpty(this._search)||(this._search=this._.merge(e,this._search)),t.$store.dispatch("request",{url:t.urlItems+"/print",params:e,responseType:"blob"}).then((function(t){var e="Listes des rendez-vous",a=new Blob([t.data],{type:t.data.type});u.saveAs(a,e)})),this.$store.dispatch("showNotification",{statut:!1})},getItemsRDV:function(){var t=this,e=new Date,a=e.getDate(),s=e.getMonth()+1,i=e.getFullYear(),n="".concat(i,"-").concat(s,"-").concat(a),r=this;r.urlItems="DOCTOR"==this.$auth.user().type?r.urlItemsAppointments+"?doctor="+this.$auth.user().doctor.id:"PATIENT"==this.$auth.user().type?r.urlItemsAppointments+"?patient="+this.$auth.user().patient.id:r.urlItemsAppointments+"?start_appointment_date="+n;var o=this.pagination,l=o.page,c=o.itemsPerPage,p={page:l,size:c};return this._.isEmpty(this._search)||(this._search=this._.merge(p,this._search)),new Promise((function(e,a){t.loading.list=!0,r.$store.dispatch("request",{url:r.urlItems,params:p}).then((function(t){var a=t.data;r.items=a.content.filter((function(t){return"WAITING"==t.appointment_status&&t.start_appointment_date==(new Date).toISOString().substr(0,10)})),r.meta={totalElements:a.totalElements},e(t)})).catch((function(e){var s=t.$vuetify.lang.t("$vuetify.error_occured");if(e.response)if(400===e.response.status){var i=e.response.data;r.setFormErrors(i);var n=Object.keys(i)[0];n&&Array.isArray(i[n])&&(s=i[n][0])}else 403===e.response.status?s=r.$vuetify.lang.t("$vuetify.error_denied"):500===e.response.status&&(s=r.$vuetify.lang.t("$vuetify.error_server"));r.$store.dispatch("showNotification",{status:!0,text:s}),a(e)})).then((function(){r.loading.list=!1,e()}))}))}},components:{}},m=d,v=(a("af31"),a("2877")),h=a("6544"),f=a.n(h),y=a("8336"),_=a("b0af"),g=a("99d9"),b=a("62ad"),x=a("8fea"),$=a("ce87"),w=a("132d"),C=a("8860"),k=a("da13"),D=a("5d23"),A=a("e449"),I=a("0fd9"),F=a("8dd9"),E=Object(v["a"])(m,o,l,!1,null,"ffdc6a74",null),S=E.exports;f()(E,{VBtn:y["a"],VCard:_["a"],VCardText:g["b"],VCol:b["a"],VDataTable:x["a"],VHover:$["a"],VIcon:w["a"],VList:C["a"],VListItem:k["a"],VListItemTitle:D["d"],VMenu:A["a"],VRow:I["a"],VSheet:F["a"]});var P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{height:"",flat:"",color:"#FAFAFA"}},[a("v-card-text",[a("v-row",{attrs:{wrap:""}},[a("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"11"}},[a("h3",{staticClass:"my-4",staticStyle:{"padding-left":"15px"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.statistics.patient_waiting_room"))+" ")])])],1)],1),a("v-card-text",[a("v-data-table",{staticClass:"mt-5",attrs:{"footer-props":{"items-per-page-options":t.itemPerPageOptions},headers:t.headersWaiting,items:t.items,"items-per-page":t.itemPerPage,loading:t.loading.list,options:t.pagination,"server-items-length":t.meta.totalElements,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"item-key":"patient"},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"header.name_patient",fn:function(e){var s=e.header;return[a("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.age",fn:function(e){var s=e.header;return[a("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"body",fn:function(e){var s=e.items;return[a("v-hover",[a("tbody",t._l(s,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.patient.name)+" ")]),a("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.patient.age)+" ")])])})),0)])]}}])})],1)],1)},V=[];p["a"].component("downloadExcel",c["a"]);var T={mixins:[r["a"]],name:"Home",props:{form:{type:Object,default:function(){return{id:null,date_month:null}}}},data:function(){return{urlItems:null,urlItemsDaysAppointment:"/appointments/days_appointment",items:[],itemsDays:[],itemsDaysAppointment:[],json_fields:{Date:"days",CA:"turnover"},labels:[],values:[],urlItemsAppointments:"/appointments",sortBy:["id"],maxDate:(new Date).toISOString().substr(0,10),loading:{list:!1,refresh:!1,filter:!1},loadingAppointment:{list:!1,refresh:!1,filter:!1},menu7:!1,menu6:!1}},mounted:function(){this.timer=setInterval(this.getItemsRDV(),2e4)},methods:{setHeadersWaiting:function(){this.headersWaiting=[{text:"$vuetify.prescription.cols.patient.title",value:"name_patient",align:"start",sortable:!0,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.patient.cols.age.title",value:"age",align:"start",sortable:!0,width:"20",class:"grey--text text--darken-3"}]},setHeaders:function(){this.headers=[{text:"$vuetify.prescription.cols.patient.title",value:"name_patient",align:"start",sortable:!0,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.patient.cols.patient_shape.title",value:"patient_shape",align:"start",sortable:!0,width:"50",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.dealing_with.title",value:"name_doctor",align:"start",sortable:!0,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.appointment.cols.appointment_status.title",value:"appointment_status",align:"start",sortable:!0,width:"30",class:"grey--text text--darken-3"},{text:"$vuetify.appointment.cols.appointment_hour.title",value:"appointment_hour",align:"start",sortable:!0,width:"130",class:"grey--text text--darken-3"}]},refreshItems:function(){this.getItemsRDV()},getMethod:function(){return this.form.id?"PUT":"POST"},getDataForm:function(){var t={date_month:this.form.date_month};return t},getItemsRDV:function(){var t=this,e=this,a=new Date,s=a.getDate(),i=a.getMonth()+1,n=a.getFullYear(),r="".concat(n,"-").concat(i,"-").concat(s);e.urlItems="DOCTOR"==this.$auth.user().type?e.urlItemsAppointments+"?doctor="+this.$auth.user().doctor.id:"PATIENT"==this.$auth.user().type?e.urlItemsAppointments+"?patient="+this.$auth.user().patient.id:e.urlItemsAppointments+"?start_appointment_date="+r+"&&appointment_status=PENDING";var o=this.pagination,l=o.page,c=o.itemsPerPage,p={page:l,size:c};return this._.isEmpty(this._search)||(this._search=this._.merge(p,this._search)),new Promise((function(a,s){t.loading.list=!0,e.$store.dispatch("request",{url:e.urlItems,params:p}).then((function(t){var s=t.data;e.items=s.content.filter((function(t){return"WAITING"==t.appointment_status&&t.start_appointment_date==(new Date).toISOString().substr(0,10)})),e.meta={totalElements:s.totalElements},a(t)})).catch((function(a){var i=t.$vuetify.lang.t("$vuetify.error_occured");if(a.response)if(400===a.response.status){var n=a.response.data;e.setFormErrors(n);var r=Object.keys(n)[0];r&&Array.isArray(n[r])&&(i=n[r][0])}else 403===a.response.status?i=e.$vuetify.lang.t("$vuetify.error_denied"):500===a.response.status&&(i=e.$vuetify.lang.t("$vuetify.error_server"));e.$store.dispatch("showNotification",{status:!0,text:i}),s(a)})).then((function(){e.loading.list=!1,a()}))}))}},components:{}},O=T,N=(a("651c"),Object(v["a"])(O,P,V,!1,null,"ffdaa3ca",null)),j=N.exports;f()(N,{VCard:_["a"],VCardText:g["b"],VCol:b["a"],VDataTable:x["a"],VHover:$["a"],VRow:I["a"]});var R=a("796e"),B=a("d9fa");p["a"].component("downloadExcel",c["a"]);var W=a("21a6"),L={mixins:[r["a"]],name:"Home",props:{form:{type:Object,default:function(){return{id:null,date_month:null}}}},data:function(){return{urlItemsStatSecretariat:"/bills/stat_secretariat",urlItemsDays:"/patients/days_patients",urlItemsDaysAppointment:"/appointments/days_appointment",items:[],itemsDays:[],itemsDaysAppointment:[],json_fields:{Date:"days",CA:"turnover"},labels:[],values:[],urlItemsAppointments:"/appointments",sortBy:["id"],maxDate:(new Date).toISOString().substr(0,10),loading:{list:!1,refresh:!1,filter:!1},loadingAppointment:{list:!1,refresh:!1,filter:!1},menu7:!1,menu6:!1,labelsPatient:[],valuesPatient:[],labelsShape:[],valuesShape:[],labelsDoctor:[],valuesDoctor:[],labelsDays:[],valuesDays:[]}},mounted:function(){this.getItems(),this.sell_month_day(),this.appointment_month_day()},methods:{setHeadersWaiting:function(){this.headersWaiting=[{text:"$vuetify.prescription.cols.patient.title",value:"name_patient",align:"start",sortable:!0,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.patient.cols.age.title",value:"age",align:"start",sortable:!0,width:"20",class:"grey--text text--darken-3"}]},setHeaders:function(){this.headers=[{text:"$vuetify.prescription.cols.patient.title",value:"name_patient",align:"start",sortable:!0,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.patient.cols.patient_shape.title",value:"patient_shape",align:"start",sortable:!0,width:"50",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.dealing_with.title",value:"name_doctor",align:"start",sortable:!0,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.appointment.cols.appointment_status.title",value:"appointment_status",align:"start",sortable:!0,width:"30",class:"grey--text text--darken-3"},{text:"$vuetify.appointment.cols.appointment_hour.title",value:"appointment_hour",align:"start",sortable:!0,width:"130",class:"grey--text text--darken-3"}]},refreshItems:function(){this.getItems(),this.sell_month_day(),this.appointment_month_day()},export_image_month_day:function(){var t=document.getElementById("day_chart").toDataURL("image/png"),e=document.createElement("a");e.download="image",e.href=t,e.click()},export_image_appointment_month_day:function(){var t=document.getElementById("appointment_chart").toDataURL("image/png"),e=document.createElement("a");e.download="image",e.href=t,e.click()},getMethod:function(){return this.form.id?"PUT":"POST"},export_month_day:function(){var t=this,e={type:"pdf"};this._.isEmpty(this._search)||(this._search=this._.merge(e,this._search)),t.$store.dispatch("request",{url:t.urlItemsDays,params:e,data:t.getDataForm(),method:t.getMethod(),responseType:"blob"}).then((function(t){var e="Statistiques mensuel",a=new Blob([t.data],{type:t.data.type});W.saveAs(a,e)})),this.$store.dispatch("showNotification",{statut:!1})},export_appointment_month_day:function(){var t=this,e={type:"pdf"};this._.isEmpty(this._search)||(this._search=this._.merge(e,this._search)),t.$store.dispatch("request",{url:t.urlItemsDays,params:e,data:t.getDataForm(),method:t.getMethod(),responseType:"blob"}).then((function(t){var e="Statistiques mensuel",a=new Blob([t.data],{type:t.data.type});W.saveAs(a,e)})),this.$store.dispatch("showNotification",{statut:!1})},getDataForm:function(){var t={date_month:this.form.date_month};return t},appointment_month_day:function(){var t=this;this.$refs.menu7.save(this.form.date_month);var e=this;return new Promise((function(a,s){t.loadingAppointment.list=!0,e.$store.dispatch("request",{url:e.urlItemsDaysAppointment,method:e.getMethod(),data:e.getDataForm()}).then((function(e){var s=e.data;t.itemsDaysAppointment=e.data;var i=R["a"].getChart("appointment_chart");void 0!==i&&i.destroy(),t.labelsDaysAppointment=[],t.valuesDaysAppointment=[];var r,o=Object(n["a"])(s.content);try{for(o.s();!(r=o.n()).done;){var l=r.value;t.labelsDaysAppointment.push(l.days),t.valuesDaysAppointment.push(l.turnover)}}catch(c){o.e(c)}finally{o.f()}new R["a"](document.getElementById("appointment_chart"),{type:"bar",plugins:[B["a"]],options:{plugins:{datalabels:{display:!0,align:"middle",color:"white",font:{size:15}}}},data:{labels:t.labelsDaysAppointment,datasets:[{label:"Total",backgroundColor:["#006B98"],borderColor:["#E9EEF4"],data:t.valuesDaysAppointment,borderWidth:3}]}}),a(e)})).catch((function(a){var i=t.$vuetify.lang.t("$vuetify.error_occured");if(a.response)if(400===a.response.status){var n=a.response.data;e.setFormErrors(n);var r=Object.keys(n)[0];r&&Array.isArray(n[r])&&(i=n[r][0])}else 403===a.response.status?i=e.$vuetify.lang.t("$vuetify.error_denied"):500===a.response.status&&(i=e.$vuetify.lang.t("$vuetify.error_server"));e.$store.dispatch("showNotification",{status:!0,text:i}),s(a)})).then((function(){e.loadingAppointment.list=!1,a()}))}))},sell_month_day:function(){var t=this;this.$refs.menu7.save(this.form.date_month);var e=this;return new Promise((function(a,s){t.loading.list=!0,e.$store.dispatch("request",{url:e.urlItemsDays,method:e.getMethod(),data:e.getDataForm()}).then((function(e){var s=e.data;t.itemsDays=e.data;var i=R["a"].getChart("day_chart");void 0!==i&&i.destroy(),t.labelsDays=[],t.valuesDays=[];var r,o=Object(n["a"])(s.content);try{for(o.s();!(r=o.n()).done;){var l=r.value;t.labelsDays.push(l.days),t.valuesDays.push(l.turnover)}}catch(c){o.e(c)}finally{o.f()}new R["a"](document.getElementById("day_chart"),{type:"bar",plugins:[B["a"]],options:{plugins:{datalabels:{display:!0,align:"middle",color:"white",font:{size:15}}}},data:{labels:t.labelsDays,datasets:[{label:"Total",backgroundColor:["#3a90cd"],borderColor:["#E9EEF4"],data:t.valuesDays,borderWidth:3}]}}),a(e)})).catch((function(a){var i=t.$vuetify.lang.t("$vuetify.error_occured");if(a.response)if(400===a.response.status){var n=a.response.data;e.setFormErrors(n);var r=Object.keys(n)[0];r&&Array.isArray(n[r])&&(i=n[r][0])}else 403===a.response.status?i=e.$vuetify.lang.t("$vuetify.error_denied"):500===a.response.status&&(i=e.$vuetify.lang.t("$vuetify.error_server"));e.$store.dispatch("showNotification",{status:!0,text:i}),s(a)})).then((function(){e.loading.list=!1,a()}))}))},getItems:function(){var t=this,e=this;return this.$refs.menu7.save(this.form.date_month),new Promise((function(a){e.$store.dispatch("request",{url:e.urlItemsStatSecretariat,method:e.getMethod(),data:e.getDataForm()}).then((function(s){var i=s.data;e.items=i.content;var r=R["a"].getChart("status_chart");void 0!==r&&r.destroy(),t.labels=[],t.values=[];var o=R["a"].getChart("patient_chart");void 0!==o&&o.destroy(),t.labelsPatient=[],t.valuesPatient=[];var l=R["a"].getChart("app_shape_chart");void 0!==l&&l.destroy(),t.labelsShape=[],t.valuesShape=[];var c=R["a"].getChart("doctor_chart");void 0!==c&&c.destroy(),t.labelsDoctor=[],t.valuesDoctor=[];var p,u=Object(n["a"])(i.content.appointments_status);try{for(u.s();!(p=u.n()).done;){var d=p.value;t.labels.push(t.$vuetify.lang.t("$vuetify.appointment.cols.appointment_status."+d.status)),t.values.push(d.total)}}catch($){u.e($)}finally{u.f()}new R["a"](document.getElementById("status_chart"),{type:"doughnut",data:{labels:t.labels,datasets:[{label:"Total",backgroundColor:["#3a90cd","#add8e6","#848482","#b38b6d","#ffd1dc","#fc8eac","#fffe7a"],borderColor:["#E9EEF4"],data:t.values,borderWidth:3}]},options:{plugins:{datalabels:{display:!0,align:"middle",color:"white",font:{size:15}}}}});var m,v=Object(n["a"])(i.content.patients);try{for(v.s();!(m=v.n()).done;){var h=m.value;t.labelsPatient.push(t.$vuetify.lang.t("$vuetify.users.cols.gender."+h.type)),t.valuesPatient.push(h.total)}}catch($){v.e($)}finally{v.f()}new R["a"](document.getElementById("patient_chart"),{type:"doughnut",data:{labels:t.labelsPatient,datasets:[{label:"Total",backgroundColor:["#3a90cd","#add8e6","#848482","#b38b6d","#ffd1dc","#fc8eac","#fffe7a"],borderColor:["#E9EEF4"],data:t.valuesPatient,borderWidth:3}]},options:{plugins:{datalabels:{display:!0,align:"middle",color:"white",font:{size:15}}}}});var f,y=Object(n["a"])(i.content.appointments_shape);try{for(y.s();!(f=y.n()).done;){var _=f.value;t.labelsShape.push(t.$vuetify.lang.t("$vuetify.patient.cols.patient_shape."+_.shape)),t.valuesShape.push(_.total)}}catch($){y.e($)}finally{y.f()}new R["a"](document.getElementById("app_shape_chart"),{type:"doughnut",data:{labels:t.labelsShape,datasets:[{label:"Total",backgroundColor:["#3a90cd","#add8e6","#848482","#b38b6d","#ffd1dc","#fc8eac","#fffe7a"],borderColor:["#E9EEF4"],data:t.valuesShape,borderWidth:3}]},options:{plugins:{datalabels:{display:!0,align:"middle",color:"white",font:{size:15}}}}});var g,b=Object(n["a"])(i.content.doctors);try{for(b.s();!(g=b.n()).done;){var x=g.value;t.labelsDoctor.push(t.$vuetify.lang.t("$vuetify.patient.cols.appointment_type."+x.types)),t.valuesDoctor.push(x.total)}}catch($){b.e($)}finally{b.f()}new R["a"](document.getElementById("doctor_chart"),{type:"doughnut",data:{labels:t.labelsDoctor,datasets:[{label:"Total",backgroundColor:["#3a90cd","#add8e6","#848482","#b38b6d","#ffd1dc","#fc8eac","#fffe7a"],borderColor:["#E9EEF4"],data:t.valuesDoctor,borderWidth:3}]},options:{plugins:{datalabels:{display:!0,align:"middle",color:"white",font:{size:15}}}}}),a(s)}))}))}},components:{FormRdv:S,FormRdvw:j}},M=L,q=(a("f10d"),a("7496")),H=a("2e4b"),G=a("2fa4"),z=a("8654"),U=Object(v["a"])(M,s,i,!1,null,"27f50847",null);e["default"]=U.exports;f()(U,{VApp:q["a"],VBtn:y["a"],VCard:_["a"],VCardText:g["b"],VCol:b["a"],VDatePicker:H["a"],VIcon:w["a"],VList:C["a"],VListItem:k["a"],VListItemTitle:D["d"],VMenu:A["a"],VRow:I["a"],VSpacer:G["a"],VTextField:z["a"]})},f10d:function(t,e,a){"use strict";var s=a("0edb"),i=a.n(s);i.a},f4ea:function(t,e,a){}}]);
//# sourceMappingURL=chunk-111dd8c4.5047cedf.js.map