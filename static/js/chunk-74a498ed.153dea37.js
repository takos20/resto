(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74a498ed"],{"68e7":function(t,e,i){},ca3a:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"title mb-5 black--text lighten-5 text-center",staticStyle:{height:"30px","margin-top":"30px","background-color":"#e9eef4"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.patient.title"))+" : "+t._s(this.$route.params.name)+" ")]),i("br"),i("v-row",{attrs:{wrap:""}},[i("v-col",{staticClass:"mt-5",attrs:{cols:"12",sm:"12"}},[i("bills",{attrs:{color:"black",id:this.$route.params.id}})],1)],1)],1)},a=[],n=(i("b64b"),i("d3b7"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-card",[i("v-row",{staticClass:"px-5 my-4"},[i("v-col",{attrs:{cols:"12",sm:"3"}},[i("h3",{staticClass:"my-4"},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.dish.list.title"))+" ")])]),i("v-col",{attrs:{cols:"12",sm:"2"}},[i("v-btn",{attrs:{loading:t.loading.refresh,depressed:"",color:"#f1f5fc"},on:{click:function(e){return t.refreshItems()}}},[i("v-icon",{attrs:{left:"",color:"primary"}},[t._v("mdi-refresh")]),t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.refresh"))+" ")],1)],1),i("v-col",{attrs:{cols:"12",sm:"2"}},[i("v-menu",{attrs:{color:"primary","close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,a=e.attrs;return[i("v-text-field",t._g(t._b({staticClass:"font-weight-bold",attrs:{color:"primary",clearable:"","prepend-inner-icon":"mdi-clock-start mdi-dark mdi-18px",outlined:"",label:t.$vuetify.lang.t("$vuetify.meeting.cols.startDate.title"),dense:"",readonly:""},model:{value:t.form.start_date,callback:function(e){t.$set(t.form,"start_date",e)},expression:"form.start_date"}},"v-text-field",a,!1),s))]}}]),model:{value:t.menu4,callback:function(e){t.menu4=e},expression:"menu4"}},[i("v-date-picker",{attrs:{max:t.maxDate,color:"primary"},on:{change:t.getItems,input:function(e){t.menu4=!1}},model:{value:t.form.start_date,callback:function(e){t.$set(t.form,"start_date",e)},expression:"form.start_date"}})],1)],1),i("v-col",{attrs:{cols:"12",sm:"2"}},[i("v-menu",{attrs:{color:"primary","close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,a=e.attrs;return[i("v-text-field",t._g(t._b({staticClass:"font-weight-bold",attrs:{color:"primary",clearable:"","prepend-inner-icon":"mdi-clock-end mdi-dark mdi-18px",outlined:"",label:t.$vuetify.lang.t("$vuetify.appointment.cols.end_appointment_date.title"),dense:"",readonly:""},model:{value:t.form.end_date,callback:function(e){t.$set(t.form,"end_date",e)},expression:"form.end_date"}},"v-text-field",a,!1),s))]}}]),model:{value:t.menu5,callback:function(e){t.menu5=e},expression:"menu5"}},[i("v-date-picker",{attrs:{max:t.maxDate,min:t.getminDateBestSell,color:"primary"},on:{change:t.getItems,input:function(e){t.menu5=!1}},model:{value:t.form.end_date,callback:function(e){t.$set(t.form,"end_date",e)},expression:"form.end_date"}})],1)],1),i("v-col",{attrs:{cols:"12",sm:"2"}},[i("v-btn",{attrs:{dark:"",color:"primary"},on:{click:function(e){return t.exportPDF()}}},[i("v-icon",{attrs:{color:"white",left:""}},[t._v("mdi-file")]),t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.product.cols.export.titlePDF"))+" ")],1)],1)],1),i("v-row",{staticClass:"px-5",attrs:{dense:""}},[i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-chip",{staticClass:"subtitle-1 font-weight-bold d-flex justify-space-between",attrs:{block:"",label:"",color:"#f1f5fc"}},[i("span",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.patientaccount.cols.type_account.PRIVATE"))+" : ")]),i("span",[t._v(t._s(t.formatMoney(t.itemsSup.balance_private))+" FCFA")])])],1),i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-chip",{staticClass:"subtitle-1 font-weight-bold d-flex justify-space-between",attrs:{block:"",label:"",color:"#f1f5fc","text-color":"teal darken-1"}},[i("span",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.bills.cols.amount_payment.titleBalance"))+" "+t._s(t.$vuetify.lang.t("$vuetify.patientaccount.cols.type_account.PREPAID"))+" : ")]),i("span",[t._v(t._s(t.formatMoney(t.itemsSup.balance_prepaid))+" FCFA")])])],1)],1),i("v-row",{staticClass:"px-5 mt-3",attrs:{dense:""}},t._l(t.paymentSummary,(function(e){return i("v-col",{key:e.key,attrs:{cols:"12",sm:"6",md:"3"}},[i("v-chip",{staticClass:"subtitle-1 font-weight-bold text-center",attrs:{block:"",label:"",color:"#f1f5fc","text-color":e.color}},[t._v(" "+t._s(e.label)+" : "+t._s(t.formatMoney(e.amount))+" FCFA ")])],1)})),1),i("v-data-table",{staticClass:"mt-5",attrs:{"footer-props":{"items-per-page-options":t.itemPerPageOptions},headers:t.headers,items:t.items,"items-per-page":t.itemPerPage,loading:t.loadingDetails.list,options:t.pagination,"server-items-length":t.meta.totalElements,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"item-key":"name"},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"header.product_name",fn:function(e){var s=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.quantity_served",fn:function(e){var s=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.pub",fn:function(e){var s=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.pun",fn:function(e){var s=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.delivery",fn:function(e){var s=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.amount_net",fn:function(e){var s=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.cost_production",fn:function(e){var s=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.margin",fn:function(e){var s=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.tva",fn:function(e){var s=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.null",fn:function(e){var s=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"body",fn:function(e){var s=e.items;return[i("tbody",t._l(s,(function(e){return i("tr",{key:e.id},[i("td",{staticClass:"text-h6"},[t._v(" "+t._s(e.dish?e.dish.name:"-")+" ")]),i("td",{staticClass:"text-h6"},[i("div",[t._v(" "+t._s(e.quantity_served)+" ")])]),i("td",{staticClass:"text-h6"},[t._v(" "+t._s(e.delivery)+" ")]),i("td",{staticClass:"text-h6"},[i("div",[t._v(" "+t._s(e.pun)+" ")])]),i("td",{staticClass:"text-h6"},[i("div",[t._v(" "+t._s(e.amount_net)+" ")])]),i("td",{staticClass:"text-h6"},[i("div",[t._v(" "+t._s(e.cost_production)+" ")])]),i("td",{staticClass:"text-h6"},[i("div",[t._v(" "+t._s(e.margin)+" ")])]),i("td",{staticClass:"text-h6"},[i("div",[t._v(" "+t._s(e.tva)+" ")])]),i("td",{staticClass:"subtitle-2"},[[i("v-btn",{attrs:{icon:"",color:"orange"},on:{click:function(i){return t.addIngredient(e)}}},[i("v-icon",[t._v("mdi-food-variant")])],1)]],2)])})),0)]}}])}),i("delete-item",{attrs:{dialog:t.dialogDelete,messages:t.messagesDelete,urlItems:t.urlDeleteItems},on:{getItems:t.getItems}}),i("form-ingredient",{ref:"ingredientForm",attrs:{dialog:t.dialogFormIngredient,messages:t.messages},on:{getItems:t.getItems}})],1)],1)}),r=[],l=(i("4de4"),i("a9e3"),i("24a2")),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{persistent:"","max-width":"880px",transition:"dialog-bottom-transition"},model:{value:t.dialog.show,callback:function(e){t.$set(t.dialog,"show",e)},expression:"dialog.show"}},[i("v-toolbar",{attrs:{dark:"",color:"white",dense:"","max-width":"880px"}},[i("div",{staticClass:"title",staticStyle:{color:"black"}},[t._v(" "+t._s(t.$vuetify.lang.t(t.messages.title))+" ")]),i("v-spacer"),i("v-btn",{attrs:{icon:"",light:""},on:{click:function(e){return t.forceRefresh()}}},[i("v-icon",[t._v("mdi-close")])],1)],1),i("div",{staticStyle:{"margin-top":"1px"}},[i("v-card",{staticClass:"pb-1"},[i("br"),i("v-form",{attrs:{disabled:null===t.form.dish},on:{submit:function(e){return e.preventDefault(),t.saveDetails.apply(null,arguments)}}},[i("br"),i("v-card-text",[i("v-row",{attrs:{wrap:""}},[i("v-col",{staticClass:"mb-0 py-0",staticStyle:{"margin-top":"-15px"},attrs:{cols:"12",sm:"12"}},[i("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.recipe.cols.cost.titleT"),outlined:"",value:t.get_bills_amount,readonly:"",filled:"",dense:""}})],1)],1)],1),i("v-divider",{staticClass:"mx-4",staticStyle:{"margin-top":"-15px"}})],1),i("v-card-text",{staticStyle:{"margin-top":"-35px"}},[i("v-data-table",{staticClass:"mt-5",attrs:{"footer-props":{"items-per-page-options":t.itemPerPageOptions},headers:t.headers,items:t.items,"items-per-page":t.itemPerPage,loading:t.loadingDetails.list,options:t.pagination,"server-items-length":t.meta.totalElements,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"item-key":"name","hide-default-footer":""},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"header.name",fn:function(e){var s=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.type_action",fn:function(e){var s=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.quantity",fn:function(e){var s=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.impact_price",fn:function(e){var s=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.total_amount",fn:function(e){var s=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"body",fn:function(e){var s=e.items;return[i("tbody",t._l(s,(function(e){return i("tr",{key:e.id},[i("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.ingredient?e.ingredient.name:"-")+" ")]),i("td",{staticClass:"subtitle-2"},[t.editedRowId===e.id?i("div",[i("v-text-field",{staticStyle:{"max-width":"80px"},attrs:{dense:"","hide-details":"",type:"number"},model:{value:t.editedRow.quantity,callback:function(e){t.$set(t.editedRow,"quantity",e)},expression:"editedRow.quantity"}})],1):i("div",[t._v(" "+t._s(e.quantity)+" ")])]),e.action?i("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.ingredient.cols.type_action."+e.action))+" ")]):i("td",{staticClass:"subtitle-2"},[t._v("-")]),i("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.impact_price)+" ")]),i("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.total_amount)+" ")])])})),0)]}}])}),i("delete-item",{attrs:{dialog:t.dialogDelete,messages:t.messagesDelete,urlItems:t.urlDeleteItems},on:{getItemsDetails:t.getItemsDetails}})],1)],1),i("form-dish",{attrs:{dialog:t.dialogForm,messages:t.messages}})],1)],1)},u=[],d=(i("c740"),i("4160"),i("a434"),i("b0c0"),i("159b"),i("5530")),c=i("53ca"),f=i("bcea"),m=i("5ed4"),h=i("6947"),v=void 0,p={mixins:[m["a"]],props:{form:{type:Object,default:function(){return{id:null,patient:null,doctor:null,medical_act:null,patient_name:null,patient_balance:null,net_payable:null,patient_type:null,action:null,amount_net:null,total_amount:null}}}},data:function(){return{formData:{id:null,action:null,net_payable:null,amount_net:null,total_amount:null,quantity:null,delivery:null,balance:null,impact_price:null,bills:null,reference_no:null,additional_info:null,bills_amount:null,code:null},editedRowId:null,editedRow:{},maxDate:(new Date).toISOString().substr(0,10),optionPayment:{type_Payment:[]},optionIngredient:{type_action:[]},optionType:{type_accommodation:[]},pdfsrc:null,headers:[],headers_act:[],items:[],meta:{},sum:"",simple_tva:null,next_beneficiary:"",current_contribution:"",itemPerPage:30,itemPerPageOptions:[30,40,50],urlDeleteItems:"",sortDesc:!0,loading:{list:!1,refresh:!1,filter:!1},pagination:{},selectedItem:!1,_search:{},_sorts:{},dialogDelete:{show:!1},sortBy:["id"],numberRuleDelivery:function(t){return!(t<0)||"Entrer un nombre positif"},numberRuleDeliveryCash:function(t){return null===t||""===t||isNaN(t)?"Valeur invalide":!(t<0)||"Entrer un nombre positif"},numberRuleQteOrdered:function(t){return null===t||""===t||isNaN(t)?"Valeur invalide":!(t<0)||"Entrer un nombre positif"},numberRuleQteServed:function(t){return t<0?"Entrer un nombre positif":"REMOVE"!==v.formData.action||(t<=v.form.quantity_served||"La quantité ne peut pas dépasser ".concat(v.form.quantity_served))},numberRuleamount_received:function(t){return null===t||""===t||isNaN(t)?"Valeur invalide":!(t<0)||"Entrer un nombre positif"},numberRuleamount_paid:function(t){return null===t||""===t||isNaN(t)?"Valeur invalide":!(t<0)||"Entrer un nombre positif"},numberRulephone_number:function(t){return!(t<0)||"Entrer un nombre positif"},numberRulebank_card_number:function(t){return null===t||""===t||isNaN(t)?"Valeur invalide":!(t<0)||"Entrer un nombre positif"},dialogForm:{show:!1,shows:{showFilter:!1,showInfo:!1}},messagesDelete:{success:"$vuetify.recipe.delete.success"},loadingBtn:!1,loadingDetails:{list:!1,refresh:!1,filter:!1},loadingPrice:{list:!1,refresh:!1,filter:!1},urlIngredient:"ingredients",itemsIngredient:[],product_public_price:"",isLoadingDish:!1,isLoading:!1,searchDish:null,search:null,itemsDish:[],urlDish:"dishes",urlItems:"bills",urlItemsDetails_bills:"details_bills_ingredients",urlItemsDetails:"details_bills/reload"}},watch:{pagination:{handler:function(){this.getItemsDetails()},deep:!0},search:function(t){var e=this;if(null!==t){var i={name:t},s=this;this.isLoading=!0,this.$store.dispatch("request",{url:s.urlIngredient,params:i}).then((function(t){s.itemsIngredient=t.data.content})).finally((function(){return e.isLoading=!1}))}},searchDish:function(t){var e=this;if(null!==t){this.isLoadingDish=!0;var i={name:t},s=this;this.$store.dispatch("request",{url:s.urlDish,params:i}).then((function(t){s.itemsDish=t.data.content})).finally((function(){return e.isLoadingDish=!1}))}}},created:function(){this.setHeaders(),this.getOptionsIngredient()},validations:function(){var t={form:{}};return t},methods:{getOptionsIngredient:function(){var t=this;this._.each(this.$store.getters.type_action,(function(e){t.optionIngredient.type_action.push({text:t.$vuetify.lang.t(e.text),value:e.value})}))},resetFormPro:function(){this.formData.details_stock=null,this.formData.quantity_served=null},get_qte_stock:function(){var t,e;0===(null===(t=this.formData.details_stock)||void 0===t?void 0:t.qte_stock)||this.formData.quantity_served>(null===(e=this.formData.details_stock)||void 0===e?void 0:e.qte_stock)?this.dialogFormWarning.show=!0:this.dialogFormWarning.show=!1},editPdf:function(t){this.dialogFormPdf.show=!0,this.$refs.pdfForm.setForm(t)},forceRefresh:function(){this.items=[],this.form.ingredient=null,this.form.quantity=null,this.form.impact_price=null,this.dialog.show=!1},resetDataForm:function(){if(this.form.intervention_days=null,this.form.medical_areas=null,this.form.id=null,!this.form.id){var t=this;this.$v.form.$reset(),this._.each(this.form,(function(e,i){"object"===Object(c["a"])(t.form[i])?t._.each(t.form[i],(function(e,s){"boolean"===typeof t.form[i][s]?t.form[i][s]=!1:t.form[i][s]=null})):"boolean"===typeof t.form[i]?t.form[i]=!1:t.form[i]=null}))}},deleteItem:function(t){this.urlDeleteItems=this.urlItemsDetails_bills+"/"+t.id,this.dialogDelete.show=!0},setHeaders:function(){this.headers=[{text:"$vuetify.ingredient.cols.name.title",value:"name",align:"start",sortable:!1,width:"120",class:"grey--text text--darken-3"},{text:"$vuetify.recipe.cols.quantity.title",value:"quantity",align:"start",sortable:!1,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.ingredient.cols.type_action.title",value:"type_action",align:"start",sortable:!1,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.dish.cols.price.title",value:"impact_price",align:"start",sortable:!1,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.net_payable.title",value:"total_amount",align:"start",sortable:!1,width:"100",class:"grey--text text--darken-3"}]},createDish:function(){this.dialogForm.show=!0,this.messages={title:"$vuetify.patient.new.title",submit:"$vuetify.patient.new.submit",success:"$vuetify.patient.new.success"}},getDataFormdetails:function(){var t={details_bills:this.form.id,quantity:this.formData.quantity,impact_price:this.formData.impact_price,total_amount:this.get_total_amount(),action:this.formData.action,ingredient:this.formData.ingredient};return t},setForm:function(t){this.form.id=t.id,this.form.dish=t.dish,this.form.quantity=t.quantity,this.form.impact_price=t.impact_price,this.itemsDish.push(t.dish),this.getItemsDetails()},getRouteDetails:function(){return this.form.id,this.urlItemsDetails_bills},getDetailsRoute:function(){return this.form.id,this.urlItemsDetails_bills+"?details_bills="+this.form.id},getMethodDetails:function(){return"POST"},getMethod:function(){return this.form.id?"PUT":"POST"},refreshItemsDetail:function(){var t=this;this.loadingDetails.refresh=!0,this.getItemsDetails().then((function(){})).catch((function(){})).then((function(){t.loadingDetails.refresh=!1}))},getHospital:function(){var t=this;return new Promise((function(e){t.$store.dispatch("request",{url:t.urlItemsHospital}).then((function(i){var s=i.data;t.tva_collected=s.content[0].VAT_collected,e(i)}))}))},getItemsDetails:function(){var t=this,e=this,i=this.pagination,s=i.page,a=i.itemsPerPage,n={page:s,size:a};return this._.isEmpty(this._search)||(this._search=this._.merge(n,this._search)),new Promise((function(i,s){t.loadingDetails.list=!0,e.$store.dispatch("request",{url:e.getDetailsRoute(),params:n}).then((function(t){var s=t.data;e.items=s.content,e.meta={totalElements:s.totalElements},i(t)})).catch((function(i){var a=t.$vuetify.lang.t("$vuetify.error_occured");if(i.response)if(400===i.response.status){var n=i.response.data;e.setFormErrors(n);var r=Object.keys(n)[0];r&&Array.isArray(n[r])&&(a=n[r][0])}else 403===i.response.status?a=e.$vuetify.lang.t("$vuetify.error_denied"):500===i.response.status&&(a=e.$vuetify.lang.t("$vuetify.error_server"));e.$store.dispatch("showNotification",{status:!0,text:a}),s(i)})).then((function(){e.loadingDetails.list=!1,i()}))}))},editDetails:function(t){this.editedRowId=t.id,this.editedRow=Object(d["a"])({},t)},saveRowEdit:function(){var t=this;this.editedRow.ingredient&&(this.editedRow.ingredient=this.editedRow.ingredient["id"]),this.editedRow.details_bills&&(this.editedRow.details_bills=this.editedRow.details_bills["id"]),this.editedRow.hospital&&(this.editedRow.hospital=this.editedRow.hospital["id"]),this.editedRow.dish&&(this.editedRow.dish=this.editedRow.dish["id"]),this.$store.dispatch("showNotification",{statut:!1});var e=this;e.$v.$touch(),e.$v.$invalid||(this.loading=!0,this.$store.dispatch("request",{url:e.getRouteDetails()+"/"+this.editedRow.id,method:"PATCH",data:this.editedRow}).then((function(){e.$store.dispatch("showNotification",{statut:!0,text:e.$vuetify.lang.t("$vuetify.supplies.new.successDetails")}),t.getItemsDetails(),e.resetDataFormProduct()})).catch((function(i){var s;if(i.response)if(400===i.response.status){s="$vuetify.error_occured";var a=i.response.data;e.setFormErrors(a),t.$forceUpdate()}else s="$vuetify.error_server";e.$store.dispatch("showNotification",{statut:!0,text:e.$vuetify.lang.t(s),color:"#B71C1C"})})).then((function(){e.loading=!1})));var i=this.items.findIndex((function(e){return e.id===t.editedRow.id}));-1!==i&&this.items.splice(i,1,Object(d["a"])({},this.editedRow)),this.editedRowId=null,this.editedRow={}},cancelRowEdit:function(){this.editedRowId=null,this.editedRow={}},saveDetails:function(){var t=this;this.$store.dispatch("showNotification",{statut:!1});var e=this;e.$v.$touch(),e.$v.$invalid||(this.loading=!0,this.$store.dispatch("request",{url:e.getRouteDetails(),method:e.getMethodDetails(),data:e.getDataFormdetails()}).then((function(){e.$store.dispatch("showNotification",{statut:!0,text:e.$vuetify.lang.t("$vuetify.supplies.new.successDetails")}),t.getItemsDetails(),e.resetDataFormProduct()})).catch((function(i){var s;if(i.response)if(400===i.response.status){s="$vuetify.error_occured";var a=i.response.data;e.setFormErrors(a),t.$forceUpdate()}else s="$vuetify.error_server";e.$store.dispatch("showNotification",{statut:!0,text:e.$vuetify.lang.t(s),color:"#B71C1C"})})).then((function(){e.loading=!1})))},reloadDetailsBills:function(){var t=this;this.$store.dispatch("showNotification",{statut:!1});var e=this;e.$v.$touch(),e.$v.$invalid||(this.loading=!0,this.$store.dispatch("request",{url:e.urlItemsDetails+"?details_bills="+this.form.id,method:"PATCH"}).then((function(){e.$store.dispatch("showNotification",{statut:!0,text:e.$vuetify.lang.t("$vuetify.supplies.new.successDetails")})})).catch((function(i){var s;if(i.response)if(400===i.response.status){s="$vuetify.error_occured";var a=i.response.data;e.setFormErrors(a),t.$forceUpdate()}else s="$vuetify.error_server";e.$store.dispatch("showNotification",{statut:!0,text:e.$vuetify.lang.t(s),color:"#B71C1C"})})).then((function(){e.loading=!1})))},get_total_amount:function(){var t=0;return t=this.formData.quantity*this.formData.impact_price,t},setFormData:function(t){this.editedRow.pun=t.pun,this.editedRow.pun=this.editedRow.pun-(this.editedRow.pun||0)*(this.editedRow.delivery||0)/100},setFormDataAmount:function(t){this.editedRow.pun=t.pun,this.editedRow.pun=this.editedRow.pun-(this.editedRow.pun||0)*(this.editedRow.delivery||0)/100}},computed:{calculatedPuNet:function(){return this.editedRow.pun},calculatedAmountNet:function(){return(this.editedRow.pun||0)*(this.editedRow.quantity_served||0)},get_bills_amount:function(){var t=0;return this.items.forEach((function(e){t+=e.impact_price})),t},nameErrors:function(){var t=[];return this.$v.form.name.$dirty?(!this.$v.form.name.required&&t.push(this.$vuetify.lang.t("$vuetify.supplies.cols.name.required")),t):t},reference_noErrors:function(){var t=[];return this.$v.form.reference_no.$dirty?(!this.$v.form.reference_no.required&&t.push(this.$vuetify.lang.t("$vuetify.supplies.cols.reference_no.required")),t):t},total_amountErrors:function(){var t=[];return this.$v.form.total_amount.$dirty?(!this.$v.form.total_amount.required&&t.push(this.$vuetify.lang.t("$vuetify.supplies.cols.total_amount.required")),t):t}},mounted:function(){this.getHospital()},components:{DeleteItem:h["a"],FormDish:f["a"]}},_=p,g=i("2877"),y=i("6544"),b=i.n(y),$=i("8336"),w=i("b0af"),x=i("99d9"),D=i("62ad"),k=i("8fea"),I=i("169a"),F=i("ce7e"),R=i("4bd4"),C=i("132d"),S=i("0fd9"),q=i("2fa4"),P=i("8654"),E=i("71d9"),V=Object(g["a"])(_,o,u,!1,null,null,null),O=V.exports;b()(V,{VBtn:$["a"],VCard:w["a"],VCardText:x["b"],VCol:D["a"],VDataTable:k["a"],VDialog:I["a"],VDivider:F["a"],VForm:R["a"],VIcon:C["a"],VRow:S["a"],VSpacer:q["a"],VTextField:P["a"],VToolbar:E["a"]});var N=i("cd41"),B=i("21a6"),A={mixins:[l["a"]],props:{id:Number},data:function(){return{urlItemsCash:"cashs/isOpen",urlItems:"details_bills",urlItemsBills:"bills",sortBy:["createdAt"],maxDate:(new Date).toISOString().substr(0,10),maxDateStatMonth:(new Date).toISOString().substr(0,7),dialogFormIngredient:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogDelete:{show:!1},isActive:!1,isInventory:!1,dialogDetail:{show:!1},dialogEnt:{show:!1},menu4:!1,menu5:!1,form:{id:null,patient:null,doctor:null,patient_name:null,patient_balance:null,net_payable:null,patient_type:null,pub:null,pun:null,amount_gross:null,quantity_ordered:null,amount_net:null,total_amount:null,quantity_served:null,product:null,delivery:null,bills:null,reference_no:null,additional_info:null,bills_amount:null,code:null,cashier:null,bill_type:null,advances:null,bill_shape:null,storage_depots:null,start_date:null,end_date:null},itemsSup:[],filter:{name:null,role:null},messages:{title:"",submit:"",success:""},messagesDelete:{success:"$vuetify.bills.delete.success"}}},mounted:function(){this.getItems(),this.getItemsBills()},computed:{paymentSummary:function(){return[{key:"cash",label:this.$vuetify.lang.t("$vuetify.bills.cols.amount_payment.titleCash"),amount:this.itemsSup.amount_cash,color:"black"},{key:"om",label:this.$vuetify.lang.t("$vuetify.bills.cols.amount_payment.titleOm"),amount:this.itemsSup.amount_om,color:"teal darken-1"},{key:"momo",label:this.$vuetify.lang.t("$vuetify.bills.cols.amount_payment.titleMomo"),amount:this.itemsSup.amount_momo,color:"blue accent-4"},{key:"bank",label:this.$vuetify.lang.t("$vuetify.bills.cols.amount_payment.titleBank"),amount:this.itemsSup.amount_bank_card,color:"teal darken-1"},{key:"prepaid",label:this.$vuetify.lang.t("$vuetify.bills.cols.amount_payment.titlePrepaid"),amount:this.itemsSup.amount_prepaid,color:"blue accent-4"}]},getminDateBestSell:function(){var t,e="";return e=null===(t=new Date(this.form.start_date))||void 0===t?void 0:t.toISOString().substr(0,10),e},get_sum_entry_settlement:function(){var t=this._.sumBy(this.items,(function(t){return t.payment}));return t}},methods:{formatMoney:function(t){return new Intl.NumberFormat("fr-FR").format(t||0)},addIngredient:function(t){this.dialogFormIngredient.show=!0,this.messages={title:"$vuetify.ingredient.list.title",submit:"$vuetify.dish.update.submit",success:"$vuetify.dish.update.success"},this.$refs.ingredientForm.setForm(t)},exportPDF:function(){var t=this,e=this.pagination,i=e.page,s=e.itemsPerPage,a={page:i,size:s};this._.isEmpty(this._search)||(this._search=this._.merge(a,this._search)),t.$store.dispatch("request",{url:t.urlItemsBills+"/details_client?patient="+this.$route.params.id+"&type=pdf",params:a,responseType:"blob"}).then((function(t){var e="Details client par produits",i=new Blob([t.data],{type:t.data.type});B.saveAs(i,e)})),this.$store.dispatch("showNotification",{statut:!1})},getItemsBills:function(){var t=this,e=this,i={};return null!==e.form.start_date&&(i["start_date"]=e.form.start_date),null!==e.form.end_date&&(i["end_date"]=e.form.end_date),this._.isEmpty(this._search)||(this._search=this._.merge(i,this._search)),new Promise((function(s,a){t.loading.list=!0,e.$store.dispatch("request",{url:e.urlItemsBills+"/details_client?patient="+t.id,method:"get",params:i}).then((function(t){var i=t.data;e.itemsSup=i.content,s(t)})).catch((function(i){var s=t.$vuetify.lang.t("$vuetify.error_occured");if(i.response)if(400===i.response.status){var n=i.response.data;e.setFormErrors(n);var r=Object.keys(n)[0];r&&Array.isArray(n[r])&&(s=n[r][0])}else 403===i.response.status?s=e.$vuetify.lang.t("$vuetify.error_denied"):500===i.response.status&&(s=e.$vuetify.lang.t("$vuetify.error_server"));e.$store.dispatch("showNotification",{status:!0,text:s}),a(i)})).then((function(){e.loading.list=!1,s()}))}))},getItems:function(){var t=this,e=this,i={};return null!==e.form.start_date&&(i["start_date"]=e.form.start_date),null!==e.form.end_date&&(i["end_date"]=e.form.end_date),this._.isEmpty(this._search)||(this._search=this._.merge(i,this._search)),this.getItemsBills(),new Promise((function(s,a){t.loading.list=!0,e.$store.dispatch("request",{url:e.urlItems+"?patient="+t.id,method:"get",params:i}).then((function(t){var i=t.data;e.items=i.content,s(t)})).catch((function(i){var s=t.$vuetify.lang.t("$vuetify.error_occured");if(i.response)if(400===i.response.status){var n=i.response.data;e.setFormErrors(n);var r=Object.keys(n)[0];r&&Array.isArray(n[r])&&(s=n[r][0])}else 403===i.response.status?s=e.$vuetify.lang.t("$vuetify.error_denied"):500===i.response.status&&(s=e.$vuetify.lang.t("$vuetify.error_server"));e.$store.dispatch("showNotification",{status:!0,text:s}),a(i)})).then((function(){e.loading.list=!1,s()}))}))},setHeaders:function(){this.headers=[{text:"$vuetify.bills.cols.product_name.title",value:"product_name",align:"start",sortable:!1,width:"140",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.quantity_served.title",value:"quantity_served",align:"start",sortable:!1,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.delivery.title",value:"delivery",align:"start",sortable:!1,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.pun.title",value:"pun",align:"start",sortable:!1,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.amount_net.title",value:"amount_net",align:"start",sortable:!1,width:"60",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.cost_production.title",value:"cost_production",align:"start",sortable:!1,width:"60",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.margin.title",value:"margin",align:"start",sortable:!1,width:"60",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.tva.title",value:"tva",align:"start",sortable:!1,width:"60",class:"grey--text text--darken-3"},{text:"$vuetify.supplies.cols.actions.title",value:null,align:"start",sortable:!1,width:"90"}]},create:function(){this.dialogForm.show=!0,this.messages={title:"$vuetify.bills.new.title",submit:"$vuetify.bills.new.submit",success:"$vuetify.bills.new.success"},this.form={id:null,patient:null,doctor:null,patient_name:null,patient_balance:null,net_payable:null,patient_type:null,pub:null,pun:null,amount_gross:null,quantity_ordered:null,amount_net:null,total_amount:null,quantity_served:null,product:null,delivery:null,bills:null,reference_no:null,additional_info:null,bills_amount:null,code:null,cashier:null,bill_type:null,advances:null,bill_shape:null,storage_depots:null}},editBills:function(t){this.dialogForm.show=!0,this.messages={title:"$vuetify.bills.update.title",submit:"$vuetify.bills.update.submit",success:"$vuetify.bills.update.success"},this.$refs.billsForm.setForm(t)},showFilter:function(){this.dialogForm.shows.showFilter=!0},performFilter:function(){var t=this;t.loading.list=!0;var e={};null!==t.filter.billsname&&(e["billsname"]=t.filter.billsname),null!==t.filter.role&&(e["role"]=t.filter.role),t._search=e,t.getItems().then((function(){t.$refs.filterForm.closeDialog()})).finally((function(){t.$refs.filterForm.stopLoadingBtn()}))}},components:{FormIngredient:O,DeleteItem:N["a"]}},T=A,j=i("cc20"),M=i("2e4b"),H=i("e449"),L=Object(g["a"])(T,n,r,!1,null,"8cbac91a",null),U=L.exports;b()(L,{VBtn:$["a"],VCard:w["a"],VChip:j["a"],VCol:D["a"],VDataTable:k["a"],VDatePicker:M["a"],VIcon:C["a"],VMenu:H["a"],VRow:S["a"],VTextField:P["a"]});var z={name:"Dashboard",props:{form:{type:Object,default:function(){return{id:null,start_date:null,end_date:null}}}},data:function(){return{urlItemsStat_best_selling_products:"/bills/stat_act_patient",loading:{list:!1,refresh:!1,filter:!1},sortBy:"turnover",headers:[],events:[],items:[],meta:{},pagination:{},supply:!1,sortDesc:!0,itemPerPage:5,itemPerPageOptions:[5,10,30],maxDate:(new Date).toISOString().substr(0,10),maxDateStatMonth:(new Date).toISOString().substr(0,7),loadingBtn:!1,chartData:[],barChart:[],items_best_selling:[],menu:!1,menu3:!1,menu2:!1,menu4:!1,menu5:!1,dialogForm:{show:!1,shows:{showFilter:!1,showInfo:!1}},chartOptions:{}}},mounted:function(){this.stat_best_selling_products()},components:{Bills:U},created:function(){this.setHeaders()},watch:{pagination:{handler:function(){this.stat_best_selling_products()},deep:!0}},computed:{getMinStatDate:function(){var t,e="";return e=null===(t=new Date(this.form.start_date))||void 0===t?void 0:t.toISOString().substr(0,10),e},getminDateBestSell:function(){var t,e="";return e=null===(t=new Date(this.form.start_date))||void 0===t?void 0:t.toISOString().substr(0,10),e}},methods:{editBills:function(t){this.dialogForm.show=!0,this.messages={title:"$vuetify.bills.update.title",submit:"$vuetify.bills.update.submit",success:"$vuetify.bills.update.success"},this.$refs.billsForm.setForm(t)},setHeaders:function(){this.headers=[{text:"$vuetify.bills.cols.bill_N.title",value:"bill_N",align:"start",sortable:!0,width:"15",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.bill_type.title",value:"bill_type",align:"start",sortable:!0,width:"50",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.doctor_name.title",value:"doctor_name",align:"start",sortable:!0,width:"30",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.cashier.title",value:"cashier",align:"start",sortable:!0,width:"6",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.net_payable.title2",value:"net_payable",align:"start",sortable:!0,width:"6",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.balance.title",value:"balance",align:"start",sortable:!0,width:"6",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.date_bill.title",value:"date_bill",align:"start",sortable:!0,width:"50",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.actions.title",value:null,align:"start",sortable:!0,width:"6"}]},getMethod:function(){return this.form.id?"PUT":"POST"},getDataForm:function(){var t={start_date:this.form.start_date,end_date:this.form.end_date,patient:this.$route.params.id};return t},stat_best_selling_products:function(){var t=this,e=this;return new Promise((function(i,s){t.loading.list=!0,e.$store.dispatch("request",{url:e.urlItemsStat_best_selling_products,method:e.getMethod(),data:e.getDataForm()}).then((function(t){var s=t.data;s.content>50?(s.content=50,e.items_best_selling=s.content):e.items_best_selling=s.content,i(t)})).catch((function(i){var a=t.$vuetify.lang.t("$vuetify.error_occured");if(i.response)if(400===i.response.status){var n=i.response.data;e.setFormErrors(n);var r=Object.keys(n)[0];r&&Array.isArray(n[r])&&(a=n[r][0])}else 403===i.response.status?a=e.$vuetify.lang.t("$vuetify.error_denied"):500===i.response.status&&(a=e.$vuetify.lang.t("$vuetify.error_server"));e.$store.dispatch("showNotification",{status:!0,text:a}),s(i)})).then((function(){e.loading.list=!1,i()}))}))}}},J=z,Q=(i("cca0"),Object(g["a"])(J,s,a,!1,null,"295277a1",null));e["default"]=Q.exports;b()(Q,{VCol:D["a"],VRow:S["a"]})},cca0:function(t,e,i){"use strict";var s=i("68e7"),a=i.n(s);a.a},cd41:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{"max-width":"300px"},model:{value:t.dialog.show,callback:function(e){t.$set(t.dialog,"show",e)},expression:"dialog.show"}},[i("v-card",[i("v-card-text",[i("v-divider",{staticClass:"mx-4"}),i("v-card-text",[i("div",{staticClass:"body-1 font-weight-bold"},[i("br"),i("h3",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.delete.confirm"))+" ")])])])],1),i("v-divider",{staticClass:"mx-4",staticStyle:{"margin-top":"-30px"}}),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{disabled:t.loading},on:{click:function(e){t.dialog.show=!1}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.no"))+" ")]),i("v-btn",{attrs:{loading:t.loading,dark:"",color:"#0984e3"},on:{click:function(e){return t.deleteItem()}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.yes"))+" ")])],1)],1)],1)},a=[],n={props:{dialog:{type:Object,default:function(){return{show:!1}}},urlItems:{type:String,default:""},messages:{type:Object,default:function(){return{success:""}}}},data:function(){return{loading:!1}},methods:{deleteItem:function(){var t=this;this.loading=!0,this.$store.dispatch("request",{url:t.urlItems,method:"DELETE",data:t.urlDeleteItems}).then((function(){t.$store.dispatch("showNotification",{statut:!0,text:t.$vuetify.lang.t(t.messages.success)}),t.$emit("getItems"),t.dialog.show=!1})).catch((function(e){console.log("erreur delete",e),t.$store.dispatch("showNotification",{statut:!0,text:t.$vuetify.lang.t("$vuetify.deletedErrors")})})).then((function(){t.loading=!1}))}}},r=n,l=i("2877"),o=i("6544"),u=i.n(o),d=i("8336"),c=i("b0af"),f=i("99d9"),m=i("169a"),h=i("ce7e"),v=i("2fa4"),p=Object(l["a"])(r,s,a,!1,null,null,null);e["a"]=p.exports;u()(p,{VBtn:d["a"],VCard:c["a"],VCardActions:f["a"],VCardText:f["b"],VDialog:m["a"],VDivider:h["a"],VSpacer:v["a"]})}}]);
//# sourceMappingURL=chunk-74a498ed.153dea37.js.map