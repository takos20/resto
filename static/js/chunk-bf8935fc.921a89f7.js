(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bf8935fc"],{8021:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"title mb-5 black--text lighten-5 text-center",staticStyle:{height:"30px","margin-top":"30px","background-color":"#e9eef4"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.recipe.list.title"))+" ")]),i("user",{attrs:{color:"black"}})],1)},a=[],n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-card",{staticClass:"pb-4"},[i("div",{staticClass:"mt-5 mx-5"},[t._.includes(this.$auth.user().permissions,"add_bills")?[i("v-btn",{staticClass:"mr-2 my-2",attrs:{color:"primary",dark:""},on:{click:function(e){return t.create()}}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-content-paste")]),t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.add"))+" ")],1)]:t._e(),i("v-btn",{staticClass:"mr-2 my-2",attrs:{loading:t.loading.refresh,depressed:"",color:"#f1f5fc"},on:{click:function(e){return t.refreshItems()}}},[i("v-icon",{attrs:{left:"",color:"primary"}},[t._v("mdi-refresh")]),t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.btn.refresh"))+" ")],1),i("v-spacer")],2)]),i("br"),i("v-card",{staticClass:"pb-4"},[i("v-card-title",[i("div",{staticClass:"title"},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.recipe.filter"))+" ")])]),i("v-card-text",[i("v-row",{attrs:{wrap:""}},[i("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"12"}},[i("v-text-field",{attrs:{label:t.$vuetify.lang.t("$vuetify.category.cols.name.title"),"prepend-inner-icon":"mdi-magnify",outlined:"",clearable:"",dense:""},on:{input:function(e){return t.performFilter()}},model:{value:t.filter.name_language,callback:function(e){t.$set(t.filter,"name_language",e)},expression:"filter.name_language"}})],1)],1)],1)],1),i("v-card",[i("v-data-table",{staticClass:"mt-5",attrs:{"footer-props":{"items-per-page-options":t.itemPerPageOptions},headers:t.headers,items:t.items,"items-per-page":t.itemPerPage,loading:t.loading.list,options:t.pagination,"server-items-length":t.meta.totalElements,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"item-key":"name"},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"header.dish",fn:function(e){var s=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.cost",fn:function(e){var s=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.created",fn:function(e){var s=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.null",fn:function(e){var s=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"body",fn:function(e){var s=e.items;return[i("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var a=e.hover;return i("tbody",{},t._l(s,(function(e){return i("tr",{key:e.id},[i("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.dish?e.dish.name:"-")+" ")]),i("td",{staticClass:"subtitle-2"},[t._v(t._s(e.total_amount))]),i("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(t.$moment(e.createdAt).format("YYYY-MM-DD HH:mm:ss"))+" ")]),i("td",{staticClass:"subtitle-2"},[[i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([t._.includes(t.$auth.user().permissions,"change_bills")?{key:"activator",fn:function(s){var n=s.on;return[i("v-btn",t._g({directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.smAndDown||a,expression:"$vuetify.breakpoint.smAndDown || hover"}],attrs:{color:"secondary",icon:"",text:""},on:{click:function(i){return t.editBills(e)}}},n),[i("v-icon",[t._v("mdi-update")])],1)]}}:null],null,!0)},[i("span",[t._v(t._s(t.$vuetify.lang.t("$vuetify.btn.edit")))])]),i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(s){var n=s.on;return[i("v-btn",t._g({directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.smAndDown||a,expression:"$vuetify.breakpoint.smAndDown || hover"}],attrs:{color:"red",icon:"",text:"",dark:""},on:{click:function(i){return t.deleteItem(e)}}},n),[i("v-icon",[t._v("mdi-delete-outline")])],1)]}}],null,!0)},[i("span",[t._v(t._s(t.$vuetify.lang.t("$vuetify.btn.remove")))])])]],2)])})),0)}}],null,!0)})]}}])}),i("form-bills",{ref:"billsForm",attrs:{dialog:t.dialogForm,form:t.form,messages:t.messages},on:{getItems:t.getItems}}),i("delete-item",{attrs:{dialog:t.dialogDelete,messages:t.messagesDelete,urlItems:t.urlDeleteItems},on:{getItems:t.getItems}})],1)],1)},r=[],o=(i("4de4"),i("b64b"),i("d3b7"),i("24a2")),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{persistent:"","max-width":"880px",transition:"dialog-bottom-transition"},model:{value:t.dialog.show,callback:function(e){t.$set(t.dialog,"show",e)},expression:"dialog.show"}},[i("v-toolbar",{attrs:{dark:"",color:"white",dense:"","max-width":"880px"}},[i("div",{staticClass:"title",staticStyle:{color:"black"}},[t._v(" "+t._s(t.$vuetify.lang.t(t.messages.title))+" ")]),i("v-spacer"),i("v-btn",{attrs:{icon:"",light:""},on:{click:function(e){return t.forceRefresh()}}},[i("v-icon",[t._v("mdi-close")])],1)],1),i("div",{staticStyle:{"margin-top":"1px"}},[i("v-card",{staticClass:"pb-1"},[i("br"),i("v-form",[i("v-card-text",[i("v-row",{attrs:{wrap:""}},[i("v-col",{staticClass:"mb-0 py-0",staticStyle:{"margin-top":"-15px"},attrs:{cols:"12",sm:"7"}},[i("v-autocomplete",{staticClass:"font-weight-bold",attrs:{items:t.itemsDish,loading:t.isLoadingDish,"search-input":t.searchDish,color:"primary","item-text":"name","item-value":"id",label:t.$vuetify.lang.t("$vuetify.recipe.cols.dish.title"),"prepend-inner-icon":"mdi-account mdi-dark mdi-18px",outlined:"",dense:"",autofocus:"",clearable:""},on:{"update:searchInput":function(e){t.searchDish=e},"update:search-input":function(e){t.searchDish=e}},model:{value:t.form.dish,callback:function(e){t.$set(t.form,"dish",e)},expression:"form.dish"}})],1),i("v-col",{staticClass:"mb-0 py-0",staticStyle:{"margin-top":"-15px"},attrs:{cols:"12",sm:"5"}},[i("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.recipe.cols.cost.titleT"),outlined:"",value:t.totalBillsAmount,readonly:"",filled:"",dense:""}})],1)],1)],1),i("v-divider",{staticClass:"mx-4",staticStyle:{"margin-top":"-15px"}})],1),i("v-form",{attrs:{disabled:null===t.form.dish},on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[i("br"),i("v-card-text",[i("v-row",{attrs:{wrap:""}},[i("v-col",{staticClass:"mb-0 py-0",staticStyle:{"margin-top":"-15px"},attrs:{cols:"12",sm:"8"}},[i("v-autocomplete",{staticClass:"font-weight-bold",attrs:{items:t.itemsIngredient,loading:t.isLoading,"search-input":t.search,color:"primary","item-text":"name","item-value":"uid",label:t.$vuetify.lang.t("$vuetify.recipe.cols.ingredient.title"),outlined:"",dense:"",clearable:""},on:{"update:searchInput":function(e){t.search=e},"update:search-input":function(e){t.search=e}},model:{value:t.formData.ingredient,callback:function(e){t.$set(t.formData,"ingredient",e)},expression:"formData.ingredient"}})],1),i("v-col",{staticClass:"mb-0 py-0",staticStyle:{"margin-top":"-15px"},attrs:{cols:"12",sm:"3"}},[i("v-text-field",{staticClass:"font-weight-bold",attrs:{color:"primary",label:t.$vuetify.lang.t("$vuetify.recipe.cols.quantity.title"),outlined:"",dense:"",type:"number",rules:[t.numberRuleQteServed],min:"0"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveDetails()}},model:{value:t.formData.quantity,callback:function(e){t.$set(t.formData,"quantity",e)},expression:"formData.quantity"}})],1),i("v-col",{staticClass:"mb-0 py-0",staticStyle:{"margin-top":"-10px"},attrs:{cols:"12",sm:"1"}},[i("v-btn",{attrs:{color:"primary",loading:t.loadingBtn,light:"",dense:"",small:"","max-width":"2px",disabled:null===this.formData.quantity},on:{click:function(e){return t.saveDetails()}}},[i("v-icon",{attrs:{dark:""}},[t._v(" mdi-content-save ")])],1)],1)],1)],1),i("v-divider",{staticClass:"mx-4"})],1),i("v-card-text",[i("v-data-table",{staticClass:"mt-5",attrs:{"footer-props":{"items-per-page-options":t.itemPerPageOptions},headers:t.headers,items:t.items,"items-per-page":t.itemPerPage,loading:t.loadingDetails.list,options:t.pagination,"server-items-length":t.meta.totalElements,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"item-key":"name","hide-default-footer":""},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"header.name",fn:function(e){var s=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.quantity",fn:function(e){var s=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.cost",fn:function(e){var s=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"header.null",fn:function(e){var s=e.header;return[i("tr",[t._v(" "+t._s(t.$vuetify.lang.t(s.text))+" ")])]}},{key:"body",fn:function(e){var s=e.items;return[i("tbody",t._l(s,(function(e){return i("tr",{key:e.id},[i("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.ingredient?e.ingredient.name:e.compose_ingredient?e.compose_ingredient.name:"-")+" ")]),i("td",{staticClass:"subtitle-2"},[t.editedRowId===e.id?i("div",[i("v-text-field",{staticStyle:{"max-width":"80px"},attrs:{dense:"","hide-details":"",type:"number"},model:{value:t.editedRow.quantity,callback:function(e){t.$set(t.editedRow,"quantity",e)},expression:"editedRow.quantity"}})],1):i("div",[t._v(" "+t._s(e.quantity)+" ")])]),i("td",{staticClass:"subtitle-2"},[t.editedRowId===e.id?i("div",[i("v-text-field",{staticStyle:{"max-width":"80px"},attrs:{dense:"","hide-details":"",type:"number"},model:{value:t.editedRow.cost,callback:function(e){t.$set(t.editedRow,"cost",e)},expression:"editedRow.cost"}})],1):i("div",[t._v(" "+t._s(e.cost)+" ")])]),i("td",{staticClass:"subtitle-2"},[t.editedRowId===e.id?[i("v-btn",{attrs:{icon:"",color:"green"},on:{click:t.saveRowEdit}},[i("v-icon",[t._v("mdi-content-save")])],1),i("v-btn",{attrs:{icon:"",color:"grey"},on:{click:t.cancelRowEdit}},[i("v-icon",[t._v("mdi-cancel")])],1)]:[i("v-btn",{attrs:{icon:"",color:"secondary"},on:{click:function(i){return t.editDetails(e)}}},[i("v-icon",[t._v("mdi-update")])],1),i("v-btn",{attrs:{icon:"",color:"red"},on:{click:function(i){return t.deleteItem(e)}}},[i("v-icon",[t._v("mdi-delete-outline")])],1)]],2)])})),0)]}}])}),i("delete-item",{attrs:{dialog:t.dialogDelete,messages:t.messagesDelete,urlItems:t.urlDeleteItems},on:{getItemsDetails:t.getItemsDetails}})],1)],1),i("form-dish",{attrs:{dialog:t.dialogForm,messages:t.messages}})],1)],1)},u=[],c=(i("c740"),i("13d5"),i("a434"),i("b0c0"),i("a9e3"),i("5530")),d=(i("96cf"),i("1da1")),h=i("bcea"),m=i("5ed4"),f=i("6947"),v={mixins:[m["a"]],props:{form:{type:Object,default:function(){return{id:null,dish:null,total_amount:null}}}},data:function(){return{formData:{id:null,dish:null,quantity:null,ingredient:null,total_amount:null},editedRowId:null,editedRow:{},maxDate:(new Date).toISOString().substr(0,10),optionPayment:{type_Payment:[]},optionType:{type_accommodation:[]},pdfsrc:null,headers:[],items:[],meta:{},itemPerPage:30,itemPerPageOptions:[30,40,50],urlDeleteItems:"",sortDesc:!0,loading:{list:!1,refresh:!1,filter:!1},pagination:{},selectedItem:!1,_search:{},_sorts:{},dialogDelete:{show:!1},numberRuleQteServed:function(t){return null===t||""===t||isNaN(t)?"Valeur invalide":!(t<0)||"Entrer un nombre positif"},sortBy:["id"],numberRuleDelivery:function(t){return!(t<0)||"Entrer un nombre positif"},dialogForm:{show:!1,shows:{showFilter:!1,showInfo:!1}},messagesDelete:{success:"$vuetify.recipe.delete.success"},loadingBtn:!1,recipes:null,loadingDetails:{list:!1,refresh:!1,filter:!1},loadingPrice:{list:!1,refresh:!1,filter:!1},urlIngredient:"ingredients/alls",itemsIngredient:[],product_public_price:"",isLoadingDish:!1,isLoading:!1,searchDish:null,search:null,itemsDish:[],urlDish:"dishes/all",urlItems:"recipes",urlItemsDetails_bills:"recipe_ingredients"}},watch:{pagination:{handler:function(){},deep:!0},"dialog.show":{immediate:!1,handler:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!t){i.next=4;break}if(e.form.id){i.next=4;break}return i.next=4,e.createEmptySupply();case 4:if(t){i.next=7;break}return i.next=7,e.deleteEmptySupply();case 7:e.getItemsDetails(),e.items=[];case 9:case"end":return i.stop()}}),i)})))()}},search:function(t){var e=this;if(null!==t){var i={name_language:t},s=this;this.isLoading=!0,this.$store.dispatch("request",{url:s.urlIngredient,params:i}).then((function(t){s.itemsIngredient=t.data.content})).finally((function(){return e.isLoading=!1}))}},searchDish:function(t){var e=this;if(null!==t){this.isLoadingDish=!0;var i={name_language:t},s=this;this.$store.dispatch("request",{url:s.urlDish,params:i}).then((function(t){s.itemsDish=t.data.content})).finally((function(){return e.isLoadingDish=!1}))}}},created:function(){this.setHeaders()},validations:function(){var t={};return t},methods:{createEmptySupply:function(){var t=this;return new Promise((function(e){t.$store.dispatch("request",{url:t.urlItems+"/create-empty",method:"POST"}).then((function(i){t.recipes=i.data.id,e(i)}))}))},deleteEmptySupply:function(){var t=this,e=this;return new Promise((function(i){e.$store.dispatch("request",{url:e.urlItems+"/"+t.recipes+"/delete-empty",method:"DELETE"}).then((function(t){i(t)}))}))},editPdf:function(t){this.dialogFormPdf.show=!0,this.$refs.pdfForm.setForm(t)},forceRefresh:function(){this.dialog.show=!1,this.items=[],this.formData.ingredient=null,this.formData.quantity=null},deleteItem:function(t){this.urlDeleteItems=this.urlItemsDetails_bills+"/"+t.id,this.dialogDelete.show=!0},setHeaders:function(){this.headers=[{text:"$vuetify.ingredient.cols.name.title",value:"name",align:"start",sortable:!1,width:"120",class:"grey--text text--darken-3"},{text:"$vuetify.recipe.cols.quantity.title",value:"quantity",align:"start",sortable:!1,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.recipe.cols.cost.title",value:"cost",align:"start",sortable:!1,width:"100",class:"grey--text text--darken-3"},{text:"$vuetify.supplies.cols.actions.title",value:null,align:"start",sortable:!1,width:"100"}]},createDish:function(){this.dialogForm.show=!0,this.messages={title:"$vuetify.patient.new.title",submit:"$vuetify.patient.new.submit",success:"$vuetify.patient.new.success"}},createCash:function(){this.dialogFormCash.show=!0},currentInventory:function(){this.dialogFormInv.show=!0},getDataForm:function(){var t={code:this.form.code,dish:this.form.dish,recipes:this.recipes,total_amount:this.totalBillsAmount};return t},getDataFormdetails:function(){var t;return t={recipes:this.recipes,quantity:this.formData.quantity,dish:this.form.dish?this.form.dish["id"]?this.form.dish["id"]:this.form.dish:this.form.dish["id"],total_amount:this.totalBillsAmount,item_uid:this.formData.ingredient},t},setForm:function(t){this.form.id=t.id,this.recipes=t.id,this.form.dish=t.dish,this.itemsDish.push(t.dish),this.getItemsDetails()},getRouteDetails:function(){return this.form.id?this.urlItemsDetails_bills+"/"+this.form.id:this.urlItemsDetails_bills},getDetailsRoute:function(){if(this.form.dish){var t=this.form.dish.id?this.form.dish.id:this.form.dish;return this.urlItemsDetails_bills+"?dish="+t}return this.urlItemsDetails_bills},getMethodDetails:function(){return"POST"},getMethod:function(){return this.form.id?"PUT":"POST"},refreshItemsDetail:function(){var t=this;this.loadingDetails.refresh=!0,this.getItemsDetails().then((function(){})).catch((function(){})).then((function(){t.loadingDetails.refresh=!1}))},getHospital:function(){var t=this;return new Promise((function(e){t.$store.dispatch("request",{url:t.urlItemsHospital}).then((function(i){var s=i.data;t.tva_collected=s.content[0].VAT_collected,e(i)}))}))},save:function(){var t=this;this.$store.dispatch("showNotification",{statut:!1});var e=this;e.$v.$touch(),e.$v.$invalid||(this.loading=!0,this.$store.dispatch("request",{url:e.getRoute(),method:e.getMethod(),data:e.getDataForm()}).then((function(){e.$store.dispatch("showNotification",{statut:!0,text:e.$vuetify.lang.t(e.messages.success)}),"PUT"===t.getMethod()?e.$emit("getItems"):(e.$emit("getItems"),e.resetDataFormProduct(),t.resetDataForm(),t.createEmptySupply())})).catch((function(i){var s="$vuetify.error_server";if(i.response&&400===i.response.status){var a=i.response.data;e.setFormErrors(a),t.$forceUpdate();var n=Object.keys(a)[0];n&&Array.isArray(a[n])&&(s=a[n][0])}e.$store.dispatch("showNotification",{statut:!0,text:s,color:"#B71C1C"})})).finally((function(){e.loading=!1})))},getItemsDetails:function(){var t=this,e=this,i=this.pagination,s=i.page,a=i.itemsPerPage,n={page:s,size:a};return this._.isEmpty(this._search)||(this._search=this._.merge(n,this._search)),new Promise((function(i,s){t.loadingDetails.list=!0,e.$store.dispatch("request",{url:e.urlItemsDetails_bills+"?recipes="+t.recipes,params:n}).then((function(t){var s=t.data;e.items=s.content,e.meta={totalElements:s.totalElements},i(t)})).catch((function(i){var a=t.$vuetify.lang.t("$vuetify.error_occured");if(i.response)if(400===i.response.status){var n=i.response.data;e.setFormErrors(n);var r=Object.keys(n)[0];r&&Array.isArray(n[r])&&(a=n[r][0])}else 403===i.response.status?a=e.$vuetify.lang.t("$vuetify.error_denied"):500===i.response.status&&(a=e.$vuetify.lang.t("$vuetify.error_server"));e.$store.dispatch("showNotification",{status:!0,text:a}),s(i)})).then((function(){e.loadingDetails.list=!1,i()}))}))},editDetails:function(t){this.editedRowId=t.id,this.editedRow=Object(c["a"])({},t)},saveRowEdit:function(){var t=this;console.log(this.editedRow),this.editedRow.ingredient&&(this.editedRow.ingredient=this.editedRow.ingredient["id"]),this.editedRow.dish&&(this.editedRow.dish=this.editedRow.dish["id"]),this.$store.dispatch("showNotification",{statut:!1});var e=this;e.$v.$touch(),e.$v.$invalid||(this.loading=!0,this.$store.dispatch("request",{url:e.getRouteDetails()+"/"+this.editedRow.id,method:"PATCH",data:this.editedRow}).then((function(){e.$store.dispatch("showNotification",{statut:!0,text:e.$vuetify.lang.t("$vuetify.supplies.new.successDetails")}),t.getItemsDetails(),e.resetDataFormProduct()})).catch((function(i){var s;if(i.response)if(400===i.response.status){s="$vuetify.error_occured";var a=i.response.data;e.setFormErrors(a),t.$forceUpdate()}else s="$vuetify.error_server";e.$store.dispatch("showNotification",{statut:!0,text:e.$vuetify.lang.t(s),color:"#B71C1C"})})).then((function(){e.loading=!1})));var i=this.items.findIndex((function(e){return e.id===t.editedRow.id}));-1!==i&&this.items.splice(i,1,Object(c["a"])({},this.editedRow)),this.editedRowId=null,this.editedRow={}},cancelRowEdit:function(){this.editedRowId=null,this.editedRow={}},resetDataFormProduct:function(){this.items=[],this.formData.ingredient=null,this.formData.quantity=null,this.formData.total_amount=null},saveDetails:function(){var t=this;this.$store.dispatch("showNotification",{statut:!1});var e=this;e.$v.$touch(),e.$v.$invalid||(this.loading=!0,this.$store.dispatch("request",{url:e.urlItemsDetails_bills,method:"POST",data:e.getDataFormdetails()}).then((function(){e.$store.dispatch("showNotification",{statut:!0,text:e.$vuetify.lang.t("$vuetify.supplies.new.successDetails")}),t.getItemsDetails(),e.resetDataFormProduct()})).catch((function(i){var s;if(i.response)if(400===i.response.status){s="$vuetify.error_occured";var a=i.response.data;e.setFormErrors(a),t.$forceUpdate()}else s="$vuetify.error_server";e.$store.dispatch("showNotification",{statut:!0,text:e.$vuetify.lang.t(s),color:"#B71C1C"})})).then((function(){e.loading=!1})))},setFormData:function(t){this.editedRow.pun=t.pun,this.editedRow.pun=this.editedRow.pun-(this.editedRow.pun||0)*(this.editedRow.delivery||0)/100},setFormDataAmount:function(t){this.editedRow.pun=t.pun,this.editedRow.pun=this.editedRow.pun-(this.editedRow.pun||0)*(this.editedRow.delivery||0)/100}},computed:{totalBillsAmount:function(){return Array.isArray(this.items)?this.items.reduce((function(t,e){return t+Number(e.cost||0)}),0):0},nameErrors:function(){var t=[];return this.$v.form.name.$dirty?(!this.$v.form.name.required&&t.push(this.$vuetify.lang.t("$vuetify.supplies.cols.name.required")),t):t},reference_noErrors:function(){var t=[];return this.$v.form.reference_no.$dirty?(!this.$v.form.reference_no.required&&t.push(this.$vuetify.lang.t("$vuetify.supplies.cols.reference_no.required")),t):t},total_amountErrors:function(){var t=[];return this.$v.form.total_amount.$dirty?(!this.$v.form.total_amount.required&&t.push(this.$vuetify.lang.t("$vuetify.supplies.cols.total_amount.required")),t):t}},mounted:function(){this.getHospital()},components:{DeleteItem:f["a"],FormDish:h["a"]}},p=v,g=i("2877"),y=i("6544"),$=i.n(y),b=i("c6a6"),w=i("8336"),_=i("b0af"),D=i("99d9"),x=i("62ad"),I=i("8fea"),k=i("169a"),C=i("ce7e"),R=i("4bd4"),F=i("132d"),E=i("0fd9"),P=i("2fa4"),q=i("8654"),V=i("71d9"),S=Object(g["a"])(p,l,u,!1,null,null,null),A=S.exports;$()(S,{VAutocomplete:b["a"],VBtn:w["a"],VCard:_["a"],VCardText:D["b"],VCol:x["a"],VDataTable:I["a"],VDialog:k["a"],VDivider:C["a"],VForm:R["a"],VIcon:F["a"],VRow:E["a"],VSpacer:P["a"],VTextField:q["a"],VToolbar:V["a"]});var O=i("cd41"),T={mixins:[o["a"]],data:function(){return{urlItemsCash:"cashs/isOpen",urlItems:"recipes",urlDeleteItems:"recipes",deleteItems:"/recipes",sortBy:["createdAt"],dialogForm:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogFormCash:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogFormInv:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogDelete:{show:!1},isActive:!1,isInventory:!1,dialogDetail:{show:!1},dialogEnt:{show:!1},form:{id:null,patient:null,doctor:null,patient_name:null,patient_balance:null,net_payable:null,patient_type:null,pub:null,pun:null,amount_gross:null,quantity_ordered:null,amount_net:null,total_amount:null,quantity_served:null,product:null,delivery:null,bills:null,reference_no:null,additional_info:null,bills_amount:null,code:null,cashier:null,bill_type:null,amount_paid:null,bill_shape:null,storage_depots:null},filter:{name_language:null,role:null},messages:{title:"",submit:"",success:""},messagesDelete:{success:"$vuetify.recipe.delete.success"}}},mounted:function(){this.getItems()},methods:{deleteItem:function(t){this.urlDeleteItems=this.deleteItems+"/"+t.id,this.dialogDelete.show=!0},createCash:function(){this.dialogFormCash.show=!0,this.messages={title:"$vuetify.cash.new.title",submit:"$vuetify.cash.new.submit",success:"$vuetify.cash.new.success"}},currentInventory:function(){this.dialogFormInv.show=!0},getItems:function(){var t=this,e=this,i=this.pagination,s=i.page,a=i.itemsPerPage,n={page:s,size:a};return this._.isEmpty(this._search)||(this._search=this._.merge(n,this._search)),new Promise((function(i,s){t.loading.list=!0,e.$store.dispatch("request",{url:e.urlItems,params:n}).then((function(t){var s=t.data;e.items=s.content,e.meta={totalElements:s.totalElements},i(t)})).catch((function(i){var a=t.$vuetify.lang.t("$vuetify.error_occured");if(i.response)if(400===i.response.status){var n=i.response.data;e.setFormErrors(n);var r=Object.keys(n)[0];r&&Array.isArray(n[r])&&(a=n[r][0])}else 403===i.response.status?a=e.$vuetify.lang.t("$vuetify.error_denied"):500===i.response.status&&(a=e.$vuetify.lang.t("$vuetify.error_server"));e.$store.dispatch("showNotification",{status:!0,text:a}),s(i)})).then((function(){e.loading.list=!1,i()}))}))},setHeaders:function(){this.headers=[{text:"$vuetify.recipe.cols.dish.title",value:"dish",align:"start",sortable:!0,width:"15",class:"grey--text text--darken-3"},{text:"$vuetify.recipe.cols.cost.title",value:"cost",align:"start",sortable:!0,width:"50",class:"grey--text text--darken-3"},{text:"$vuetify.recipe.cols.created.title",value:"created",align:"start",sortable:!0,width:"1",class:"grey--text text--darken-3"},{text:"$vuetify.bills.cols.actions.title",value:null,align:"start",sortable:!0,width:"140"}]},create:function(){this.dialogForm.show=!0,this.messages={title:"$vuetify.recipe.new.title",submit:"$vuetify.recipe.new.submit",success:"$vuetify.recipe.new.success"},this.form={id:null,dish:null}},editBills:function(t){this.dialogForm.show=!0,this.messages={title:"$vuetify.recipe.update.title",submit:"$vuetify.recipe.update.submit",success:"$vuetify.recipe.update.success"},this.$refs.billsForm.setForm(t)},showFilter:function(){this.dialogForm.shows.showFilter=!0},performFilter:function(){var t=this;t.loading.list=!0;var e={};null!==t.filter.name_language&&(e["dish_name"]=t.filter.name_language),t._search=e,t.getItems().then((function(){t.$refs.filterForm.closeDialog()})).finally((function(){t.$refs.filterForm.stopLoadingBtn()}))}},components:{FormBills:A,DeleteItem:O["a"]}},B=T,N=i("ce87"),j=i("3a2f"),L=Object(g["a"])(B,n,r,!1,null,"2f82987a",null),H=L.exports;$()(L,{VBtn:w["a"],VCard:_["a"],VCardText:D["b"],VCardTitle:D["c"],VCol:x["a"],VDataTable:I["a"],VHover:N["a"],VIcon:F["a"],VRow:E["a"],VSpacer:P["a"],VTextField:q["a"],VTooltip:j["a"]});var M={metaInfo:function(){return{title:this.$vuetify.lang.t("$vuetify.recipe.title")}},data:function(){return{}},components:{User:H}},U=M,Y=Object(g["a"])(U,s,a,!1,null,null,null);e["default"]=Y.exports},cd41:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{"max-width":"300px"},model:{value:t.dialog.show,callback:function(e){t.$set(t.dialog,"show",e)},expression:"dialog.show"}},[i("v-card",[i("v-card-text",[i("v-divider",{staticClass:"mx-4"}),i("v-card-text",[i("div",{staticClass:"body-1 font-weight-bold"},[i("br"),i("h3",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.delete.confirm"))+" ")])])])],1),i("v-divider",{staticClass:"mx-4",staticStyle:{"margin-top":"-30px"}}),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{disabled:t.loading},on:{click:function(e){t.dialog.show=!1}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.no"))+" ")]),i("v-btn",{attrs:{loading:t.loading,dark:"",color:"#0984e3"},on:{click:function(e){return t.deleteItem()}}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.yes"))+" ")])],1)],1)],1)},a=[],n={props:{dialog:{type:Object,default:function(){return{show:!1}}},urlItems:{type:String,default:""},messages:{type:Object,default:function(){return{success:""}}}},data:function(){return{loading:!1}},methods:{deleteItem:function(){var t=this;this.loading=!0,this.$store.dispatch("request",{url:t.urlItems,method:"DELETE",data:t.urlDeleteItems}).then((function(){t.$store.dispatch("showNotification",{statut:!0,text:t.$vuetify.lang.t(t.messages.success)}),t.$emit("getItems"),t.dialog.show=!1})).catch((function(e){console.log("erreur delete",e),t.$store.dispatch("showNotification",{statut:!0,text:t.$vuetify.lang.t("$vuetify.deletedErrors")})})).then((function(){t.loading=!1}))}}},r=n,o=i("2877"),l=i("6544"),u=i.n(l),c=i("8336"),d=i("b0af"),h=i("99d9"),m=i("169a"),f=i("ce7e"),v=i("2fa4"),p=Object(o["a"])(r,s,a,!1,null,null,null);e["a"]=p.exports;u()(p,{VBtn:c["a"],VCard:d["a"],VCardActions:h["a"],VCardText:h["b"],VDialog:m["a"],VDivider:f["a"],VSpacer:v["a"]})}}]);
//# sourceMappingURL=chunk-bf8935fc.921a89f7.js.map