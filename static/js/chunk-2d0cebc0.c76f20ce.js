(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cebc0"],{"615d":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("v-card",{staticClass:"pb-4"},[s("div",{staticClass:"mt-5 mx-5"},[s("v-btn",{staticClass:"mr-2 my-2",attrs:{loading:e.loading.refresh,depressed:"",color:"#f1f5fc"},on:{click:function(t){return e.refreshItems()}}},[s("v-icon",{attrs:{left:"",color:"primary"}},[e._v("mdi-refresh")]),e._v(" "+e._s(e.$vuetify.lang.t("$vuetify.btn.refresh"))+" ")],1),s("v-spacer")],1)]),s("br"),s("v-card",{staticClass:"pb-4"},[s("v-card-title",[s("div",{staticClass:"title"},[e._v(" "+e._s(e.$vuetify.lang.t("$vuetify.payslips.filter"))+" ")])]),s("v-card-text",[s("v-row",{attrs:{wrap:""}},[s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"12"}},[s("v-autocomplete",{staticClass:"font-weight-bold",attrs:{dense:"",items:e.itemsEmployee,loading:e.isLoadingEmployee,"search-input":e.searchEmployee,label:e.$vuetify.lang.t("$vuetify.employee.title"),color:"primary","item-text":"name","hide-no-data":"","item-value":"id","prepend-inner-icon":"mdi-code-array",outlined:"",clearable:""},on:{"update:searchInput":function(t){e.searchEmployee=t},"update:search-input":function(t){e.searchEmployee=t}},scopedSlots:e._u([{key:"selection",fn:function(t){return[e._v(" "+e._s(t.item.lastName)+" - "+e._s(t.item.firstName)+" ")]}},{key:"item",fn:function(t){return[e._v(" "+e._s(t.item.lastName)+" - "+e._s(t.item.firstName)+" ")]}},{key:"label",fn:function(){return[s("span",{staticClass:"red--text"},[s("strong",[e._v("* ")])]),e._v(e._s(e.$vuetify.lang.t("$vuetify.employee.title"))+" ")]},proxy:!0}]),model:{value:e.form.employee,callback:function(t){e.$set(e.form,"employee",t)},expression:"form.employee"}})],1)],1)],1)],1),s("v-card",[s("v-data-table",{staticClass:"mt-5",attrs:{"footer-props":{"items-per-page-options":e.itemPerPageOptions},headers:e.headers,items:e.items,"items-per-page":e.itemPerPage,loading:e.loading.list,options:e.pagination,"server-items-length":e.meta.totalElements,"sort-by":e.sortBy,"sort-desc":e.sortDesc,"item-key":"name"},on:{"update:options":function(t){e.pagination=t}},scopedSlots:e._u([{key:"header.code",fn:function(t){var a=t.header;return[s("tr",[e._v(" "+e._s(e.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.employee",fn:function(t){var a=t.header;return[s("tr",[e._v(" "+e._s(e.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.sanction",fn:function(t){var a=t.header;return[s("tr",[e._v(" "+e._s(e.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.startdate",fn:function(t){var a=t.header;return[s("tr",[e._v(" "+e._s(e.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.enddate",fn:function(t){var a=t.header;return[s("tr",[e._v(" "+e._s(e.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.created",fn:function(t){var a=t.header;return[s("tr",[e._v(" "+e._s(e.$vuetify.lang.t(a.text))+" ")])]}},{key:"header.null",fn:function(t){var a=t.header;return[s("tr",[e._v(" "+e._s(e.$vuetify.lang.t(a.text))+" ")])]}},{key:"body",fn:function(t){var a=t.items;return[s("v-hover",{scopedSlots:e._u([{key:"default",fn:function(t){var i=t.hover;return s("tbody",{},e._l(a,(function(t){return s("tr",{key:t.id},[s("td",{staticClass:"subtitle-2"},[e._v(" "+e._s(t.employee.lastName)+" "+e._s(t.employee.firstName)+" ")]),s("td",{staticClass:"subtitle-2"},[e._v(" "+e._s(t.startDate)+" ")]),s("td",{staticClass:"subtitle-2"},[e._v(" "+e._s(t.endDate)+" ")]),s("td",{staticClass:"subtitle-2"},[e._v(" "+e._s(e.$moment(t.createdAt).format("YYYY-MM-DD HH:mm:ss"))+" ")]),s("td",{staticClass:"subtitle-2"},[[s("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([e._.includes(e.$auth.user().permissions,"change_payslips")?{key:"activator",fn:function(a){var n=a.on;return[s("v-btn",e._g({directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.smAndDown||i,expression:"$vuetify.breakpoint.smAndDown || hover"}],attrs:{color:"secondary",icon:"",text:""},on:{click:function(s){return e.editpayslips(t)}}},n),[s("v-icon",[e._v("mdi-update")])],1)]}}:null],null,!0)},[s("span",[e._v(e._s(e.$vuetify.lang.t("$vuetify.btn.edit")))])]),s("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([e._.includes(e.$auth.user().permissions,"delete_payslips")?{key:"activator",fn:function(a){var n=a.on;return[s("v-btn",e._g({directives:[{name:"show",rawName:"v-show",value:e.$vuetify.breakpoint.smAndDown||i,expression:"$vuetify.breakpoint.smAndDown || hover"}],attrs:{color:"red",icon:"",text:"",dark:""},on:{click:function(s){return e.deleteItem(t)}}},n),[s("v-icon",[e._v("mdi-delete-outline")])],1)]}}:null],null,!0)},[s("span",[e._v(e._s(e.$vuetify.lang.t("$vuetify.btn.remove")))])])]],2)])})),0)}}],null,!0)})]}}])}),s("form-payslips",{ref:"payslipsForm",attrs:{dialog:e.dialogForm,form:e.form,messages:e.messages},on:{getItems:e.getItems}}),s("delete-item",{attrs:{dialog:e.dialogDelete,messages:e.messagesDelete,urlItems:e.urlDeleteItems},on:{getItems:e.getItems}})],1)],1)},i=[],n=(s("4de4"),s("b64b"),s("d3b7"),s("24a2")),r=s("98b8"),o=s("cd41"),l={mixins:[n["a"]],data:function(){return{urlItems:"/payslips",urlEmployee:"employees",isLoadingEmployee:!1,searchEmployee:null,itemsEmployee:[],urlSanction:"sanctions",isLoadingSanction:!1,searchSanction:null,loading:{list:!1,refresh:!1,filter:!1},itemsSanction:[],sortBy:["id"],dialogForm:{show:!1,shows:{showFilter:!1,showInfo:!1}},dialogDelete:{show:!1},dialogDetail:{show:!1},dialogEnt:{show:!1},form:{id:null,title:null},filter:{employee:null,sanction:null},messages:{title:"",submit:"",success:""},messagesDelete:{success:"$vuetify.payslips.delete.success"}}},watch:{searchEmployee:function(e){var t=this;if(null!==e){var s={name:e},a=this;this.isLoadingEmployee=!0,this.$store.dispatch("request",{url:a.urlEmployee,params:s}).then((function(e){a.itemsEmployee=e.data.content})).finally((function(){return t.isLoadingEmployee=!1}))}},searchSanction:function(e){var t=this;if(null!==e){var s={name:e},a=this;this.isLoadingSanction=!0,this.$store.dispatch("request",{url:a.urlSanction,params:s}).then((function(e){a.itemsSanction=e.data.content})).finally((function(){return t.isLoadingSanction=!1}))}}},methods:{setHeaders:function(){this.headers=[{text:"$vuetify.employee.title",value:"employee",align:"start",sortable:!0,width:"50",class:"grey--text text--darken-3"},{text:"$vuetify.payslips.cols.startDate.title",value:"startdate",align:"start",sortable:!0,width:"150",class:"grey--text text--darken-3"},{text:"$vuetify.payslips.cols.endDate.title",value:"enddate",align:"start",sortable:!0,width:"150",class:"grey--text text--darken-3"},{text:"$vuetify.payslips.cols.created.title",value:"created",align:"start",sortable:!0,width:"105",class:"grey--text text--darken-3"},{text:"$vuetify.shape.cols.actions.title",value:null,align:"start",sortable:!0,width:"80"}]},create:function(){this.dialogForm.show=!0,this.messages={title:"$vuetify.payslips.new.title",submit:"$vuetify.payslips.new.submit",success:"$vuetify.payslips.new.success"},this.form={id:null,title:null}},getItems:function(){var e=this,t=this,s=this.pagination,a=s.page,i=s.itemsPerPage,n={page:a,size:i};return this._.isEmpty(this._search)||(this._search=this._.merge(n,this._search)),new Promise((function(s,a){e.loading.list=!0,t.$store.dispatch("request",{url:t.urlItems+"?employee="+e.$auth.user().id,params:n}).then((function(e){var a=e.data;t.items=a.content,t.meta={totalElements:a.totalElements},s(e)})).catch((function(s){var i=e.$vuetify.lang.t("$vuetify.error_occured");if(s.response)if(400===s.response.status){var n=s.response.data;t.setFormErrors(n);var r=Object.keys(n)[0];r&&Array.isArray(n[r])&&(i=n[r][0])}else 403===s.response.status?i=t.$vuetify.lang.t("$vuetify.error_denied"):500===s.response.status&&(i=t.$vuetify.lang.t("$vuetify.error_server"));t.$store.dispatch("showNotification",{status:!0,text:i}),a(s)})).then((function(){t.loading.list=!1,s()}))}))},editpayslips:function(e){this.dialogForm.show=!0,this.messages={title:"$vuetify.payslips.update.title",submit:"$vuetify.payslips.update.submit",success:"$vuetify.payslips.update.success"},this.$refs.payslipsForm.setForm(e)},performFilter:function(){var e=this;e.loading.list=!0;var t={};null!==e.filter.emlyee&&(t["emplyee"]=e.filter.employee),null!==e.filter.sanction&&(t["sanction"]=e.filter.sanction),e._search=t,e.getItems().then((function(){e.$refs.filterForm.closeDialog()})).finally((function(){e.$refs.filterForm.stopLoadingBtn()}))}},components:{FormPayslips:r["a"],DeleteItem:o["a"]}},u=l,c=s("2877"),d=s("6544"),m=s.n(d),f=s("c6a6"),p=s("8336"),v=s("b0af"),y=s("99d9"),h=s("62ad"),g=s("8fea"),_=s("ce87"),$=s("132d"),b=s("0fd9"),w=s("2fa4"),x=s("3a2f"),k=Object(c["a"])(u,a,i,!1,null,"65f629f9",null);t["default"]=k.exports;m()(k,{VAutocomplete:f["a"],VBtn:p["a"],VCard:v["a"],VCardText:y["b"],VCardTitle:y["c"],VCol:h["a"],VDataTable:g["a"],VHover:_["a"],VIcon:$["a"],VRow:b["a"],VSpacer:w["a"],VTooltip:x["a"]})}}]);
//# sourceMappingURL=chunk-2d0cebc0.c76f20ce.js.map