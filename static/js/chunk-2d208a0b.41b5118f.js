(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d208a0b"],{a633:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-card",{staticClass:"pb-4"},[s("v-row",[s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"3"}},[s("h3",{staticClass:"my-4",staticStyle:{"padding-left":"15px"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.ordinance.title"))+" ")])]),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"1"}},[s("v-btn",{staticClass:"mr-2 my-2",attrs:{loading:t.loading.refresh,depressed:"",color:"#f1f5fc"},on:{click:function(e){return t.refreshItems()}}},[s("v-icon",{attrs:{left:"",color:"primary"}},[t._v("mdi-refresh")])],1)],1),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"1"}}),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"3"}},[s("v-menu",{attrs:{color:"primary","close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,a=e.attrs;return[s("v-text-field",t._g(t._b({staticClass:"font-weight-bold my-2",attrs:{color:"primary",clearable:"","prepend-inner-icon":"mdi-clock-start mdi-dark mdi-18px",outlined:"",label:t.$vuetify.lang.t("$vuetify.meeting.cols.startDate.title"),dense:"",readonly:""},model:{value:t.form.start_date,callback:function(e){t.$set(t.form,"start_date",e)},expression:"form.start_date"}},"v-text-field",a,!1),n))]}}]),model:{value:t.menu4,callback:function(e){t.menu4=e},expression:"menu4"}},[s("v-date-picker",{attrs:{max:t.maxDate,color:"primary"},on:{change:t.getItems,input:function(e){t.menu4=!1}},model:{value:t.form.start_date,callback:function(e){t.$set(t.form,"start_date",e)},expression:"form.start_date"}})],1)],1),s("v-col",{staticClass:"mb-0 py-0",attrs:{cols:"12",sm:"3"}},[s("v-menu",{attrs:{color:"primary","close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,a=e.attrs;return[s("v-text-field",t._g(t._b({staticClass:"font-weight-bold my-2",attrs:{color:"primary",clearable:"","prepend-inner-icon":"mdi-clock-end mdi-dark mdi-18px",outlined:"",label:t.$vuetify.lang.t("$vuetify.appointment.cols.end_appointment_date.title"),dense:"",readonly:""},model:{value:t.form.end_date,callback:function(e){t.$set(t.form,"end_date",e)},expression:"form.end_date"}},"v-text-field",a,!1),n))]}}]),model:{value:t.menu5,callback:function(e){t.menu5=e},expression:"menu5"}},[s("v-date-picker",{attrs:{max:t.maxDate,min:t.getminDateBestSell,color:"primary"},on:{change:t.getItems,input:function(e){t.menu5=!1}},model:{value:t.form.end_date,callback:function(e){t.$set(t.form,"end_date",e)},expression:"form.end_date"}})],1)],1)],1),s("v-data-table",{staticClass:"mt-5",attrs:{"footer-props":{"items-per-page-options":t.itemPerPageOptions},headers:t.headers,items:t.items,"items-per-page":t.itemPerPage,loading:t.loading.list,options:t.pagination,"server-items-length":t.meta.totalElements,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"item-key":"patient"},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"header.code",fn:function(e){var n=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(n.text))+" ")])]}},{key:"header.consultation",fn:function(e){var n=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(n.text))+" ")])]}},{key:"header.createdAt",fn:function(e){var n=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(n.text))+" ")])]}},{key:"header.null",fn:function(e){var n=e.header;return[s("tr",[t._v(" "+t._s(t.$vuetify.lang.t(n.text))+" ")])]}},{key:"body",fn:function(e){var n=e.items;return[s("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var a=e.hover;return s("tbody",{},t._l(n,(function(e){return s("tr",{key:e.id},[s("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(e.code)+" ")]),s("td",{staticClass:"subtitle-2"},[t._v(t._s(e.consultation.code))]),s("td",{staticClass:"subtitle-2"},[t._v(" "+t._s(t.$moment(e.createdAt).format("YYYY-MM-DD HH:mm:ss"))+" ")]),s("td",{staticClass:"subtitle-2"},[[s("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([t._.includes(t.$auth.user().permissions,"change_ordinance")?{key:"activator",fn:function(n){var r=n.on;return[s("v-btn",t._g({directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.smAndDown||a,expression:"$vuetify.breakpoint.smAndDown || hover"}],attrs:{color:"secondary",icon:"",text:""},on:{click:function(s){return t.editOrdinance(e)}}},r),[s("v-icon",[t._v("mdi-update")])],1)]}}:null],null,!0)},[s("span",[t._v(t._s(t.$vuetify.lang.t("$vuetify.btn.edit")))])]),s("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([t._.includes(t.$auth.user().permissions,"delete_ordinance")?{key:"activator",fn:function(n){var r=n.on;return[s("v-btn",t._g({directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.smAndDown||a,expression:"$vuetify.breakpoint.smAndDown || hover"}],attrs:{color:"red",icon:"",text:"",dark:""},on:{click:function(s){return t.deleteItem(e)}}},r),[s("v-icon",[t._v("mdi-delete-outline")])],1)]}}:null],null,!0)},[s("span",[t._v(t._s(t.$vuetify.lang.t("$vuetify.btn.remove")))])])]],2)])})),0)}}],null,!0)})]}}])}),s("form-ordinance",{ref:"ordinanceForm",attrs:{dialog:t.dialogForm,form:t.form,messages:t.messages},on:{getItems:t.getItems}}),s("delete-item",{attrs:{dialog:t.dialogDelete,messages:t.messagesDelete,urlItems:t.urlDeleteItems},on:{getItems:t.getItems}})],1)],1)},a=[],r=(s("4de4"),s("a9e3"),s("b64b"),s("d3b7"),s("24a2")),o=s("ca95"),i=s("cd41"),l={mixins:[r["a"]],props:{id:Number},data:function(){return{urlItems:"/ordinances",sortBy:["id"],dialogForm:{show:!1,shows:{showFilter:!1,showInfo:!1}},menu4:!1,menu5:!1,dialogDelete:{show:!1},dialogDetail:{show:!1},dialogEnt:{show:!1},form:{id:null,code:null,medication:null,patient:null,consultation:null,start_date:null,end_date:null},filter:{userpatient:null,role:null},messages:{title:"",submit:"",success:""},maxDate:(new Date).toISOString().substr(0,10),maxDateStatMonth:(new Date).toISOString().substr(0,7),loading:{list:!1,refresh:!1,filter:!1},messagesDelete:{success:"$vuetify.ordinance.delete.success"}}},computed:{getminDateBestSell:function(){var t,e="";return e=null===(t=new Date(this.form.start_date))||void 0===t?void 0:t.toISOString().substr(0,10),e}},methods:{setHeaders:function(){this.headers=[{text:"$vuetify.ordinance.cols.code.title",value:"code",align:"start",sortable:!0,width:"50",class:"grey--text text--darken-3"},{text:"$vuetify.ordinance.cols.consultation.title",value:"consultation",align:"start",sortable:!0,width:"50",class:"grey--text text--darken-3"},{text:"$vuetify.consultation.cols.createdAt.title",value:"createdAt",align:"start",sortable:!0,width:"105",class:"grey--text text--darken-3"},{text:"$vuetify.consultation.cols.actions.title",value:null,align:"start",sortable:!0,width:"140"}]},create:function(){this.dialogForm.show=!0,this.messages={title:"$vuetify.ordinance.new.title",submit:"$vuetify.ordinance.new.submit",success:"$vuetify.ordinance.new.success"}},getItems:function(){var t=this,e=this,s={};return null!==e.form.start_date&&(s["start_date"]=e.form.start_date),null!==e.form.end_date&&(s["end_date"]=e.form.end_date),this._.isEmpty(this._search)||(this._search=this._.merge(s,this._search)),new Promise((function(n,a){t.loading.list=!0,e.$store.dispatch("request",{url:e.urlItems+"?patient="+t.id,method:"get",params:s}).then((function(t){var s=t.data;e.items=s.content,n(t)})).catch((function(s){var n=t.$vuetify.lang.t("$vuetify.error_occured");if(s.response)if(400===s.response.status){var r=s.response.data;e.setFormErrors(r);var o=Object.keys(r)[0];o&&Array.isArray(r[o])&&(n=r[o][0])}else 403===s.response.status?n=e.$vuetify.lang.t("$vuetify.error_denied"):500===s.response.status&&(n=e.$vuetify.lang.t("$vuetify.error_server"));e.$store.dispatch("showNotification",{status:!0,text:n}),a(s)})).then((function(){e.loading.list=!1,n()}))}))},editOrdinance:function(t){this.dialogForm.show=!0,this.messages={title:"$vuetify.ordinance.update.title",submit:"$vuetify.ordinance.update.submit",success:"$vuetify.ordinance.update.success"},this.$refs.ordinanceForm.setForm(t)},showFilter:function(){this.dialogForm.shows.showFilter=!0},performFilter:function(){var t=this;t.loading.list=!0;var e={};null!==t.filter.userpatient&&(e["userpatient"]=t.filter.userpatient),null!==t.filter.role&&(e["role"]=t.filter.role),t._search=e,t.getItems().then((function(){t.$refs.filterForm.closeDialog()})).finally((function(){t.$refs.filterForm.stopLoadingBtn()}))},assignEnterprise:function(t){this.dialogEnt.show=!0,this.$refs.assignForm.setForm(t)}},components:{FormOrdinance:o["a"],DeleteItem:i["a"]}},c=l,d=s("2877"),u=s("6544"),m=s.n(u),f=s("8336"),v=s("b0af"),p=s("62ad"),g=s("8fea"),h=s("2e4b"),y=s("ce87"),_=s("132d"),b=s("e449"),$=s("0fd9"),w=s("8654"),k=s("3a2f"),x=Object(d["a"])(c,n,a,!1,null,"200926f2",null);e["default"]=x.exports;m()(x,{VBtn:f["a"],VCard:v["a"],VCol:p["a"],VDataTable:g["a"],VDatePicker:h["a"],VHover:y["a"],VIcon:_["a"],VMenu:b["a"],VRow:$["a"],VTextField:w["a"],VTooltip:k["a"]})}}]);
//# sourceMappingURL=chunk-2d208a0b.41b5118f.js.map